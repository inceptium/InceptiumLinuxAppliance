(this.webpackJsonpinceptium=this.webpackJsonpinceptium||[]).push([[0],{1027:function(e,t,n){},1028:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),c=n.n(i),o=n(1104),s=n(1095),l=n(40),d=n(50),u=n(219),p=n(1);var b=function(){return Object(p.jsx)("h2",{children:"404 - Page not found"})},j=n(7),m=n(5),h=n(303),f=n(1032),O=n(1033),g=n(1034),x=n(41),v=n(111),q=n(45),y=n(64),C=n(207),w=n.p+"static/media/logo.db0c59e0.png",S=n(58),N=n(31),P=n(57),k=n(566),T=n(302),I=n(646),A=n.n(I),R=n(645),D=n.n(R);var E=function(){var e,t,n=Object(a.useContext)(S.b),i=n.setData,c=n.isAuth,o=n.sessionData.inceptiumid,s=Object(N.a)(!0,!1).login,l=Object(P.a)(),u=Object(d.h)(),b=r.a.useState(!1),I=Object(m.a)(b,2),R=I[0],E=I[1],L=(null===u||void 0===u||null===(e=u.state)||void 0===e||null===(t=e.from)||void 0===t||t.pathname,Object(v.a)((function(e){return{wrapper:{minHeight:"100vh",backgroundColor:e.palette.primary.main},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardcontent:{padding:e.spacing(5)},media:{height:0,paddingTop:"34.25%"}}}))());return c?Object(p.jsx)(d.a,{to:{pathname:"/dashboard"}}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(q.b,{initialValues:{inceptiumid:localStorage.getItem("inceptiumid")||o,user:"",password:""},onSubmit:function(e,t){var n=t.setSubmitting,a=t.setErrors;s(e).then((function(t){n(!1),t.disabled?a("L'utente \xe8 disabilitato"):i(Object(j.a)(Object(j.a)({},e),t))})).catch((function(e){n(!1),a(e.error||e.message),l(e.message,"error")}))},validationSchema:y.a().shape({inceptiumid:y.c().required("InceptiumID \xe8 obbligatorio"),user:y.c().required("Nome utente/Email \xe8 obbligatorio"),password:y.c().required("Password \xe8 obbligatorio")}),children:function(e){var t=e.values,n=e.touched,a=e.errors,r=e.isSubmitting,i=e.handleChange,c=e.handleBlur,o=e.handleSubmit;return Object(p.jsx)(x.a,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",className:L.wrapper,children:Object(p.jsx)(x.a,{item:!0,xs:6,sm:3,style:{minWidth:"400px"},children:Object(p.jsx)(f.a,{children:Object(p.jsxs)(O.a,{className:L.cardcontent,children:[Object(p.jsx)(g.a,{className:L.media,image:w}),Object(p.jsxs)("form",{className:L.form,onSubmit:o,children:[Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"inceptiumid",label:"Inceptium ID",onChange:i,onBlur:c,value:t.inceptiumid,helperText:a.inceptiumid&&n.inceptiumid&&a.inceptiumid,error:a.inceptiumid&&n.inceptiumid,disabled:r}),Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"user",label:"Nome Utente/Email",autoComplete:"user",onChange:i,onBlur:c,value:t.user,helperText:a.user&&n.user&&a.user,error:a.user&&n.user,disabled:r}),Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:R?"text":"password",id:"password",autoComplete:"current-password",onChange:i,onBlur:c,value:t.password,helperText:a.password&&n.password&&a.password,error:a.password&&n.password,disabled:r,InputProps:t.password.trim().length>0?{endAdornment:Object(p.jsx)(k.a,{position:"start",children:Object(p.jsx)(T.a,{onClick:function(){return E((function(e){return!e}))},children:R?Object(p.jsx)(D.a,{}):Object(p.jsx)(A.a,{})})})}:{}}),Object(p.jsx)("div",{className:L.submit,children:Object(p.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:r,isLoading:r,children:"Login"})}),Object(p.jsx)("div",{children:Object(p.jsx)("a",{target:"_blank",href:window.location.origin+"/inapi/invite/userrequest.html?inceptiumid="+localStorage.getItem("inceptiumid"),children:"Password Dimenticata ?"})})]})]})})})})}})})},L=n(104),B=n(647),F=Object(a.createContext)(),z=Object(B.a)(F.Consumer),_=F.Provider,U=n(239),W=n(363),M=n(692),G=n(9),V=n(1091),H=n(471),Q=n(380),J=n.n(Q),K=n(19),X=n(35),Y=n(242),Z=n.n(Y),$=n(487),ee=n(470),te=n(648),ne=n.n(te),ae=n(294),re=n(649),ie=n.n(re),ce=n(1090),oe=n(567),se=n(241),le=n.n(se),de=n(417);function ue(){var e="user-menu",t=r.a.useState(null),n=Object(m.a)(t,2),a=n[0],i=n[1],c=Boolean(a),o=r.a.useContext(S.b).logout,s=function(){i(null)},d=Object(v.a)((function(e){return{grow:{flexGrow:1},title:Object(G.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(G.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(G.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),paper:{width:e.spacing(30)}}}))(),u=Object(p.jsxs)(ae.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:e,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:s,PaperProps:{className:d.paper},children:[Object(p.jsx)(ee.a,{disabled:!0,children:Object(p.jsx)(S.a,{children:function(e){var t=e.sessionData,n=t.user,a=t.inceptiumid;return Object(p.jsxs)(X.a,{children:[a," - ",n]})}})}),Object(p.jsx)(de.a,{}),Object(p.jsx)(z,{I:"manage",a:"User",children:function(){return Object(p.jsxs)(ee.a,{component:l.b,to:"/user/list",onClick:s,children:[Object(p.jsx)(ce.a,{children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(X.a,{variant:"inherit",children:"Gestione utenti"})]})}}),Object(p.jsxs)(ee.a,{onClick:function(){s(),o()},children:[Object(p.jsx)(ce.a,{children:Object(p.jsx)(ie.a,{})}),Object(p.jsx)(X.a,{variant:"inherit",children:"Logout"})]})]});return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:d.grow}),Object(p.jsx)("div",{className:d.sectionDesktop,children:Object(p.jsx)(oe.a,{title:"Menu utente",enterDelay:200,children:Object(p.jsx)(T.a,{edge:"end","aria-label":"user menu","aria-controls":e,"aria-haspopup":"true",onClick:function(e){return i(e.currentTarget)},color:"inherit",children:Object(p.jsx)(le.a,{})})})}),u]})}var pe=n(568),be=Object(v.a)({root:{flexGrow:1}});function je(){var e=be();return Object(a.useContext)(U.a).isLoading&&Object(p.jsx)("div",{className:e.root,children:Object(p.jsx)(pe.a,{color:"secondary"})})}function me(e){var t=e.children,n=e.title,a=r.a.useContext(L.a).toggle,i=Object(v.a)((function(e){return{toolbar:{paddingRight:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(4)},menuButtonHidden:{display:"none"},grow:{flexGrow:1},search:Object(G.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(K.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(K.a)(e.palette.common.white,.25)},"&:focus":{backgroundColor:e.palette.common.white},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(5),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(G.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:200,"&:focus":{width:320}}),appBarSpacer:e.mixins.toolbar}}))();return Object(p.jsxs)(V.a,{elevation:0,position:"absolute",className:i.appBar,children:[Object(p.jsxs)(H.a,{className:i.toolbar,children:[Object(p.jsx)(T.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:a,className:i.menuButton,children:Object(p.jsx)(J.a,{})}),Object(p.jsx)(X.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,children:n}),Object(p.jsx)("div",{className:i.grow}),t,Object(p.jsxs)("div",{className:i.search,children:[Object(p.jsx)("div",{className:i.searchIcon,children:Object(p.jsx)(Z.a,{})}),Object(p.jsx)($.a,{placeholder:"Cerca\u2026",classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"}})]}),Object(p.jsx)(ue,{})]}),Object(p.jsx)(je,{})]})}var he=n(130),fe=n(651),Oe=n.n(fe),ge=n(1041),xe=n(1042),ve=n(569),qe=n(652),ye=n.n(qe),Ce=n(217);var we=function(e){var t=e.children,n=r.a.useContext(L.a),a=n.isOpen,i=n.favoriteInceptiumMaps,c=n.emptyInceptiumAppsFavorites,o=Object(v.a)((function(e){return{drawerOpen:{width:240,flexShrink:0},drawerClose:{width:e.spacing(7),flexShrink:0},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,flexShrink:0,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(G.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(7)}),toolbar:e.mixins.toolbar}}))();return Object(p.jsxs)(he.a,{variant:"permanent",className:a?o.drawerOpen:o.drawerClose,classes:{paper:a?o.drawerPaper:o.drawerPaperClose},open:a,children:[Object(p.jsx)("div",{className:o.toolbar}),Object(p.jsx)(de.a,{}),Object(p.jsxs)(ge.a,{children:[Object(p.jsxs)(xe.a,{button:!0,component:l.b,to:"/dashboard",divider:!0,children:[Object(p.jsx)(ce.a,{children:Object(p.jsx)(Oe.a,{})}),Object(p.jsx)(ve.a,{disableTypography:!0,primary:Object(p.jsx)(X.a,{type:"body2",style:{fontWeight:"600"},children:"Dashboard"})})]},"dashboard"),i.map((function(e){return Object(p.jsx)(oe.a,{title:e.title,children:Object(p.jsxs)(xe.a,{button:!0,component:l.b,to:"/app/".concat(e.id),divider:!0,children:[Object(p.jsx)(ce.a,{children:Object(p.jsx)("img",{alt:"",src:e.image,style:{height:"30px",width:"30px",objectFit:"fill"}})}),Object(p.jsx)(ve.a,{disableTypography:!0,primary:Object(p.jsx)(X.a,{type:"body2",style:{fontWeight:"600"},children:Object(Ce.b)(e.title,15)})})]},e.id)},e.id)})),0!==i.length&&Object(p.jsx)(oe.a,{title:"Svuota",children:Object(p.jsxs)(xe.a,{button:!0,divider:!0,onClick:c,children:[Object(p.jsx)(ce.a,{children:Object(p.jsx)(ye.a,{})}),Object(p.jsx)(ve.a,{disableTypography:!0,primary:Object(p.jsx)(X.a,{type:"body2",style:{fontWeight:"bold",color:"red"},children:"Svuota Preferiti"})})]},"delete")})]}),t]})},Se=n(1092),Ne=n(1093),Pe=Object(v.a)((function(e){return{media:{width:180,height:180,margin:"auto"},badge:{margin:e.spacing(2),width:"100%"},card:{padding:e.spacing(1)}}}));function ke(e){var t=e.title,n=e.description,r=e.image,i=e.id,c=e.notifications,o=e.appVersion,s=Pe(),d=Object(a.useContext)(L.a).handleNewFavoriteInceptiumMap;return Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,lg:4,children:Object(p.jsx)(f.a,{children:Object(p.jsxs)(Se.a,{component:l.b,to:"/app/".concat(i),className:s.card,onClick:function(){d({title:t,image:r,id:i})},children:[Object(p.jsx)(g.a,{className:s.media,image:r,children:Object(p.jsx)(Ne.a,{className:s.badge,badgeContent:c,color:"error",overlap:"rectangular"})}),Object(p.jsxs)(O.a,{children:[Object(p.jsx)(X.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t}),Object(p.jsx)(X.a,{variant:"body2",color:"textSecondary",component:"p",children:o}),Object(p.jsx)(X.a,{variant:"body2",color:"textSecondary",component:"p",children:n})]})]})})})}var Te=n.p+"static/media/app_icon.82a94199.png",Ie=n(179),Ae=n.n(Ie),Re=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},appSeparator:{minHeight:e.spacing(10)}}}));function De(){var e=Re(),t=Object(N.a)().getApps,n=Object(a.useState)([]),r=Object(m.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){t().then((function(e){console.log(e),c(e)})).catch(console.error)}),[]),Object(p.jsxs)("div",{className:e.root,children:[Object(p.jsx)(me,{title:"Dashboard"}),Object(p.jsx)(we,{}),Object(p.jsxs)("main",{className:e.content,children:[Object(p.jsx)("div",{className:e.appBarSpacer}),Object(p.jsx)("div",{className:e.appSeparator}),Object(p.jsx)(M.a,{maxWidth:"lg",className:e.container,children:Object(p.jsx)(x.a,{container:!0,spacing:3,children:null===i||void 0===i?void 0:i.map((function(e){return Object(p.jsx)(ke,{id:e.class_path_name,title:e.app_name,appVersion:e.fullAppVersion,description:"".concat(e.developer," - ").concat(e.contact_mail),image:e.iconPath,notifications:e.numberOfNotification},e.class_path_name)}))})})]})]})}var Ee=n(10),Le=n(20),Be=n(653),Fe=n.n(Be),ze=n(654),_e=n.n(ze),Ue=n(4),We=n(187),Me=n.n(We),Ge=["children"];function Ve(e){var t=e.children,n=Object(Ue.a)(e,Ge);return Object(p.jsx)(Me.a,Object(j.a)(Object(j.a)({localization:{pagination:{labelDisplayedRows:"{from}-{to} di {count}",labelRowsSelect:"righe",firstAriaLabel:"Prima pagina",firstTooltip:"Prima pagina",previousAriaLabel:"Pagina precedente",previousTooltip:"Pagina precedente",nextAriaLabel:"Pagina successiva",nextTooltip:"Pagina successiva",lastAriaLabel:"Ultima pagina",lastTooltip:"Ultima pagina"},toolbar:{nRowsSelected:"{0} righe selezionate",searchTooltip:"Cerca",searchPlaceholder:"Cerca"},header:{actions:"Azioni"},body:{emptyDataSourceMessage:"Nessun dato da visualizzare",filterRow:{filterTooltip:"Filtra"},editRow:{deleteText:"Sei sicuro di cancellare questo record?",cancelTooltip:"Annulla",saveTooltip:"Salva"},addTooltip:"Aggiungi record",editTooltip:"Modifica record",deleteTooltip:"Elimina record"}},options:{actionsColumnIndex:-1}},n),{},{header:!1,toolbar:!1,children:t}))}var He=n(193),Qe=n(1098),Je=n(1097),Ke=n(1105),Xe=n(1106),Ye=n(1096),Ze=["isOpen","handleClose","children"],$e=function(e){var t=e.isOpen,n=e.handleClose,a=e.children,r=Object(Ue.a)(e,Ze);return Object(p.jsx)(Ye.a,Object(j.a)(Object(j.a)({open:t,onClose:n,fullWidth:!0,maxWidth:r.maxWidth||"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r),{},{children:a}))};$e.defaultProps={fullWidth:!1,maxWidth:"md"};var et=$e,tt=function(e){var t=e.isOpen,n=e.title,a=e.description,r=e.handlePrimaryClose,i=e.handleSecondaryClose,c=e.primaryButtonText,o=e.primaryButtonDisabled,s=e.secondaryButtonText,l=e.secondaryButtonDisabled,d=e.handleClose,u=e.fullWidth,b=e.maxWidth,j=e.children;return Object(p.jsxs)(et,{isOpen:t,fullWidth:u,maxWidth:b,handleClose:d,children:[Object(p.jsx)(Xe.a,{id:"alert-dialog-title",children:n}),Object(p.jsxs)(Je.a,{children:[Object(p.jsx)(Ke.a,{id:"alert-dialog-description",children:a}),j]}),Object(p.jsxs)(Qe.a,{children:[Object(p.jsx)(He.a,{onClick:r,color:"primary",disabled:o,children:c}),Object(p.jsx)(He.a,{onClick:i,color:"primary",autoFocus:!0,disabled:l,children:s})]})]})};tt.defaultProps={fullWidth:!1,maxWidth:"md",primaryButtonText:"No",secondaryButtonText:"Si"};var nt=tt,at=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240}}}));function rt(e){var t=at(),n=Object(N.a)(),r=n.getUsers,i=n.deleteUser,c=n.isLoading,o=Object(a.useState)(),s=Object(m.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(m.a)(u,2),j=b[0],h=b[1],f=Object(P.a)(),O=Object(a.useState)({id:"",username:""}),g=Object(m.a)(O,2),v=g[0],q=g[1],y=function(){r().then((function(e){return d(e)}))};Object(a.useEffect)(y,[]);var C=function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(t){return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t).then((function(){f("Utente cancellato"),y()})).catch((function(e){return f("Impossibile cancellare l'utente ".concat(t," ").concat(e.message),"error")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:t.root,children:[Object(p.jsx)(me,{title:"Gestione utenti"}),Object(p.jsx)(we,{}),Object(p.jsxs)("main",{className:t.content,children:[Object(p.jsx)("div",{className:t.appBarSpacer}),Object(p.jsx)(M.a,{maxWidth:"lg",className:t.container,children:Object(p.jsx)(x.a,{container:!0,spacing:3,children:Object(p.jsxs)(x.a,{item:!0,xs:12,children:[Object(p.jsx)(Ve,{isLoading:c,title:"Lista utenti",columns:[{title:"Utente",field:"username"},{title:"Nome e cognome",field:"fullName"},{title:"E-mail",field:"email"},{title:"Tipologia",field:"type"},{title:"Descrizione",field:"description"},{title:"Stato",field:"isOnline",render:function(e){return Object(p.jsx)("div",{children:e.isOnline?Object(p.jsx)(oe.a,{title:"Connesso",children:Object(p.jsx)(Fe.a,{})}):Object(p.jsx)(oe.a,{title:"Disconnesso",children:Object(p.jsx)(_e.a,{})})})}}],data:l,actions:[{icon:"add",tooltip:"Aggiungi utente",isFreeAction:!0,onClick:function(){return e.history.push("/user/add")}},{icon:"edit",tooltip:"Modifica",onClick:function(t,n){var a=n.username;return e.history.push("/user/".concat(a,"/edit"))}},function(t){if("admin"!==t.username)return{icon:"list",tooltip:"Gestione permessi",onClick:function(t,n){var a=n.username;return e.history.push("/user/".concat(a,"/manage-permissions"))}}},function(e){if("admin"!==e.username)return{icon:"delete",tooltip:"Elimina",onClick:function(e,t){var n=t.id,a=t.username;h(!0),q({id:n,username:a})}}}]}),Object(p.jsx)(nt,{isOpen:j,handlePrimaryClose:function(){return h(!1)},handleSecondaryClose:function(){h(!1),C(v.id)},handleClose:function(){return h(!1)},title:"Attenzione",description:"Sei sicuro di voler eliminare l'utente ".concat(v.username,"?")})]})})})]})]})}var it=n(405),ct=n(374),ot=n(375),st=n(379),lt=["confirmPassword"],dt=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},form:{marginTop:e.spacing(1),padding:e.spacing(2)},formControl:{marginTop:e.spacing(2),marginBottom:e.spacing(1)},submitContainer:{display:"flex",justifyContent:"flex-end"}}}));function ut(e){var t=e.match.params.username,n=Object(P.a)(),i=dt(),c=Object(d.g)(),o=Object(N.a)(),s=o.addUser,l=o.getUser,u=o.updateUser,b=o.isLoading,g=r.a.useRef(null),v=r.a.useState(0),w=Object(m.a)(v,2),S=w[0],k=w[1];r.a.useEffect((function(){g.current&&k(g.current.offsetWidth)}),[b]);var T=Object(a.useState)({username:"",name:"",surname:"",password:"",confirmPassword:"",email:"",type:"",description:""}),I=Object(m.a)(T,2),A=I[0],R=I[1];Object(a.useEffect)((function(){t&&l(t).then((function(e){R(Object(j.a)(Object(j.a)({},e),{},{confirmPassword:e.password}))}))}),[t]);var D=function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(a,r){var i,o,l,d;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.setErrors,o=r.setSubmitting,a.confirmPassword,l=Object(Ue.a)(a,lt),e.prev=2,!t){e.next=13;break}if(d={username:t},Object.keys(A).forEach((function(e){l[e]!==A[e]&&(d[e]=l[e])})),delete d.confirmPassword,!d){e.next=11;break}return e.next=10,u(d);case 10:n("Utente aggiornato","success");case 11:e.next=16;break;case 13:return e.next=15,s(l);case 15:n("Utente aggiunto","success");case 16:c.push("/user/list"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(2),i(e.t0.error||e.t0.message),n(e.t0.message,"error"),o(!1);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:i.root,children:[Object(p.jsx)(me,{title:"Gestione utenti"}),Object(p.jsx)(we,{}),Object(p.jsxs)("main",{className:i.content,children:[Object(p.jsx)("div",{className:i.appBarSpacer}),Object(p.jsx)(M.a,{maxWidth:"lg",className:i.container,children:Object(p.jsx)(f.a,{children:Object(p.jsxs)(O.a,{className:i.cardcontent,children:[Object(p.jsxs)(X.a,{variant:"h6",gutterBottom:!0,children:[t?"Modifica":"Aggiungi"," utente"]}),Object(p.jsx)(q.b,{enableReinitialize:!0,initialValues:A,onSubmit:D,validationSchema:y.a().shape({username:y.c().required("Il nome utente \xe8 obbligatorio"),email:y.c().email("Inserire un indirizzo email valido"),password:y.c().required("Il campo password non pu\xf2 essere vuoto"),type:y.c().required("Specificare la tipologia di account"),confirmPassword:y.c().oneOf([y.b("password"),null],"Le password non coincidono").required("Il campo password non pu\xf2 essere vuoto")}),children:function(e){var t=e.values,n=e.touched,a=e.errors,r=e.isSubmitting,c=e.handleChange,o=e.handleBlur,s=e.handleSubmit;return Object(p.jsx)("form",{className:i.form,onSubmit:s,children:Object(p.jsxs)(x.a,{container:!0,spacing:3,children:[Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Nome utente",onChange:c,onBlur:o,inputProps:{form:{autocomplete:"off"}},value:t.username,helperText:a.username&&n.username&&a.username,error:a.username&&n.username,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsxs)(ct.a,{variant:"outlined",className:i.formControl,fullWidth:!0,children:[Object(p.jsx)(ot.a,{ref:g,htmlFor:"outlined-age-native-simple",children:"Tipologia account"}),Object(p.jsxs)(it.a,{native:!0,value:t.type,onChange:c,labelWidth:S,inputProps:{id:"type"},error:a.type&&n.type,disabled:r||b||"admin"===t.username,children:[Object(p.jsx)("option",{value:""}),Object(p.jsx)("option",{value:"admins",children:"Amministratore"}),Object(p.jsx)("option",{value:"users",children:"Utente"})]}),Object(p.jsx)(st.a,{error:!0,children:a.type&&n.type&&a.type})]})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"name",label:"Nome",onChange:c,onBlur:o,value:t.name,helperText:a.name&&n.name&&a.name,error:a.name&&n.name,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"surname",label:"Cognome",onChange:c,onBlur:o,value:t.surname,helperText:a.surname&&n.surname&&a.surname,error:a.surname&&n.surname,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:"password",id:"password",onChange:c,onBlur:o,value:t.password,helperText:a.password&&n.password&&a.password,error:a.password&&n.password,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Conferma Password",type:"password",id:"confirmPassword",onChange:c,onBlur:o,value:t.confirmPassword,helperText:a.confirmPassword&&n.confirmPassword&&a.confirmPassword,error:a.confirmPassword&&n.confirmPassword,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email",onChange:c,onBlur:o,inputProps:{form:{autocomplete:"off"}},value:t.email,helperText:a.email&&n.email&&a.email,error:a.email&&n.email,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"description",label:"Description",onChange:c,onBlur:o,value:t.description,helperText:a.description&&n.description&&a.description,error:a.description&&n.description,disabled:r||b})}),Object(p.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(p.jsx)("div",{className:i.submitContainer,children:Object(p.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:r||b,isLoading:r,children:"Salva"})})})]})})}})]})})})]})]})}var pt=n(15),bt=n(47),jt=n(387),mt=n(51),ht=Object(v.a)((function(e){return{badge:{marginLeft:e.spacing(1),marginRight:e.spacing(2)},badge_children:{marginLeft:e.spacing(2),marginRight:e.spacing(1)}}}));function ft(e){var t=e.id,n=e.label,i=e.items,c=e.notification,o=ht(),s=r.a.useState(null),l=Object(m.a)(s,2),d=l[0],u=l[1],b=Object(a.useContext)(mt.a).dispatch,j=Boolean(d),h=function(){u(null)},f=Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ae.a,{anchorEl:d,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:t,keepMounted:!0,open:j,onClose:h,children:function e(t){var n=[];if(Array.isArray(t)){var a,i=Object(bt.a)(t);try{for(i.s();!(a=i.n()).done;){var c=a.value;n.push(e(c))}}catch(l){i.e(l)}finally{i.f()}return n}if(Array.isArray(t.children)&&t.children.length>0){var s=e(t.children);n.push(r.a.createElement(jt.a,{label:Object(p.jsxs)(p.Fragment,{children:[t.menuName,t.numberOfNotification>0&&Object(p.jsx)(Ne.a,{overlap:"rectangular",className:o.badge_children,badgeContent:t.numberOfNotification,color:"error"})]}),parentMenuOpen:!!d},s))}else n.push(Object(p.jsxs)(ee.a,{disabled:!t.actionEvent,onClick:function(){b(t.actionEvent),h()},children:[t.icon?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(X.a,{variant:"inherit",children:t.menuName})}):t.menuName,t.numberOfNotification>0&&Object(p.jsx)(Ne.a,{overlap:"rectangular",className:o.badge_children,badgeContent:t.numberOfNotification,color:"error"})]},t.id_menu));return n}(i)})});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(He.a,{color:"inherit",onClick:function(e){return u(e.currentTarget)},children:n}),f,c>0&&Object(p.jsx)(Ne.a,{className:o.badge,badgeContent:c,color:"error",overlap:"rectangular"})]})}var Ot=n(684),gt=function(e){switch(null===e||void 0===e?void 0:e.toLowerCase()){case"left":case"start":case"top":return"flex-start";case"bottom":case"end":case"right":return"flex-end";case"stretch":return"stretch";default:return"center"}},xt=function(e){var t=e.componentDirection,n=e.componentAlign,a=e.spacing,i=e.children;return Object(p.jsx)("div",{className:"INVerticalGridContainer",style:{display:"flex",flexDirection:"column",width:"100%",justifyContent:t,alignContent:n},children:r.a.Children.toArray(i).map((function(e,t){var n,r=(n=e.props)?Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},n.width&&{width:n.width}),n.height&&{height:n.height}),n.padding_Bottom&&{paddingBottom:n.padding_Bottom}),n.padding_Top&&{paddingTop:n.padding_Top}),n.padding_Left&&{paddingLeft:n.padding_Left}),n.padding_Right&&{paddingRight:n.padding_Right}),n.grow&&{flexGrow:n.grow}),n.componentAlign&&{alignSelf:gt(n.componentAlign)}):{};return Object(p.jsx)("div",{className:"INVerticalGridItem",style:Object(j.a)({display:"flex",paddingTop:a,paddingBottom:a},r),children:e},t)}))})};xt.defaultProps={componentDirection:"center",componentAlign:"center",spacing:16};var vt=xt,qt=n(232),yt=n(124),Ct=["children"],wt=r.a.createContext();wt.Consumer;function St(e){var t=e.children,n=Object(Ue.a)(e,Ct);return Object(p.jsx)(wt.Provider,{value:Object(j.a)({},n),children:t})}var Nt=function(e){var t=e.text;return Object(p.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})},Pt=n(475),kt=n(402),Tt=["aliasName","fieldName","label"],It=function(e){var t=e.aliasName,n=e.fieldName,a=e.label,r=Object(Ue.a)(e,Tt),i=Object(q.d)({name:n||t}),c=Object(m.a)(i,1)[0],o=Object(q.e)().isSubmitting;return Object(p.jsx)(Pt.a,{control:Object(p.jsx)(kt.a,Object(j.a)(Object(j.a)({},c),{},{checked:!!c.value,disabled:r.disabled||o})),label:a})},At=n(656),Rt=n(253),Dt=["children"],Et=r.a.createContext();Et.Consumer;function Lt(e){var t=e.children,n=Object(Ue.a)(e,Dt);return Object(p.jsx)(Et.Provider,{value:Object(j.a)({},n),children:t})}var Bt=n(246),Ft=n(128),zt=n(126),_t=function(e){var t={};return Object.keys(e).forEach((function(n){var a;t[(a=n,a.replace("!","."))]=e[n]})),t},Ut=Object(v.a)((function(e){return{form:{display:"flex",flexGrow:1,padding:e.spacing(3)}}})),Wt=function e(t){var n,a=[],i=r.a.Children.toArray(t),c=Object(bt.a)(i);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(o.props.children)a.push.apply(a,Object(pt.a)(e(o.props.children)));else if(o.props.fieldName){var s;a.push({aliasName:o.props.aliasName,fieldName:o.props.fieldName,required:o.props.required,type:null===(s=o.props.boxType)||void 0===s?void 0:s.toLowerCase()})}}}catch(l){c.e(l)}finally{c.f()}return a};function Mt(e){var t,n={},a=r.a.Children.toArray(e),i=Object(bt.a)(a);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(c.props.children)n=Object(j.a)(Object(j.a)({},n),Mt(c.props.children));else if(c.props.fieldName){var o=c.props.fieldName.replace(".","!"),s=c.props.value;n[o]=s}}}catch(l){i.e(l)}finally{i.f()}return n}var Gt=function e(t){var n,a=[],i=r.a.Children.toArray(t),c=Object(bt.a)(i);try{for(c.s();!(n=c.n()).done;){var o=n.value;o.props.children?a.push.apply(a,Object(pt.a)(e(o.props.children))):o.props.componentType&&a.push({componentType:o.props.componentType})}}catch(s){c.e(s)}finally{c.f()}return a},Vt=function(e){var t=e.dataSource,n=e.aliasName,i=e.listFieldToUpdate,c=e.refINPanelAlias,o=e.children,s=e.actionEvent,l=t||{},d=l.dataSourceClassName,u=l.dataSourceClassNameForUpdate,b=l.fieldNamePrimaryKey,h=l.fieldNameIDDependedClass,f=Ut(),O=Object(a.useState)(!1),g=Object(m.a)(O,2),v=g[0],C=g[1],w=Object(a.useState)(void 0),S=Object(m.a)(w,2),k=S[0],T=S[1],I=Object(a.useState)(Wt(o)),A=Object(m.a)(I,2),R=A[0],D=A[1],E=Object(a.useState)(),L=Object(m.a)(E,2),B=L[0],F=L[1],z=Object(a.useState)({}),_=Object(m.a)(z,2),U=_[0],W=_[1],M=Object(a.useContext)(mt.a),V=M.dispatch,H=M.componentData,Q=M.setData,J=Object(N.a)(!1),K=J.getRecord,X=J.updateRecord,Y=J.get,Z=Object(a.useRef)(),$=Object(P.a)(),ee=Object(a.useState)(Object(p.jsx)(x.a,{container:!0,alignItems:"center",justifyContent:"center",style:{flexGrow:1},children:Object(p.jsx)(x.a,{item:!0,children:Object(p.jsx)(Rt.a,{})})})),te=Object(m.a)(ee,2),ne=te[0],ae=te[1],re=H[n],ie=Object(a.useContext)(Bt.a),ce=Object(a.useCallback)(Ae.a.debounce((function(e){var t,n={},a=Object(bt.a)(R);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.aliasName]=e[r.fieldName]}}catch(i){a.e(i)}finally{a.f()}Q(null,null,Object(j.a)({},n))}),500),[]),oe=Object(a.useCallback)(function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(t,a){var r,o,s,l,p,b,m,h,f,O,g,x,v,q,y,C,w,S,N,P,T,I,A,R,D,E,L,B,F;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("INDBForm handling action",a),h=null,e.t0=a.actionType,e.next="UPDATE_FIELD"===e.t0?5:"UPDATE_DB"===e.t0?19:"UPDATE_FORM_VALUES"===e.t0?33:"CANCEL_OPERATION"===e.t0?40:46;break;case 5:return e.next=7,null===(r=Z.current)||void 0===r?void 0:r.submitForm();case 7:return e.next=9,null===(o=Z.current)||void 0===o?void 0:o.validateForm();case 9:if(h=e.sent,!(Object.keys(h).length>0)){e.next=12;break}return e.abrupt("return");case 12:f=Z.current.values,O=_t(f),g=Object(j.a)({},U),x=Object(bt.a)(i);try{for(x.s();!(v=x.n()).done;)q=v.value,y=void 0,y=O[q]instanceof Date?O[q].getTime():O[q],g[q]=y}catch(z){x.e(z)}finally{x.f()}return X(u||d,g).then((function(){$("Record aggiornato con successo","success"),"undefined"!==typeof ie?(ie.showPanel(c),Q(n,null)):console.log("Cannot redirect to list since no INSSTab found")})).catch((function(e){var t;$((null===(t=e.action)||void 0===t?void 0:t.messageToShow)||e.message,"error")})).finally((function(){var e;return null===(e=Z.current)||void 0===e?void 0:e.setSubmitting(!1)})),e.abrupt("break",47);case 19:return e.next=21,null===(s=Z.current)||void 0===s?void 0:s.submitForm();case 21:return e.next=23,null===(l=Z.current)||void 0===l?void 0:l.validateForm();case 23:if(h=e.sent,!(Object.keys(h).length>0)){e.next=26;break}return e.abrupt("return");case 26:C=Z.current.values,w=_t(C),S=Object(j.a)({},U),N=Object(bt.a)(i);try{for(N.s();!(P=N.n()).done;)T=P.value,I=void 0,I=w[T]instanceof Date?w[T].getTime():w[T],S[T]=I}catch(z){N.e(z)}finally{N.f()}return X(u||d,S).then((function(){$("Record aggiornato con successo","success"),"undefined"!==typeof ie?(ie.showPanel(c),Q(n,null)):console.log("Cannot redirect to list since no INSSTab found")})).catch((function(e){var t;$((null===(t=e.action)||void 0===t?void 0:t.messageToShow)||e.message,"error")})).finally((function(){var e;return null===(e=Z.current)||void 0===e?void 0:e.setSubmitting(!1)})),e.abrupt("break",47);case 33:null===(p=Z.current)||void 0===p||p.setSubmitting(!0),A=Z.current.values,R=Object(j.a)({},U),D=Object(bt.a)(i);try{for(D.s();!(E=D.n()).done;)L=E.value,R[L]=A[L]}catch(z){D.e(z)}finally{D.f()}return X(u||d,R,!1).then((function(e){for(var t=0,n=Object.keys(A);t<n.length;t++){var a,r=n[t];null===(a=Z.current)||void 0===a||a.setFieldValue(r,e[r])}console.log("Form values updated",e)})).catch((function(e){var t;return $((null===(t=e.action)||void 0===t?void 0:t.messageToShow)||e.message||"Impossibile ricalcolare i valori del record","error")})).finally((function(){var e;return null===(e=Z.current)||void 0===e?void 0:e.setSubmitting(!1)})),e.abrupt("break",47);case 40:for(F in B=Object(j.a)({},k))B[F]="";return null===(b=Z.current)||void 0===b||b.setValues(B),Q(null,null,(m={},Object(G.a)(m,c,null),Object(G.a)(m,n,null),m)),"undefined"!==typeof ie?(ie.showPanel(c),Q(n,null)):console.log("Cannot redirect to list since no INSSTab found"),e.abrupt("break",47);case 46:V(a);case 47:return e.abrupt("return",t);case 48:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[k,Z]),se=Object(a.useReducer)(oe,{data:null}),le=Object(m.a)(se,2),de=(le[0],le[1]);Object(a.useEffect)((function(){var e=re;return d&&re||(console.warn("Not fetching data for non-data form"),e="01"),s&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INDBList",n=Gt(e),a=0;a<n.length;a++)if(n[a].componentType&&n[a].componentType===t)return!0;return!1}(o,"INDBList")?C(!0):e&&(C(!1),K(d,re).then((function(e){var t,n={},a=Object(j.a)(Object(j.a)({},Mt(o)),e),r=Object(bt.a)(R);try{for(r.s();!(t=r.n()).done;){var i=t.value;["date","datetime","time"].includes(i.type)?n[i.fieldName]=Object(Ft.a)(a[i.fieldName],H)||null:n[i.fieldName]=Object(Ft.a)(a[i.fieldName],H)||""}}catch(c){r.e(c)}finally{r.f()}W(Object(j.a)(Object(j.a)({},b&&a[b]?Object(G.a)({},b,a[b]):{}),h&&a[h]?Object(G.a)({},h,a[h]):{})),T(n)})).catch((function(e){return console.error("Failed to fetch INDBform data",e)})).finally((function(){return C(!0)}))),function(){T(void 0)}}),[]),Object(a.useEffect)((function(){var e,t=Wt(o),n={},a={},r=Object(bt.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;["date","datetime","time"].includes(i.type)?n[i.fieldName]=null:n[i.fieldName]="",i.required&&(a[i.fieldName]=y.c().required("Campo obbligatorio"))}}catch(c){r.e(c)}finally{r.f()}return F(y.a().shape(a)),T(n),D(t),function(){console.log("CLEANUP VALUES INDBFORM"),T(void 0)}}),[o]);var ue=!!s;return Object(a.useEffect)((function(){if(s){var e=s.urlToCall,t=Object(j.a)(Object(j.a)({},s),{},{parentIsAlreadyRendered:!0});Y(e,{id:re}).then((function(e){var n=e;t.jsonToHandle=n,de(t),ae(t.generatedLayout)}))}}),[]),Object(p.jsx)(p.Fragment,{children:v?ue?Object(p.jsx)(r.a.Fragment,{children:ne}):Object(p.jsx)(q.b,{initialValues:k,innerRef:Z,validationSchema:B,enableReinitialize:!0,onSubmit:function(){},children:function(e){var t,n=e.values,a=Object(bt.a)(R);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(H[r.aliasName]!==n[r.fieldName]){ce(n);break}}}catch(i){a.e(i)}finally{a.f()}return Object(p.jsx)("form",{noValidate:!0,autoComplete:"off",className:f.form,children:Object(p.jsx)(Lt,{dispatch:de,children:o})})}}):Object(p.jsx)(x.a,{container:!0,alignItems:"center",justifyContent:"center",style:{flexGrow:1},children:Object(p.jsx)(x.a,{item:!0,children:Object(p.jsx)(Rt.a,{})})})})},Ht=r.a.memo(Vt),Qt=n(660),Jt=n(292),Kt=n(1099),Xt=n(1119),Yt=n(1115),Zt=n(683),$t=n(666),en=n.n($t),tn=n(631),nn=n(570),an=n(661),rn=n.n(an),cn=Object(v.a)((function(e){return{searchField:{minWidth:150,paddingLeft:e.spacing(2)}}})),on=function(e){var t=e.currentQuery,n=e.searchData,r=Object(a.useState)(t||""),i=Object(m.a)(r,2),c=i[0],o=i[1],s=cn();return Object(p.jsx)(h.a,{className:s.searchField,value:c,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){var t,a=null===(t=e.target)||void 0===t?void 0:t.value;13===e.keyCode&&n(a)},placeholder:"Cerca",InputProps:{startAdornment:Object(p.jsx)(k.a,{position:"start",children:Object(p.jsx)(Z.a,{color:"inherit",fontSize:"small"})}),endAdornment:Object(p.jsx)(k.a,{position:"end",children:Object(p.jsx)(T.a,{disabled:!c,onClick:function(){return n("")},children:Object(p.jsx)(rn.a,{color:"inherit",fontSize:"small"})})})}})},sn=n(667),ln=n.n(sn),dn=n(668),un=n.n(dn),pn=n(662);function bn(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}function jn(e){for(var t=0,n=e.length-1;n>=0;n--)t+=+e[n]*Math.pow(2,e.length-1-n);return t}var mn=function(e,t,n){var a="#";return a+=bn(e),a+=bn(t),a+=bn(n)},hn=function(e){var t=function(e){var t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7);return t=parseInt(t,16),n=parseInt(n,16),a=parseInt(a,16),[t=t.toString(2),n=n.toString(2),a=a.toString(2)]}(e),n=Object(m.a)(t,3),a=n[0],r=n[1],i=n[2];return[jn(a),jn(r),jn(i)]};var fn=function(e,t){var n=hn(e),a=Object(m.a)(n,3),r=a[0],i=a[1],c=a[2];return mn(r-=15*t,i-=15*t,c-=15*t)},On=n(488),gn=Object(v.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},progress:{textAlign:"center"}}}));function xn(e){var t=e.open,n=e.message,a=gn();return Object(p.jsx)("div",{children:Object(p.jsx)(On.a,{className:a.backdrop,open:t,children:Object(p.jsxs)(x.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(x.a,{item:!0,xs:12,className:a.progress,children:Object(p.jsx)(Rt.a,{color:"inherit"})}),n&&Object(p.jsx)(x.a,{item:!0,xs:12,children:Object(p.jsx)(X.a,{children:n})})]})})})}var vn=Object(v.a)((function(e){return{form:{width:"100%",padding:e.spacing(3)},header:{paddingLeft:e.spacing(3)}}})),qn=function(e){var t=e.isOpen,n=e.description,r=e.title,i=e.primaryButtonText,c=e.secondaryButtonText,o=e.handlePrimaryClose,s=e.handleClose,l=e.requestParameterList,d=e.requestParameterComponentList,u=vn(),b=Object(a.useContext)(mt.a).componentData,j={},m=l.map((function(e){switch(e.parameterType.toLowerCase()){case"boolean":return j[e.parameterName]=!1,Object(p.jsx)(It,{aliasName:e.parameterName,fieldName:e.parameterName,label:e.parameterDescription},e.parameterName);case"text":return j[e.parameterName]=Object(Ft.a)(e.parameterDefaultValue,b)||"",Object(p.jsx)(ia,{boxType:"text",aliasName:e.parameterName,fieldName:e.parameterName,id:e.parameterName,name:e.parameterName,label:e.parameterDescription},e.parameterName);default:console.warn("Unsupported type",e.parameterType)}}));if(Array.isArray(d)){var h={componentType:"INContainer",componentLayout:"VERTICAL_GRID",components:Object(pt.a)(d)},f=Ea(h);m.push(f)}return Object(p.jsx)(q.b,{initialValues:j,enableReinitialize:!0,onSubmit:function(e,t){var n=t.setSubmitting;return o(e,{setSubmitting:n})},children:function(e){var a=e.isSubmitting,o=e.submitForm;return Object(p.jsxs)(nt,{isOpen:t,title:r,description:n,primaryButtonText:i,primaryButtonDisabled:a,secondaryButtonText:c,secondaryButtonDisabled:a,handlePrimaryClose:o,handleSecondaryClose:s,handleClose:s,children:[m.length>0&&Object(p.jsx)("div",{className:u.form,children:Object(p.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(p.jsx)(vt,{children:m})})}),Object(p.jsx)(xn,{open:a})]})}})};var yn=function(e){var t=e.text,n=e.actionEvent,a=e.handleCloseActionMenu,i=r.a.useState(!1),c=Object(m.a)(i,2),o=c[0],s=c[1],l=function(e){return console.error("No dispatcher available")},d=(null===n||void 0===n?void 0:n.confirmAction)||((null===n||void 0===n?void 0:n.requestParameterList)||[]).length>0,u=function(){s(!1),a()},b=r.a.useContext(mt.a);l=b.dispatch;var j=function(e){s(!1),"function"===typeof e&&e(!1),n?(l(n),a()):console.error("No event associated with this action")};return Object(p.jsxs)(r.a.Fragment,{children:[d&&Object(p.jsx)(qn,{isOpen:o,title:"Conferma",description:n.requestMessageToShow||n.confirmDescription||"Specificare i parametri",primaryButtonText:"Procedi",secondaryButtonText:"Annulla",handlePrimaryClose:function(e,t){t.setSubmitting;n.data=e,s(n.waitForEnd),j()},handleSecondaryClose:u,handleClose:u,requestParameterList:n.requestParameterList||[]}),Object(p.jsx)(ee.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),d?s(!0):j()},children:t})]})};var Cn=function(e){var t=e.menuAnchor,n=e.actions,a=e.dispatch,i=e.setMenuAnchor,c=function(e){i(null)},o=Object(p.jsx)(ae.a,{id:"simple-menu",keepMounted:!0,anchorEl:t,open:Boolean(t),onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},getContentAnchorEl:null,children:function e(n){for(var o=[],s=0;s<n.length;s++){var l=n[s];if(Array.isArray(l.children)&&l.children.length>0){var d=e(l.children);o.push(r.a.createElement(jt.a,{label:Object(p.jsx)(p.Fragment,{children:l.menuName}),parentMenuOpen:!!t},d))}else o.push(Object(p.jsx)(yn,{handleCloseActionMenu:c,actionEvent:n[s].actionEvent,text:n[s].menuName,dispatch:a,setMenuAnchor:i},n[s].id_menu))}return o}(n)});return Object(p.jsx)(r.a.Fragment,{children:o})},wn=n(34),Sn=n(304),Nn=n(32),Pn=Object(v.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:200,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));function kn(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var Tn=function(e){var t,n,a=e.items,i=r.a.useContext(zt.b),c=i.selectedRowObject,o=i.changeInceptiumFilter,s=(i.handleSelectedRowObject,e.name),l=e.field,d=e.alias,u=Pn(),b=Object(wn.a)(),j=r.a.useState([]),h=Object(m.a)(j,2),f=h[0],O=h[1],g=null===c||void 0===c||null===(t=c[d])||void 0===t||null===(n=t[Nn.a])||void 0===n?void 0:n[l];return g||(g="NONE"),Object(p.jsxs)(ct.a,{className:u.formControl,children:[Object(p.jsx)(ot.a,{id:"demo",children:s}),Object(p.jsx)(it.a,{labelId:"inceptium Filtering",id:"inceptiumFiltering",label:"INDBList Filter",value:g,onChange:function(e){O(e.target.value),o({value:e.target.value,name:l,aliasName:d})},input:Object(p.jsx)(Sn.a,{}),children:a.map((function(e){return Object(p.jsx)(ee.a,{value:e,style:kn(e,f,b),children:e},e)}))})]})};function In(e){var t=e.comboBoxItems,n=e.alias;return Object(p.jsx)(r.a.Fragment,{children:Array.isArray(t)&&t.length>0&&t.map((function(e){return Object(p.jsx)(Tn,{items:e.parameterList,name:e.title,field:e.field,alias:n},e.title)}))})}var An=r.a.memo(In);In.defautlProps={comboBoxItems:[],setFilteringComboBoxString:function(){}};var Rn=function(e){return Object(p.jsx)("div",Object(j.a)(Object(j.a)({className:"INDBListContainer"},e),{},{style:{width:"100%",padding:"10px",overflowY:"auto"}}))},Dn=function(e){var t,n,a=e.rowData,r=e.columnDef,i=20*((null===a||void 0===a||null===(t=a.tableData)||void 0===t||null===(n=t.path)||void 0===n?void 0:n.length)-1);return Object(p.jsx)(We.MTableCell,Object(j.a)(Object(j.a)({},e),{},{style:{paddingLeft:"".concat(0!==r.tableData.id?20:i,"px")}}))},En=n(33),Ln=n(30),Bn=n(56),Fn=n(71),zn=n(1112),_n=n(1117),Un=n(1122),Wn=n(1121),Mn=n(1120),Gn=n(1111),Vn=function(e){return"default"===e.options.padding?"medium":"small"},Hn=function(e){return"medium"===Vn(e)?48:32},Qn=function(e){return e.actions.filter((function(e){return"row"===e.position||"function"===typeof e}))},Jn=["icons","data","columns","components","detailPanel","getFieldValue","isTreeData","onRowClick","onRowSelected","onTreeExpandChanged","onToggleDetailPanel","onEditingCanceled","onEditingApproved","options","hasAnyEditingRow","treeDataMaxLevel","localization","actions","errorState","cellEditable","onCellEditStarted","onCellEditFinished","scrollWidth"],Kn=function(e){Object(Bn.a)(n,e);var t=Object(Fn.a)(n);function n(){var e;Object(En.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).rotateIconStyle=function(e){return{transform:e?"rotate(90deg)":"none"}},e}return Object(Ln.a)(n,[{key:"renderColumns",value:function(){var e=this,t=Vn(this.props);return this.props.columns.filter((function(e){return!e.hidden&&!(e.tableData.groupOrder>-1)})).sort((function(e,t){return e.tableData.columnOrder-t.tableData.columnOrder})).map((function(n,a){var r=e.props.getFieldValue(e.props.data,n);return e.props.data.tableData.editCellList&&e.props.data.tableData.editCellList.find((function(e){return e.tableData.id===n.tableData.id}))?Object(p.jsx)(e.props.components.EditCell,{components:e.props.components,icons:e.props.icons,localization:e.props.localization,columnDef:n,size:t,rowData:e.props.data,cellEditable:e.props.cellEditable,onCellEditFinished:e.props.onCellEditFinished,scrollWidth:e.props.scrollWidth},"cell-"+e.props.data.tableData.id+"-"+n.tableData.id):Object(p.jsx)(e.props.components.Cell,{size:t,errorState:e.props.errorState,icons:e.props.icons,columnDef:Object(j.a)({cellStyle:e.props.options.cellStyle},n),value:r,rowData:e.props.data,cellEditable:"never"!==n.editable&&!!e.props.cellEditable,onCellEditStarted:e.props.onCellEditStarted,scrollWidth:e.props.scrollWidth},"cell-"+e.props.data.tableData.id+"-"+n.tableData.id)}))}},{key:"renderActions",value:function(){var e=Vn(this.props),t=Qn(this.props),n=t.length*Hn(this.props);return Object(p.jsx)(_n.a,{size:e,padding:"none",style:Object(j.a)({width:n,padding:"0px 5px",boxSizing:"border-box"},this.props.options.actionsCellStyle),children:Object(p.jsx)("div",{style:{display:"flex"},children:Object(p.jsx)(this.props.components.Actions,{data:this.props.data,actions:t,components:this.props.components,size:e,disabled:this.props.hasAnyEditingRow})})},"key-actions-column")}},{key:"renderSelectionColumn",value:function(){var e=this,t=this.props.options.selectionProps||{};"function"===typeof t&&(t=t(this.props.data));var n,a,r=Vn(this.props),i=(n=this.props,a=this.props.treeDataMaxLevel,Hn(n)+9*a),c="medium"===r?{marginLeft:9*this.props.level}:{padding:"4px",marginLeft:5+9*this.props.level};return Object(p.jsx)(_n.a,{size:r,padding:"none",style:{width:i},children:Object(p.jsx)(zn.a,Object(j.a)({size:r,checked:!0===this.props.data.tableData.checked,onClick:function(e){return e.stopPropagation()},value:this.props.data.tableData.id.toString(),onChange:function(t){return e.props.onRowSelected(t,e.props.path,e.props.data)},style:c},t))},"key-selection-column")}},{key:"renderDetailPanelColumn",value:function(){var e=this,t=Vn(this.props),n=function(e){var t=e.icon,n=e.iconProps;return"string"===typeof t?Object(p.jsx)(Mn.a,Object(j.a)(Object(j.a)({},n),{},{children:t})):a.createElement(t,Object(j.a)({},n))};return"function"==typeof this.props.detailPanel?Object(p.jsx)(_n.a,{size:t,padding:"none",style:Object(j.a)({width:42,textAlign:"center"},this.props.options.detailPanelColumnStyle),children:Object(p.jsx)(Wn.a,{size:t,style:Object(j.a)({transition:"all ease 200ms"},this.rotateIconStyle(this.props.data.tableData.showDetailPanel)),onClick:function(t){e.props.onToggleDetailPanel(e.props.path,e.props.detailPanel),t.stopPropagation()},children:Object(p.jsx)(this.props.icons.DetailPanel,{})})},"key-detail-panel-column"):Object(p.jsx)(_n.a,{size:t,padding:"none",children:Object(p.jsx)("div",{style:Object(j.a)({width:42*this.props.detailPanel.length,textAlign:"center",display:"flex"},this.props.options.detailPanelColumnStyle),children:this.props.detailPanel.map((function(a,r){"function"===typeof a&&(a=a(e.props.data));var i=(e.props.data.tableData.showDetailPanel||"").toString()===a.render.toString(),c=Object(p.jsx)(e.props.icons.DetailPanel,{}),o=!0;return i?a.openIcon?(c=Object(p.jsx)(n,{icon:a.openIcon,iconProps:a.iconProps}),o=!1):a.icon&&(c=Object(p.jsx)(n,{icon:a.icon,iconProps:a.iconProps})):a.icon&&(c=Object(p.jsx)(n,{icon:a.icon,iconProps:a.iconProps}),o=!1),c=Object(p.jsx)(Wn.a,{size:t,style:Object(j.a)({transition:"all ease 200ms"},e.rotateIconStyle(o&&i)),disabled:a.disabled,onClick:function(t){e.props.onToggleDetailPanel(e.props.path,a.render),t.stopPropagation()},children:c},"key-detail-panel-"+r),a.tooltip&&(c=Object(p.jsx)(Gn.a,{title:a.tooltip,children:c},"key-detail-panel-"+r)),c}))})},"key-detail-panel-column")}},{key:"renderTreeDataColumn",value:function(){var e=this,t=Vn(this.props);return this.props.data.father?Object(p.jsx)(_n.a,{size:t,padding:"none",style:{width:48+9*(this.props.treeDataMaxLevel-2)},children:Object(p.jsx)(Wn.a,{size:t,style:Object(j.a)({transition:"all ease 200ms",marginLeft:9*this.props.level},this.rotateIconStyle(this.props.data.tableData.isTreeExpanded)),onClick:function(t){e.props.data.tableData.childRows&&e.props.data.tableData.childRows.length>0&&e.props.onTreeExpandChanged(e.props.path,e.props.data)},children:Object(p.jsx)(this.props.icons.DetailPanel,{})})},"key-tree-data-column"):Object(p.jsx)(_n.a,{padding:"normal"},"key-tree-data-column")}},{key:"getStyle",value:function(e,t){var n={transition:"all ease 300ms"};return"function"===typeof this.props.options.rowStyle?n=Object(j.a)(Object(j.a)({},n),this.props.options.rowStyle(this.props.data,e,t,this.props.hasAnyEditingRow)):this.props.options.rowStyle&&(n=Object(j.a)(Object(j.a)({},n),this.props.options.rowStyle)),this.props.onRowClick&&(n.cursor="pointer"),this.props.hasAnyEditingRow&&(n.opacity=n.opacity?n.opacity:.2),n}},{key:"render",value:function(){var e=this,t=Vn(this.props),n=this.renderColumns();if(this.props.options.selection&&n.splice(0,0,this.renderSelectionColumn()),this.props.actions&&this.props.actions.filter((function(e){return"row"===e.position||"function"===typeof e})).length>0)if(-1===this.props.options.actionsColumnIndex)n.push(this.renderActions());else if(this.props.options.actionsColumnIndex>=0){var r=0;this.props.options.selection&&(r=1),n.splice(this.props.options.actionsColumnIndex+r,0,this.renderActions())}this.props.detailPanel&&("right"===this.props.options.detailPanelColumnAlignment?n.push(this.renderDetailPanelColumn()):n.splice(0,0,this.renderDetailPanelColumn())),this.props.isTreeData&&n.splice(0,0,this.renderTreeDataColumn()),this.props.columns.filter((function(e){return e.tableData.groupOrder>-1})).forEach((function(e){n.splice(0,0,Object(p.jsx)(_n.a,{size:t,padding:"none"},"key-group-cell"+e.tableData.id))}));var i=this.props,c=(i.icons,i.data,i.columns,i.components,i.detailPanel),o=(i.getFieldValue,i.isTreeData,i.onRowClick),s=(i.onRowSelected,i.onTreeExpandChanged,i.onToggleDetailPanel),l=i.onEditingCanceled,d=i.onEditingApproved,u=(i.options,i.hasAnyEditingRow),b=i.treeDataMaxLevel,m=(i.localization,i.actions,i.errorState,i.cellEditable),h=i.onCellEditStarted,f=i.onCellEditFinished,O=(i.scrollWidth,Object(Ue.a)(i,Jn));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Un.a,Object(j.a)(Object(j.a)({selected:u},O),{},{hover:!!o,style:this.getStyle(this.props.index,this.props.level),onContextMenu:function(t){t.preventDefault(),e.props.handleRightClick(),t.stopPropagation()},onClick:function(t){o&&o(t,e.props.data,(function(t){var n=c;Array.isArray(n)&&("function"===typeof(n=n[t||0])&&(n=n(e.props.data)),n=n.render),s(e.props.path,n)}))},children:n})),this.props.data.tableData&&this.props.data.tableData.showDetailPanel&&Object(p.jsx)(Un.a,{children:Object(p.jsx)(_n.a,{size:t,colSpan:n.length,padding:"none",children:this.props.data.tableData.showDetailPanel(this.props.data)})}),this.props.data.tableData.childRows&&this.props.data.tableData.isTreeExpanded&&this.props.data.tableData.childRows.map((function(t,n){return t.tableData.editing?Object(p.jsx)(e.props.components.EditRow,{columns:e.props.columns.filter((function(e){return!e.hidden})),components:e.props.components,data:t,icons:e.props.icons,localization:e.props.localization,getFieldValue:e.props.getFieldValue,mode:t.tableData.editing,options:e.props.options,isTreeData:e.props.isTreeData,detailPanel:e.props.detailPanel,onEditingCanceled:l,onEditingApproved:d,errorState:e.props.errorState},n):Object(a.createElement)(e.props.components.Row,Object(j.a)(Object(j.a)({},e.props),{},{data:t,index:n,key:n,level:e.props.level+1,path:[].concat(Object(pt.a)(e.props.path),[n]),onEditingCanceled:l,onEditingApproved:d,hasAnyEditingRow:e.props.hasAnyEditingRow,treeDataMaxLevel:b,errorState:e.props.errorState,cellEditable:m,onCellEditStarted:h,onCellEditFinished:f}))}))]})}}]),n}(a.Component);function Xn(e){var t=e.componentType,n=e.dataSource,i=e.title,c=e.search,o=e.inLineEdit,s=e.refINDBpanelAlias,l=e.viewOnly,d=e.toolbar,u=e.header,b=e.height,m=e.deleteRecord,h=e.addRecord,f=e.menu_list,O=e.comboBox_list,g=Object(a.useContext)(mt.a).dispatch,x=Object(pn.a)(e),v=x.INContextMenuHandler,q=x.handleMenuAnchor,y=x.setOpen,C=x.handleRecharge,w=x.handleRowClick,S=x.searchData,N=x.handleAddRow,P=x.handleDeleteRow,k=x.handleUpdateRow,I=x.handleDeleteRecord,A=x.handleOrderChanged,R=x.handleChangePage,D=x.addRecordHandler,E=x.editRecordHandler,L=x.handleRemoveRecord,B=x.expandINDBTreeView,F=x.handleContextMenu,z=x.menuAnchor,_=x.searchFilter,U=x.selectedRowObject,W=x.tableRef,M=x.pagination,G=x.isOpen,V=x.isLoading,H=x.adjustedColumns,Q=x.rows,J="INDBTreeView"===t,K=(n.dataSourceClassNameForUpdate,n.fieldNamePrimaryKey),Y=n.fieldNameIDDependedClass,Z=null;Array.isArray(f)&&f.length>0&&(Z=f[0].children);var $={components:{Container:Rn,Pagination:function(e){return Object(p.jsx)(tn.a,Object(j.a)(Object(j.a)({},e),{},{rowsPerPageOptions:[M.rowsPerPage],rowsPerPage:M.rowsPerPage,count:M.totalRows,page:M.page,onChangePage:R}))},EditField:function(e){return Object(p.jsx)(We.MTableEditField,Object(j.a)({},e))},Cell:Dn,Row:function(e){return Object(p.jsx)(Kn,Object(j.a)(Object(j.a)({},e),{},{handleFetchRows:w,handleRightClick:function(t){F(e.data)}}))}}};J&&($.parentChildData=function(e,t){return t.find((function(t){return e[Y]===t[K]}))},$.components.Action=function(e){var t,n,a,i,c,o,s,l,d;if("toolbar"===(null===e||void 0===e||null===(t=e.action)||void 0===t?void 0:t.position)&&"Aggiungi record"===(null===e||void 0===e||null===(n=e.action)||void 0===n?void 0:n.tooltip))return Object(p.jsx)(oe.a,{title:null===e||void 0===e||null===(a=e.action)||void 0===a?void 0:a.tooltip,children:Object(p.jsx)(T.a,{onClick:function(t){t.stopPropagation(),B(t,e)},"aria-label":null===e||void 0===e||null===(i=e.action)||void 0===i?void 0:i.tooltip,children:Object(p.jsx)(en.a,{})})});if("function"===typeof e.action){var u=e.action(e.data);return Object(p.jsx)(oe.a,{title:u.tooltip,children:Object(p.jsx)(T.a,{"aria-label":u.icon,size:"small",onClick:function(t){t.stopPropagation(),u.onClick(t,e.data)},children:Object(p.jsx)(u.icon,{})})})}return"keyboard_backspace"===e.action.icon?Object(p.jsx)(oe.a,{title:null===e||void 0===e||null===(c=e.action)||void 0===c?void 0:c.tooltip}):Object(p.jsx)(oe.a,{title:null===e||void 0===e||null===(o=e.action)||void 0===o?void 0:o.tooltip,children:Object(p.jsx)(T.a,{"aria-label":null===e||void 0===e||null===(s=e.action)||void 0===s?void 0:s.tooltip,size:"small",onClick:function(t){var n;return null===e||void 0===e||null===(n=e.action)||void 0===n?void 0:n.onClick(t,null===e||void 0===e?void 0:e.data)},children:"object"===typeof(null===e||void 0===e||null===(l=e.action)||void 0===l?void 0:l.icon)?r.a.createElement(e.action.icon):Object(p.jsx)(nn.a,{children:null===e||void 0===e||null===(d=e.action)||void 0===d?void 0:d.icon})})})}),$.components.Toolbar=function(e){return Object(p.jsxs)("div",{style:{padding:"1em"},children:[Object(p.jsxs)("div",{style:{display:"flex",paddingRight:8,minHeight:64,alignItems:"center"},children:[_&&Object(p.jsx)("div",{children:Object(p.jsxs)(X.a,{variant:"body1",children:["Risultati ricerca per: ",Object(p.jsx)("b",{children:_})]})}),Object(p.jsx)("div",{style:{flex:1}}),c&&Object(p.jsx)(on,{searchData:S,currentQuery:_}),Object(p.jsx)(oe.a,{title:"Aggiorna dati",children:Object(p.jsx)(T.a,{onClick:C,children:Object(p.jsx)(ln.a,{color:"inherit"})})}),!l&&!o&&h&&Object(p.jsx)(oe.a,{title:"Aggiungi record",children:Object(p.jsx)(T.a,{onClick:D,children:Object(p.jsx)(un.a,{color:"inherit"})})}),o&&Object(p.jsx)(We.MTableToolbar,Object(j.a)({},e))]}),Object(p.jsx)(An,{comboBoxItems:O,alias:s})]})},$.components=Object(a.useMemo)((function(){return $.components}),[M,c?_:null]);var ee=[];return o||l||ee.push({icon:"edit",tooltip:"Modifica record",onClick:E}),o||l||!m||ee.push({icon:"delete",tooltip:"Elimina record",position:"row",onClick:L}),Array.isArray(f)&&f.length>0&&ee.push({tooltip:"Opzioni record",icon:function(){return Object(p.jsx)(le.a,{})},onClick:v}),Object(p.jsxs)(p.Fragment,{children:[f&&f.length>0&&Object(p.jsx)(Cn,{actions:Z,dispatch:g,setMenuAnchor:q,menuAnchor:z}),Object(p.jsx)(Ve,Object(j.a)(Object(j.a)({tableRef:W,toolbar:d,header:u,isLoading:V,title:i||"",columns:H,onOrderChange:A,data:Q,actions:ee},$),{},{onRowClick:w,options:{search:!1,debounceInterval:300,pageSize:M.rowsPerPage,pageSizeOptions:[M.rowsPerPage],emptyRowsWhenPaging:!1,actionsColumnIndex:-1,addRowPosition:"first",draggable:!1,maxBodyHeight:b&&"".concat(b,"px")||"400px",rowStyle:function(e){var t,n,a,r=e.distinctiveColor;if(J){var i,c,o=(null===e||void 0===e||null===(i=e.tableData)||void 0===i||null===(c=i.path)||void 0===c?void 0:c.length)-1;r=fn(r,o)}return{backgroundColor:(null===U||void 0===U||null===(t=U[s])||void 0===t||null===(n=t[Nn.d])||void 0===n||null===(a=n.tableData)||void 0===a?void 0:a.id)===e.tableData.id?J?"#ade8f4":"#DDD":r}}}},o?{editable:Object(j.a)(Object(j.a)({},h?{onRowAdd:N}:{}),{},{onRowUpdate:k},m?{onRowDelete:P}:{})}:{})),Object(p.jsx)(nt,{isOpen:G,handlePrimaryClose:function(){return y(!1)},handleSecondaryClose:function(){y(!1),I()},handleClose:function(){return y(!1)},title:"Attenzione",description:"Sei sicuro di voler eliminare il record selezionato?"})]})}Kn.defaultProps={actions:[],index:0,data:{},options:{},path:[],handleFetchRows:function(){},handleRightClick:function(){}},Xn.defaultProps={inLineEdit:!1,search:!1,viewOnly:!1,toolbar:!0,header:!0,onRowSelect:function(e){return console.log("rowData selected",e)},addRecord:!0,deleteRecord:!0};var Yn=function(e){var t=e.isOpen,n=e.handleClose,r=e.handleDataSelect,i=e.actionEvent,c=Object(a.useState)(null),o=Object(m.a)(c,2),s=o[0],l=o[1],d=Object(q.e)();Object(a.useEffect)((function(){t||l(null)}),[t]),d||console.warn("INDataChoice cannot be outside of a INDBForm!");var u=i.dataChoicePutList.map((function(e){return{columnField:e.value.replace("@",""),columnLabel:e.label,columnType:e.aliasType}}));return Object(p.jsx)(zt.a,{children:Object(p.jsx)(nt,{title:i.requestMessageToShow||"Seleziona record",primaryButtonDisabled:null===s,isOpen:t,fullWidth:!0,maxWidth:"md",primaryButtonText:"Seleziona",secondaryButtonText:"Annulla",handlePrimaryClose:function(){var e=i.dataChoicePutList.map((function(e){return{fieldName:e.fieldName,value:s[e.value.replace("@","")]}}));r(e)},handleClose:n,handleSecondaryClose:n,children:Object(p.jsx)(Xn,{viewOnly:!0,search:!0,columns:u,onRowSelect:l,dataSource:{dataSourceClassName:i.strClassToCall,selectRecordCommand:i.urlToCall}})})})},Zn=n(670),$n=n.n(Zn),ea=["aliasName","fieldName","label","disabled","options"],ta=function(e){var t=e.aliasName,n=e.fieldName,a=e.label,r=e.disabled,i=e.options,c=(Object(Ue.a)(e,ea),n||t),o=Object(q.d)({name:c}),s=Object(m.a)(o,1)[0],l=Object(q.e)().isSubmitting;return Object(p.jsxs)(ct.a,{style:{width:"100%"},children:[Object(p.jsx)(ot.a,{id:c,children:a}),Object(p.jsx)(it.a,Object(j.a)(Object(j.a)({fullWidth:!0,labelId:"".concat(c,"-label"),id:c,disabled:r||l},s),{},{children:(i||[]).map((function(e){return Object(p.jsx)(ee.a,{value:e,children:e},e)}))}))]})},na=n(669),aa=n.n(na),ra=function(e){var t,n=e.required,r=e.editableBox,i=e.id,c=e.label,o=e.disabled,s=e.dataCalculateOnLostFocus,l=e.boxType,d=e.comboBoxList,u=e.aliasName,b=e.fieldName,h=e.prefix,f=e.suffix,O=e.actionEvent,g=e.fullWidth,x=e.backgroundColor,y=(e.width,e.uploadButton),C=e.uploadEndPoint,w=(e.padding,Object(q.e)()),S=w.setFieldValue,I=w.values,A=Object(a.useContext)(mt.a).componentData,R=Object(a.useContext)(mt.a),D=Object(a.useContext)(Et),E=Object(a.useState)(!1),L=Object(m.a)(E,2),B=L[0],F=L[1],z=Object(a.useState)(!1),_=Object(m.a)(z,2),U=_[0],W=_[1],M=Object(a.useRef)(),G=Object(N.a)().uploadResource,V=Object(P.a)().showMessage,H=null===l||void 0===l?void 0:l.toLowerCase();t=D?D.dispatch:R.dispatch;var Q=Object(v.a)((function(){return{root:x?{backgroundColor:x}:{},fileInput:{display:"none"}}}))(),J=b||u;return["number","text"].includes(H)?Array.isArray(d)&&d.length>0?Object(p.jsx)(ta,{aliasName:u,fieldName:b,label:c,disabled:o,options:d}):Object(p.jsxs)(p.Fragment,{children:[O&&"DATA_CHOICE"===O.actionType&&Object(p.jsx)(Yn,{fullWidth:g,isOpen:B,handleClose:function(){return F(!1)},actionEvent:O,handleDataSelect:function(e){F(!1),e.map((function(e){return S(e.fieldName,e.value)})),setTimeout((function(){return M.current.focus()}),200)}}),Object(p.jsx)(xn,{open:U,message:"Caricamento del file in corso..."}),Object(p.jsx)(q.a,Object(j.a)(Object(j.a)({component:Qt.a,name:J,required:n},!1===r?{disabled:!0}:{}),{},{id:i,className:Q.root,label:c,variant:"standard",type:H,fullWidth:g,inputRef:M,InputProps:Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},s?{onBlur:function(){t({actionType:"UPDATE_FORM_VALUES"})}}:{}),y&&r?{endAdornment:Object(p.jsxs)(k.a,{position:"end",children:[Object(p.jsx)("input",{className:Q.fileInput,id:"file-upload-".concat(J,"-").concat(u),type:"file",onChange:function(e){var t,n=e.target,a=null===n||void 0===n||null===(t=n.files)||void 0===t?void 0:t[0];if(a)if(((null===a||void 0===a?void 0:a.size)/1024/1024).toFixed(4)>10)V("Il file supera le dimensioni massime di 10 MB","error");else{W(!0);var r=Object(Ft.a)(C,A),i=new FormData;i.append("file",a),G(r,i).then((function(e){var t=e.data;return S(J,t)})).catch((function(){V("Errore durante il caricamento del file. Riprovare.","error")})).finally((function(){W(!1),setTimeout((function(){return M.current.focus()}),200)}))}else S(J,"")}}),Object(p.jsx)(oe.a,{title:"Seleziona file",children:Object(p.jsx)("label",{htmlFor:"file-upload-".concat(J,"-").concat(u),children:Object(p.jsx)(T.a,{color:"primary","aria-label":"seleziona file",component:"span",disabled:!r,children:Object(p.jsx)(aa.a,{})})})})]})}:{}),O&&"DATA_CHOICE"===O.actionType?{endAdornment:Object(p.jsx)(k.a,{position:"end",children:Object(p.jsx)(T.a,{"aria-label":"toggle password visibility",onClick:function(){return O&&"DATA_CHOICE"===O.actionType&&F(!0)},children:Object(p.jsx)($n.a,{})})})}:{}),h?{startAdornment:Object(p.jsx)(k.a,{position:"start",children:h})}:{}),f?{endAdornment:Object(p.jsx)(k.a,{position:"end",children:f})}:{})}))]}):Object(p.jsx)(Jt.b,{utils:Zt.a,children:Object(p.jsxs)(p.Fragment,{children:["time"===H&&Object(p.jsx)(Kt.b,{name:J,ampm:!1,required:n,disabled:o,id:i,label:c,format:"HH:mm",clearable:!0,onChange:function(e){S(J,e)},value:I[J]}),"date"===H&&Object(p.jsx)(Xt.a,{name:J,ampm:!1,required:n,disabled:o,id:i,label:c,emptyLabel:"",format:"dd/MM/yyyy",clearable:!0,onChange:function(e){S(J,e)},value:I[J]}),"datetime"===H&&Object(p.jsx)(Yt.a,{name:J,ampm:!1,required:n,disabled:o,id:i,label:c,emptyLabel:"",format:"dd/MM/yyyy HH:mm",clearable:!0,onChange:function(e){S(J,e)},value:I[J]})]})})};ra.defaultProps={boxType:"text",defaultValue:"",fullWidth:!0,uploadButton:!1};var ia=ra,ca=["text","actionEvent","fullWidth","width","padding","badge","imageURL","htmlText"],oa=function(e){var t=e.text,n=e.actionEvent,r=e.fullWidth,i=(e.width,e.padding,e.badge),c=e.imageURL,o=e.htmlText,s=Object(Ue.a)(e,ca),l=Object(a.useState)(!1),d=Object(m.a)(l,2),u=d[0],b=d[1],h=!1,f=function(e){return console.error("No dispatcher available")},O=(null===n||void 0===n?void 0:n.confirmAction)||((null===n||void 0===n?void 0:n.requestParameterList)||[]).length>0||((null===n||void 0===n?void 0:n.requestParameterComponentList)||[]).length>0,g=function(){return b(!1)},x=Object(q.e)(),v=Object(a.useContext)(Et),y=Object(a.useContext)(mt.a);x?(h=x.isSubmitting,f=v.dispatch):f=y.dispatch;var C=function(e){b(!1),"function"===typeof e&&e(!1),n?(console.log("INButton Handling action",n),f(n)):console.error("No event associated to this button")};return i||(i=0),Object(p.jsxs)(p.Fragment,{children:[O&&Object(p.jsx)(qn,{isOpen:u,title:"Conferma",description:n.requestMessageToShow||n.confirmDescription||"Specificare i parametri",primaryButtonText:"Procedi",secondaryButtonText:"Annulla",handlePrimaryClose:function(e,t){var a=t.setSubmitting;n.data=e,b(n.waitForEnd),C(a)},handleSecondaryClose:g,handleClose:g,requestParameterList:n.requestParameterList||[],requestParameterComponentList:n.requestParameterComponentList||[]}),Object(p.jsx)(Ne.a,{badgeContent:i,color:"error",overlap:"rectangular",children:Object(p.jsx)(He.a,Object(j.a)(Object(j.a)({variant:"contained"},s.backgroundColor?{style:{background:s.backgroundColor,color:"white"}}:{color:"primary"}),{},{type:"button",fullWidth:r,disabled:h,onClick:function(e){e.preventDefault(),e.stopPropagation(),O?b(!0):C()},children:c?Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:Object(p.jsx)("img",{src:c})}),Object(p.jsx)("p",{children:t})]}):o?Object(p.jsx)("div",{dangerouslySetInnerHTML:{__html:o}}):t}))})]})};oa.defaultProps={fullWidth:!0};var sa=oa;function la(e){var t=e.imageURL;return Object(p.jsx)(f.a,{style:{padding:"8px"},children:Object(p.jsx)(g.a,{style:{width:"100%",height:"100%"},component:"img",alt:"",image:t,title:""})})}var da=n(687),ua=n(171),pa=n(394),ba=n.n(pa),ja=n(393),ma=n.n(ja),ha=n(672),fa=n.n(ha),Oa=n(240);var ga=function(){var e=Object(a.useContext)(Oa.a).isLoading;return Object(p.jsx)("div",{children:e&&Object(p.jsx)(pe.a,{color:"secondary"})})};function xa(e){var t=e.children,n=e.width,r=void 0===n?1e3:n,i=e.height,c=void 0===i?500:i,o=e.minWidth,s=e.minHeight,l=e.maxWidth,d=e.maxHeight,u=e.title,b=e.dialogFrame,h=e.top,f=e.left,O=e.maximize,g=void 0!==O&&O,x=e.componentName,q=e.toolBarColor,y=void 0===q?"#ffffff":q,C=e.titleColor,w=void 0===C?"#30b6e3":C,S=Object(v.a)((function(e){var t,n;return{root:{display:"flex",flexGrow:1,alignSelf:"stretch",flexDirection:"column",overflowY:"auto"},grow:{flexGrow:1},appBarHang:(n={boxShadow:"none",backgroundColor:y,cursor:"grab"},Object(G.a)(n,"cursor","-moz-grap"),Object(G.a)(n,"cursor","-webkit-grab"),Object(G.a)(n,"&:active",(t={cursor:"grabbing"},Object(G.a)(t,"cursor","-moz-grabbing"),Object(G.a)(t,"cursor","-webkit-grabbing"),t)),n),content:{display:"flex",flexGrow:1,overflowY:"auto",overflowX:"hidden",flexDirection:"column"},titleClass:{color:w}}}))(),N=Object(a.useContext)(mt.a),P=N.dispatch,k=N.componentData,I=Object(a.useContext)(wt),A=I.appClass,R=I.onDragStart,D=I.containerRef,E=I.zIndex,L=Object(a.useState)(!0),B=Object(m.a)(L,2),F=B[0],z=B[1],_=o||r,U=l||r,W=s||c,M=d||c,Q=function(){var e,t;return{x:16,y:16,width:U||(null===(e=D.current)||void 0===e?void 0:e.clientWidth)-32,height:M||(null===(t=D.current)||void 0===t?void 0:t.clientHeight)-32,maximized:!0}},J=function(){var e,t;return{x:h||(null===(e=D.current)||void 0===e?void 0:e.clientWidth)/2-r/2||100,y:f||(null===(t=D.current)||void 0===t?void 0:t.clientHeight)/2-c/2||100,width:r,height:c,maximized:!1}},K=Object(a.useState)(g?Q():J()),Y=Object(m.a)(K,2),Z=Y[0],$=Y[1],ee=Z.maximized&&!(Z.maximized&&Z.width>_&&Z.height>W)||!Z.maximized&&!(!Z.maximized&&Z.width<U&&Z.height<M),te=Object(p.jsx)(ua.a,{elevation:10,className:S.root,children:Object(p.jsxs)(Oa.b,{children:[Object(p.jsxs)(V.a,{position:"static",className:S.appBarHang,children:[Object(p.jsxs)(H.a,{variant:"dense",children:[Object(p.jsx)(X.a,{variant:"h6",className:S.titleClass,children:Object(Ft.a)(u,k)}),Object(p.jsx)("div",{className:S.grow}),!b&&Object(p.jsx)(oe.a,{title:Z.maximized?"Riduci":"Ingrandisci","aria-label":Z.maximized?"Riduci":"Ingrandisci",children:Object(p.jsx)("span",{children:Object(p.jsx)(T.a,{color:"inherit",size:"medium",disabled:ee,onClick:function(){return $(Z.maximized?J():Q())},children:Z.maximized?Object(p.jsx)(ma.a,{fontSize:"inherit",color:ee?"disabled":"#ffffff"}):Object(p.jsx)(ba.a,{fontSize:"inherit",color:ee?"disabled":"#ffffff"})})})}),Object(p.jsx)(oe.a,{title:"Chiudi","aria-label":"chiudi",children:Object(p.jsx)(T.a,{color:"inherit",size:"medium",onClick:function(){return P({actionType:"CLOSE_COMPONENT",appClass:A})},children:Object(p.jsx)(fa.a,{fontSize:"inherit",color:"inherit"})})})]}),Object(p.jsx)(ga,{})]}),Object(p.jsx)("div",{className:S.content,children:t})]})});if(b){var ne=Object(v.a)((function(){return Object(G.a)({},x,{height:c,width:r})}))();return Object(p.jsx)(et,{classes:{paper:ne[x]},isOpen:F,handleClose:function(){z(!1),P({actionType:"CLOSE_COMPONENT",appClass:A})},minWidth:o||r,minHeight:s||c,maxWidth:l||r,maxHeight:d||c,children:Object(p.jsx)(zt.a,{children:te})})}return Object(p.jsx)(zt.a,{children:Object(p.jsx)(da.a,{size:{width:Z.width,height:Z.height},position:{x:Z.x,y:Z.y},onDragStop:function(e,t){return $(Object(j.a)(Object(j.a)({},Z),{},{x:t.x,y:t.y}))},onResizeStop:function(e,t,n,a,r){return $(Object(j.a)(Object(j.a)({},Z),{},{width:n.style.width,height:n.style.height}))},minWidth:o||r,minHeight:s||c,maxWidth:l||r,maxHeight:d||c,style:{display:"flex",zIndex:E},cancel:"input",bounds:"parent",dragHandleClassName:S.appBarHang,onDragStart:R,children:te})})}var va=n(1053),qa=n(1047),ya=Object(v.a)((function(e){return{inSSTabContent:{flexGrow:1,display:"flex",padding:e.spacing(1)},inSSTabContainer:{display:"flex",flexGrow:1,flexDirection:"column"}}})),Ca=function(e){var t=e.children,n=ya(),i=Object(a.useState)(0),c=Object(m.a)(i,2),o=c[0],s=c[1],l=Object(a.useContext)(mt.a),d=l.componentData,u=(l.setData,Object(a.useContext)(zt.b)),b=(u.selectedRow,u.selectedRowObject);Object(a.useEffect)((function(){for(var e=r.a.Children.toArray(t),n=0;n<e.length;n++)e[n].props.componentName}),[o]);var j=function(e,n){for(var a=r.a.Children.toArray(t),i=0;i<a.length;i++)if(a[i].props.aliasName===e&&(!n||a[i].props.componentName===n))return void s(i);console.warn("Cant find element for setRequiredIndex",e,n)};return Object(p.jsxs)("div",{className:n.inSSTabContainer,children:[Object(p.jsx)(va.a,{value:o,onChange:function(e,t){return s(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:r.a.Children.toArray(t).map((function(e,t){var n,a,r="INComponentGroup"===(null===(n=e.props)||void 0===n?void 0:n.componentName)&&!(null!==b&&void 0!==b&&null!==(a=b[e.props.aliasName])&&void 0!==a&&a[Nn.d])&&!d[e.props.aliasName];return Object(p.jsx)(qa.a,{label:e.props.title,disabled:r},t)}))}),Object(p.jsx)("div",{className:n.inSSTabContent,children:Object(p.jsx)(Bt.b,{showForm:function(e){return j(e,"INComponentGroup")},showPanel:function(e){j(e)},children:r.a.Children.toArray(t).map((function(e,t){return o===t&&e}))})})]})},wa=function(e){var t=e.children;return Object(p.jsx)(p.Fragment,{children:t})},Sa=["dispatch","actions","tooltip","menu_list"];function Na(e){var t,n=e.dispatch,a=e.actions,i=e.tooltip,c=e.menu_list,o=(Object(Ue.a)(e,Sa),r.a.useContext(mt.a).dispatch),s=n||o,l=(null===(t=c[0])||void 0===t?void 0:t.children)||a,d=r.a.useState(null),u=Object(m.a)(d,2),b=u[0],j=u[1],h=r.a.useState(!1),f=Object(m.a)(h,2),O=f[0],g=f[1];return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(oe.a,{title:i,children:Object(p.jsx)(le.a,{style:{cursor:"pointer"},onClick:function(e){var t=e.currentTarget;j(t),g(!0)}})}),l&&Object(p.jsx)(Cn,{menuAnchor:b,menuOpen:O,actions:l,dispatch:s,setMenuOpen:g,setMenuAnchor:j})]})}var Pa=Na;Na.defaultProps={dispatch:null,actions:[]};var ka=function(e){var t,n=!0,a=!0,r=[];switch(e){case"INForm":t=xa,a=!1,r.push("title");break;case"INDBTreeView":case"INDBList":t=Xn,n=!1,r.push("dataSource");break;case"INSSTab":t=Ca;break;case"INPanel":t=wa,r.push("title");break;case"INContainer":t=wa;break;case"INDataEntryBox":t=ia,n=!1,r.push("fieldName","boxType");break;case"INTextEdit":t=At.a,n=!1,r.push("fieldName");break;case"INButton":t=sa,n=!1,r.push("text");break;case"INImage":t=la,n=!1,r.push("imageURL");break;case"INComponentGroup":t=Ht;break;case"INLabel":t=Nt,n=!1,r.push("text");break;case"INCheckBox":t=It,n=!1,r.push("label");break;case"INContextMenu":t=Pa,n=!1,r.push("menu_list");break;default:throw new Error("Invalid component type ".concat(e))}return{className:t,canHaveChild:n,canBeChild:a,parentWrapper:undefined,childWrapper:undefined,mandatoryProps:r}},Ta=function(e){var t=e.componentDirection,n=e.componentAlign,a=e.grow,i=e.spacing,c=e.children;return Object(p.jsx)("div",{className:"INHorizontalGridContainer",style:{display:"flex",width:"100%",flexGrow:null!==a&&void 0!==a?a:1,flexDirection:"row",alignContent:n,justifyContent:t},children:r.a.Children.toArray(c).map((function(e,t){var n,a=(n=e.props)?Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},n.width&&{width:n.width}),n.height&&{height:n.height}),n.padding_Bottom&&{paddingBottom:n.padding_Bottom}),n.padding_Top&&{paddingTop:n.padding_Top}),n.padding_Left&&{paddingLeft:n.padding_Left}),n.padding_Right&&{paddingRight:n.padding_Right}),n.grow&&{flexGrow:n.grow}),n.componentAlign&&{alignSelf:gt(n.componentAlign)}):{};return Object(p.jsx)("div",{className:"INHorizontalGridItem",style:Object(j.a)({display:"flex",paddingLeft:i,paddingRight:i},a),children:e},t)}))})};Ta.defaultProps={componentDirection:"center",componentAlign:"center",spacing:16};var Ia=Ta,Aa=["componentLayout","components"],Ra=function(e){var t=e.componentLayout,n=(e.components,Object(Ue.a)(e,Aa));if(t&&"BORDER_LAYOUT"!==t){var a,r,i={componentDirection:gt((r=n).componentDirection),componentAlign:gt(r.componentAlign),grow:r.grow,spacing:r.layoutSpacing,height:r.height,left:r.left,right:r.right,top:r.top,bottom:r.bottom,width:r.width};switch(t){case"BORDER_LAYOUT":case"GRID_LAYOUT":case"VERTICAL_GRID":a=vt;break;case"HORIZONTAL_GRID":a=Ia;break;default:throw new Error("Invalid layout type ".concat(t))}return{className:a,attr:i}}},Da=["components","componentType"];var Ea=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t)throw new Error("Empty layout data supplied");var a=t.components,i=t.componentType,c=Object(Ue.a)(t,Da),o=ka(i);if(!o.canHaveChild)throw new Error("The component ".concat(i," cannot have children"));for(var s=[],l=0;l<a.length;l++){var d=a[l],u=ka(d.componentType);if(!u.canBeChild)throw new Error("The component ".concat(d.componentType," cannot be a child"));if(u.mandatoryProps.length>0&&function(){var e=Object.keys(d),t=u.mandatoryProps.filter((function(t){return!e.includes(t)}));if(t.length>0)throw new Error("The component ".concat(d.componentType," is missing mandatory props: ").concat(t.toString()))}(),d.components&&Array.isArray(d.components)&&d.components.length>0){var p=e(d,l);s.push(p)}else s.push(r.a.createElement(u.className,Object(j.a)({key:n+l},d)))}var b=Ra(t);b&&(s=r.a.createElement(b.className,Object(j.a)({key:n},b.attr),s)),o.childWrapper&&(s=r.a.createElement(o.childWrapper,{key:n},s));var m=r.a.createElement(o.className,Object(j.a)({key:n},c),s);return o.parentWrapper?r.a.createElement(o.parentWrapper,{key:n},m):m};n(997);function La(e){var t=e.appClass,n=e.url,r=e.onDragStart,i=e.containerRef,c=e.zIndex,o=(e.children,Object(a.useState)(null)),s=Object(m.a)(o,2),l=s[0],d=s[1],u=Object(a.useContext)(mt.a).setComponentData,b=Object(a.useState)([]),h=Object(m.a)(b,2),f=h[0],O=h[1],g=Object(N.a)().get;if(Object(a.useEffect)((function(){return function(){if("function"===typeof u){console.log("Clearing autolayout aliases");var e,t=Object(bt.a)(f);try{var n=function(){var t=e.value;u((function(e){var n=Object(j.a)({},e);return delete n[t],n}))};for(t.s();!(e=t.n()).done;)n()}catch(a){t.e(a)}finally{t.f()}}}}),[f]),Object(a.useEffect)((function(){function e(){return(e=Object(Le.a)(Object(Ee.a)().mark((function e(){var t,a,r;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(n);case 3:t=e.sent,a=Ea(t),r=[],Ot.a.deepForEach(a,(function(e){return e.props.aliasName&&r.push(e.props.aliasName)})),console.log("Autolayout ALIASES",r),O(r),d(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Object(p.jsx)(yt.a,{children:Object(p.jsxs)(vt,{componentAlign:"center",children:[Object(p.jsx)(X.a,{component:"h5",color:"error",children:"Errore durante la creazione del layout"}),Object(p.jsx)(X.a,{variant:"body2",children:e.t0.message})]})}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]),!t||!n)return console.warn("No app class supplied"),Object(p.jsx)(p.Fragment,{});if(Array.isArray(l)&&l.length>1)throw new Error("Invalid layout structure: there must be only one container at most");return l?Object(p.jsx)(St,{appClass:t,onDragStart:r,containerRef:i,zIndex:c,children:l}):Object(p.jsx)(qt.a,{})}var Ba=n(673),Fa=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto",overflowX:"hidden"},container:Object(G.a)({height:"calc(100vh - 64px)",width:"calc(100vw - ".concat(e.spacing(7),"px)")},e.breakpoints.up("sm"),{height:"calc(100vh - ".concat(e.mixins.toolbar[e.breakpoints.up("sm")].minHeight,"px)")})}})),za={};function _a(e){var t=e.match,n=Fa(),r=Object(a.useState)(!1),i=Object(m.a)(r,2),c=i[0],o=i[1],s=Object(N.a)(),l=s.startApp,d=s.executeCommand,u=Object(a.useState)({title:"Caricamento...",menu:[]}),b=Object(m.a)(u,2),j=b[0],h=b[1],f=Object(P.a)(),O=Object(a.useCallback)((function(e,t){if(!t)return console.error("Cannot handle empty action"),e;console.log("Handling action",t);var n=t.actionType,a=t.urlToCall,r=t.appClass,i=t.parentIsAlreadyRendered,c=t.jsonToHandle;switch(console.log(n),n){case"SHOW_COMPONENT":if(i){var s=Ea(c);t.generatedLayout=s;break}if(!e.find((function(e){return e.appClass===t.strClassToCall}))){var l=Math.max.apply(Math,Object(pt.a)(Object.values(za)).concat([0]));return[].concat(Object(pt.a)(e),[{appClass:t.strClassToCall,url:t.urlToCall,zIndex:za[t.strClassToCall]||l+1}])}break;case"CLOSE_COMPONENT":return delete za[r],e.filter((function(e){return e.appClass!==r}));case"EXECUTE_COMMAND":var u=t.data,p=t.waitForEnd;o(!0),d(a,u,p).then((function(e){p?e.newEventFromTask&&q(e.newEventFromTask):f("Operazione in esecuzione in background.","success")})).catch((function(e){return f("Errore durante l'esecuzione del comando","error")})).finally((function(){return o(!1)}));break;case"OPEN_URL":return t.openInNewFrame?[].concat(Object(pt.a)(e),[{type:"modalFrame",appClass:a,height:t.frameHeight,url:a}]):(window.open(a,"_blank"),e);default:console.error("Invalid action type")}return e}),[]),g=Object(a.useReducer)(O,[]),x=Object(m.a)(g,2),v=x[0],q=x[1],y=Object(a.useRef)({prevDraggedNode:null}),C=Object(a.useRef)(),w=t.params.id;return console.log("Loading app",w),Object(a.useEffect)((function(){l(w).then((function(e){console.log("Application loaded",e),h({title:e.app_name,menu:e.menu}),e.newevent&&q(e.newevent)})).catch((function(e){return console.log("Failed to start app",e)}))}),[w]),Object(p.jsxs)("div",{className:n.root,children:[Object(p.jsx)(xn,{open:c}),Object(p.jsxs)(mt.b,{dispatch:q,children:[Object(p.jsx)(me,{title:j.title,children:j.menu.map((function(e){return Object(p.jsx)(ft,{id:e.id_menu,label:e.menuName,items:e.children,notification:e.numberOfNotification},e.id_menu)}))}),Object(p.jsx)(we,{}),Object(p.jsxs)("main",{className:n.content,children:[Object(p.jsx)("div",{className:n.appBarSpacer}),Object(p.jsx)("div",{className:n.container,ref:C,children:Object(p.jsx)(p.Fragment,{children:v.map((function(e,t){var n=e.appClass,a=e.url,r=e.type,i=e.height,c=e.zIndex;return"modalFrame"===r?Object(p.jsx)(et,{isOpen:!0,fullWidth:!0,maxWidth:"xl",handleClose:function(){return q({actionType:"CLOSE_COMPONENT",appClass:a})},children:Object(p.jsx)(Ba.a,{id:t,url:a,height:i||"950px"})},t):Object(p.jsx)(La,{appClass:n,url:a,containerRef:C,zIndex:c,onDragStart:function(e,t){var a=y.current;if(a.prevDraggedNode){if((null===a||void 0===a?void 0:a.prevDraggedNode)!==t.node){a.prevDraggedNode=t.node;var r=Math.max.apply(Math,Object(pt.a)(Object.values(za)).concat([0]))+1;a.prevDraggedNode.style.zIndex=r,za[n]=r}}else a.prevDraggedNode=t.node}},t)}))})})]})]})]})}var Ua=n(404),Wa=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},row:{display:"flex"},appIcon:{height:e.spacing(5),marginTop:"7px",marginBottom:"7px",marginLeft:e.spacing(1),marginRight:e.spacing(2)}}}));function Ma(e){var t=e.match,n=e.history,r=Wa(),i=t.params.username,c=Object(a.useState)([]),o=Object(m.a)(c,2),s=o[0],l=o[1],d=Object(N.a)(),u=d.getApps,b=d.isLoading;return Object(a.useEffect)((function(){u().then((function(e){var t,n=Object(bt.a)(e);try{for(n.s();!(t=n.n()).done;)t.value.permit=Math.random()>=.5}catch(a){n.e(a)}finally{n.f()}l(e)})).catch(console.error)}),[]),Object(p.jsxs)("div",{className:r.root,children:[Object(p.jsx)(me,{title:"Gestione permessi"}),Object(p.jsx)(we,{}),Object(p.jsxs)("main",{className:r.content,children:[Object(p.jsx)("div",{className:r.appBarSpacer}),Object(p.jsx)(M.a,{maxWidth:"lg",className:r.container,children:Object(p.jsx)(x.a,{container:!0,spacing:3,children:Object(p.jsx)(x.a,{item:!0,xs:12,children:Object(p.jsx)(Ve,{title:"Permessi utente: ".concat(i),isLoading:b,actions:[{icon:"save",tooltip:"Salva modifiche",isFreeAction:!0,onClick:function(){return n.push("/user/list")}}],columns:[{title:"Applicazione",field:"app_name",render:function(e){return Object(p.jsxs)("div",{className:r.row,children:[Object(p.jsx)("img",{src:Te,className:r.appIcon,alt:""}),Object(p.jsx)("p",{children:e.app_name})]})}},{title:"Consenti",field:"permit",render:function(e){return Object(p.jsx)(kt.a,{checked:e.permit,onChange:function(){},value:"primary",inputProps:{"aria-label":"primary checkbox"}})}}],data:s,options:{search:!1}})})})})]})]})}var Ga=n(106),Va=n(107),Ha=n(251),Qa=n(1113),Ja=n(248),Ka=Object(v.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(0),paddingBottom:e.spacing(4),height:"100%"},productsContainer:{marginTop:e.spacing(0)},appSeparator:{minHeight:e.spacing(10)},paginationContainer:{marginTop:e.spacing(6),"& > *":{marginTop:e.spacing(2),justifyContent:"center",display:"flex"}}}})),Xa="",Ya=function(){var e=Object(d.h)(),t=Object(d.g)(),n=Object(a.useState)([]),r=Object(m.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),s=Object(m.a)(o,2),l=s[0],u=(s[1],Object(a.useState)(!0)),b=Object(m.a)(u,2),h=b[0],f=b[1],O=Object(a.useState)([]),g=Object(m.a)(O,2),v=(g[0],g[1],Object(a.useState)({currentPage:parseInt(new URLSearchParams(e.search).get("page")||1,10),totalPages:1})),q=Object(m.a)(v,2),y=q[0],C=q[1],w=Ka(),S=Object(d.i)().id,P=new URLSearchParams(e.search).get("description"),k=Object(N.a)(),T=k.getProductsByName;k.getCategory;return Object(a.useEffect)((function(){C({currentPage:parseInt(new URLSearchParams(e.search).get("page")||1,10),totalPages:1})}),[e.search]),Object(a.useEffect)((function(){f(!0),T(S,{recordForPage:32,page:y.currentPage}).then((function(e){var t,n;Array.isArray(e)&&(C(Object(j.a)(Object(j.a)({},y),{},{totalPages:null!==(t=null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.totPage)&&void 0!==t?t:1})),c(e))})).catch(console.error).finally((function(){return f(!1)}))}),[S,y.currentPage]),l?Object(p.jsx)(Ja.a,{}):Object(p.jsxs)("div",{className:w.root,children:[Object(p.jsx)(Ga.a,{title:"Home"}),Object(p.jsx)(Va.a,{}),Object(p.jsxs)("main",{className:w.content,children:[Object(p.jsx)("div",{className:w.appBarSpacer}),Object(p.jsx)("div",{className:w.appSeparator,children:Object(p.jsx)(X.a,{style:{textAlign:"center",paddingTop:"30px",paddingBottom:"20px",color:"#1386bf",fontSize:"30pt"},children:P})}),Object(p.jsx)(M.a,{maxWidth:"lg",className:w.container,children:Object(p.jsxs)(p.Fragment,{children:[h?Object(p.jsx)(yt.a,{children:Object(p.jsx)(Rt.a,{})}):null,Object(p.jsx)(x.a,{container:!0,spacing:3,className:w.productsContainer,children:i.map((function(e){return Object(p.jsxs)(x.a,{item:!0,children:[(t=e.categoryFullPathDescription,Xa!=t&&(Xa=t,1)?Object(p.jsx)(X.a,{style:{paddingTop:"0px",paddingBottom:"5px",color:"#83a2a8",fontSize:"20pt"},children:e.categoryFullPathDescription}):Object(p.jsx)(X.a,{style:{paddingTop:"20px",paddingBottom:"5px",color:"#83a2a8",fontSize:"10pt"},children:e.categoryFullPathDescription})),Object(p.jsx)(Ha.a,{title:e.description,price:e.sellingPriceTotVat,available:!0,imageURL:e.imageURL,productId:e.id_ArticlesRegistry,hasSizeAndColors:!!e.sizesAndColors,id_firstcolor:e.id_firstcolor,id_firstsize:e.id_firstsize,firstcodtot:e.firstcodtot})]},e.id_ArticlesRegistry);var t}))}),Object(p.jsx)("div",{className:w.paginationContainer,children:Object(p.jsx)(Qa.a,{size:"large",count:y.totalPages,page:y.currentPage,onChange:function(n,a){t.push({pathname:e.pathname,search:"?".concat(new URLSearchParams({page:a}).toString())})}})})]})})]})]})},Za=n(61),$a=n(151),er=Object(v.a)((function(e){return{form:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),tr=function(){var e=Object(a.useContext)(Za.a),t=e.showLoginDialog,n=e.setShowLoginDialog,r=Object(a.useContext)(S.b),i=r.sessionData,c=r.setData,o=Object(N.a)().login,s=function(){return n(!1)},l=er(),d=Object(P.a)();return Object(p.jsx)(q.b,{initialValues:{user:"",password:""},validationSchema:y.a().shape({user:y.c().required("Inserire il nome utente"),password:y.c().required("Inserire una password")}),enableReinitialize:!0,onSubmit:function(e,t){var n=t.setSubmitting,a=t.setErrors,r=Object(j.a)(Object(j.a)({},e),{},{inceptiumid:i.inceptiumid});o(r).then((function(e){c(Object(j.a)(Object(j.a)({},r),e)),s()})).catch((function(e){a(e.error||e.message),d(e.message,"error")})).finally((function(){return n(!1)}))},children:function(e){var n=e.values,a=e.errors,r=e.handleChange,i=e.handleBlur,c=e.touched,o=e.isSubmitting,d=e.submitForm,u=e.handleSubmit;return Object(p.jsx)(nt,{isOpen:t,title:"Effettua l'accesso",primaryButtonText:"Accedi",primaryButtonDisabled:o,secondaryButtonText:"Annulla",secondaryButtonDisabled:o,handlePrimaryClose:d,handleSecondaryClose:s,handleClose:s,children:Object(p.jsxs)("form",{className:l.form,onSubmit:u,children:[Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"user",label:"Nome Utente",autoComplete:"user",onChange:r,onBlur:i,value:n.user,helperText:a.user&&c.user&&a.user,error:a.user&&c.user,disabled:o}),Object(p.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:r,onBlur:i,value:n.password,helperText:a.password&&c.password&&a.password,error:a.password&&c.password,disabled:o})]})})}})},nr=n(191),ar=n(1055),rr=n(1050),ir=n(479),cr=n.n(ir),or=Object(v.a)((function(e){return{appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),height:"100%"},productsContainer:{marginTop:e.spacing(4)},greyText:{color:nr.a[600]},emptyCategoryIcon:{fontSize:100,color:nr.a[600]},emptyContentContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",paddingTop:e.spacing(8)},paginationContainer:{marginTop:e.spacing(6),"& > *":{marginTop:e.spacing(2),justifyContent:"center",display:"flex"}}}}));function sr(){var e=Object(d.h)(),t=Object(d.g)(),n=Object(a.useState)([]),r=Object(m.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),s=Object(m.a)(o,2),u=s[0],b=s[1],h=Object(a.useState)(!0),f=Object(m.a)(h,2),O=f[0],g=f[1],v=Object(a.useState)([]),q=Object(m.a)(v,2),y=q[0],C=q[1],w=Object(a.useState)({currentPage:parseInt(new URLSearchParams(e.search).get("page")||1,10),totalPages:1}),S=Object(m.a)(w,2),P=S[0],k=S[1],T=or(),I=Object(d.i)().id,A=Object(N.a)(),R=A.getProducts,D=A.getCategory;return Object(a.useEffect)((function(){k({currentPage:parseInt(new URLSearchParams(e.search).get("page")||1,10),totalPages:1})}),[e.search]),Object(a.useEffect)((function(){g(!0),D(I).then((function(e){var t,n;if("string"!==typeof e||0!==e.length){var a=null!==(t=null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.categoryFullPathDescription)&&void 0!==t?t:"";C(a.split("/"))}else b(!0)})),R(I,{recordForPage:20,page:P.currentPage}).then((function(e){var t,n;Array.isArray(e)&&(k(Object(j.a)(Object(j.a)({},P),{},{totalPages:null!==(t=null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.totPage)&&void 0!==t?t:1})),c(e))})).catch(console.error).finally((function(){return g(!1)}))}),[I,P.currentPage]),u?Object(p.jsx)(Ja.a,{}):Object(p.jsxs)("div",{className:T.root,children:[Object(p.jsx)(Ga.a,{title:"Categoria"}),Object(p.jsx)(Va.a,{}),Object(p.jsxs)("main",{className:T.content,children:[Object(p.jsx)("div",{className:T.appBarSpacer}),Object(p.jsxs)(M.a,{maxWidth:"lg",className:T.container,children:[Object(p.jsxs)(ar.a,{"aria-label":"breadcrumb",children:[Object(p.jsx)(rr.a,{color:"inherit",to:"/ecommerce/home",component:l.b,children:"Home"}),y.map((function(e,t){return Object(p.jsx)(X.a,{color:t===y.length-1?"textPrimary":"textSecondary",style:{paddingTop:"0px",paddingBottom:"5px",color:"#83a2a8",fontSize:"20pt"},children:e},t)}))]}),O?Object(p.jsx)(yt.a,{children:Object(p.jsx)(Rt.a,{})}):i.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x.a,{container:!0,spacing:3,className:T.productsContainer,children:i.map((function(e){return Object(p.jsx)(x.a,{item:!0,children:Object(p.jsx)(Ha.a,{title:e.description,price:e.sellingPriceTotVat,available:!0,imageURL:e.imageURL,productId:e.id_ArticlesRegistry,hasSizeAndColors:!!e.sizesAndColors,id_firstcolor:e.id_firstcolor,id_firstsize:e.id_firstsize,firstcodtot:e.firstcodtot})},e.id_ArticlesRegistry)}))}),Object(p.jsx)("div",{className:T.paginationContainer,children:Object(p.jsx)(Qa.a,{size:"large",count:P.totalPages,page:P.currentPage,onChange:function(n,a){t.push({pathname:e.pathname,search:"?".concat(new URLSearchParams({page:a}).toString())})}})})]}):Object(p.jsxs)("div",{className:T.emptyContentContainer,children:[Object(p.jsx)(cr.a,{className:T.emptyCategoryIcon}),Object(p.jsx)(X.a,{variant:"subtitle1",className:T.greyText,children:"Non ci sono prodotti in questa categoria."})]})]})]})]})}var lr=n(676),dr=n(395),ur=n(1101),pr=n(1103),br=n(192),jr=n(1102),mr=n(1037),hr=n(477),fr=n(1116),Or=n(215),gr=n.n(Or),xr=n(681),vr=n.n(xr),qr=Object(v.a)((function(e){return{spinner:{position:"absolute",margin:"-16px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},primaryText:{color:e.palette.text.primary},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(14),color:e.palette.text.secondary},imageContainer:{padding:e.spacing(2),color:e.palette.text.secondary}}}));function yr(e){var t,n=e.expanded,r=e.handleSelect,i=e.handleChange,c=e.addresses,o=e.selectedAddressId,s=e.userData,l=Object(a.useState)(!1),d=Object(m.a)(l,2),u=d[0],b=d[1],j=qr(),h=null===(t=c.filter((function(e){return e.id===o})))||void 0===t?void 0:t[0];return Object(p.jsxs)(ur.a,{expanded:n,onChange:i("addressPanel"),children:[Object(p.jsx)(pr.a,{expandIcon:Object(p.jsx)(gr.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",style:{alignItems:"center"},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[Object(p.jsxs)("div",{style:{flexBasis:"33.33%",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(p.jsx)("div",{className:j.imageContainer,children:Object(p.jsx)(vr.a,{})}),Object(p.jsx)(X.a,{className:j.heading,children:"Indirizzo di consegna"})]}),Object(p.jsx)(X.a,{component:"div",className:j.secondaryHeading,children:h&&Object(p.jsxs)(X.a,{component:"div",children:[Object(p.jsx)(br.a,{fontWeight:"fontWeightRegular",className:j.primaryText,children:s.fullName||""}),h.address||"",Object(p.jsx)("br",{}),"".concat(h.postalCode||""," ").concat(h.city||""," ").concat(h.province||""," - ").concat(h.nation||""),Object(p.jsx)("br",{}),s.phoneNumber||""]})})]})}),Object(p.jsxs)(jr.a,{style:{position:"relative"},children:[u&&Object(p.jsx)("div",{className:j.spinner,children:Object(p.jsx)(Rt.a,{})}),Object(p.jsxs)(ct.a,{component:"fieldset",disabled:u,children:[Object(p.jsx)(mr.a,{component:"legend",children:"Altri indirizzi"}),Object(p.jsx)(hr.a,{"aria-label":"address",name:"address",value:null!==o&&void 0!==o?o:-1,onChange:function(e){b(!0),r(e.target.value).finally((function(){return b(!1)}))},children:c.map((function(e){return Object(p.jsx)(Pt.a,{value:e.id,control:Object(p.jsx)(fr.a,{}),style:{marginTop:"16px"},label:Object(p.jsxs)(X.a,{component:"div",className:j.secondaryHeading,children:[Object(p.jsx)(br.a,{fontWeight:"fontWeightRegular",className:j.primaryText,children:s.fullName}),e.address,Object(p.jsx)("br",{}),"".concat(e.postalCode," ").concat(e.city," ").concat(e.province," - ").concat(e.nation),Object(p.jsx)("br",{}),s.phoneNumber]})},e.id)}))})]})]})]})}var Cr=n(682),wr=n.n(Cr),Sr=Object(v.a)((function(e){return{spinner:{position:"absolute",margin:"-16px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},primaryText:{color:e.palette.text.primary},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},imageContainer:{padding:e.spacing(2),color:e.palette.text.secondary}}}));function Nr(e){var t,n=e.expanded,r=e.handleSelect,i=e.handleChange,c=e.payments,o=e.selectedPaymentId,s=Object(a.useState)(!1),l=Object(m.a)(s,2),d=l[0],u=l[1],b=Sr(),j=null===(t=c.filter((function(e){return e.id===o})))||void 0===t?void 0:t[0];return Object(p.jsxs)(ur.a,{expanded:d||n,onChange:i("paymentPanel"),children:[Object(p.jsx)(pr.a,{expandIcon:Object(p.jsx)(gr.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",style:{alignItems:"center"},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[Object(p.jsxs)("div",{style:{flexBasis:"33.33%",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(p.jsx)("div",{className:b.imageContainer,children:Object(p.jsx)(wr.a,{})}),Object(p.jsx)(X.a,{className:b.heading,children:"Modalit\xe0 di pagamento"})]}),Object(p.jsx)(X.a,{component:"div",className:b.secondaryHeading,children:j&&Object(p.jsx)(X.a,{component:"div",children:Object(p.jsx)(br.a,{fontWeight:"fontWeightRegular",className:b.primaryText,children:j.label})})})]})}),Object(p.jsxs)(jr.a,{style:{position:"relative"},children:[d&&Object(p.jsx)("div",{className:b.spinner,children:Object(p.jsx)(Rt.a,{})}),Object(p.jsxs)(ct.a,{component:"fieldset",disabled:d,children:[Object(p.jsx)(mr.a,{component:"legend",children:"Seleziona la modalit\xe0 di pagamento"}),Object(p.jsx)(hr.a,{"aria-label":"payment",name:"payment",value:null!==o&&void 0!==o?o:-1,onChange:function(e){u(!0),r(e.target.value).finally((function(){return u(!1)}))},children:c.map((function(e){return Object(p.jsx)(Pt.a,{value:e.id,control:Object(p.jsx)(fr.a,{}),style:{marginTop:"8px"},label:Object(p.jsx)(X.a,{children:e.label})},e.id)}))})]})]})]})}var Pr=n(109),kr=n(398),Tr=Object(v.a)((function(e){return{appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},title:{fontSize:14},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},greyText:{color:e.palette.text.secondary},emptyCategoryIcon:{fontSize:100,color:nr.a[600]},emptyContentContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",paddingTop:e.spacing(8)},verticalPadding:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},orderTotal:{fontSize:e.typography.pxToRem(15)},stickyCard:{position:"sticky",top:"90px"}}}));function Ir(){var e,t,n=Tr(),i=Object(a.useContext)($a.a),c=i.userCart,o=i.updateProductQty,s=i.isOpen,l=i.placeOrder,u=Object(a.useState)(!0),b=Object(m.a)(u,2),h=b[0],g=b[1],x=Object(a.useState)([]),v=Object(m.a)(x,2),q=v[0],y=v[1],C=Object(a.useState)([]),w=Object(m.a)(C,2),S=w[0],P=w[1],k=Object(a.useState)([]),T=Object(m.a)(k,2),I=T[0],A=T[1],R=Object(a.useState)({}),D=Object(m.a)(R,2),E=D[0],L=D[1],B=Object(a.useState)({}),F=Object(m.a)(B,2),z=F[0],_=F[1],U=Object(a.useState)(!1),W=Object(m.a)(U,2),G=W[0],V=W[1],H=Object(d.g)(),Q=Object(N.a)(),J=Q.getUserData,K=Q.getUserShippingAddresses,Y=Q.getPaymentMethods,Z=Q.getCartList,$=Q.getUserCart,ee=Q.updateCartPaymentMethod,te=Q.updateCartShippingAddress,ne=function(e){return function(t,n){V(!!n&&e)}};Object(a.useEffect)((function(){h||s||(g(!0),ie(c.userId).finally((function(){return g(!1)})))}),[s,c.userId]);var ae=function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(){var t,n,a,r,i,c;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:return t=e.sent,n=t.codPaymentType||void 0,a=t.id_PersonShippingAddress||void 0,r=t.cartTotalPrice,i=t.cartTotalPriceVAT,c=t.cartTotalVAT,_({paymentId:n,addressId:a,noVATtotalPrice:r,wVATtotalPrice:i,totalVAT:c}),e.abrupt("return",{paymentId:n,addressId:a});case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(){var t;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(null===c||void 0===c?void 0:c.id);case 2:if(t=e.sent,!(Array.isArray(t)&&t.length>0)){e.next=7;break}A(t.map((function(e){return{productId:e.codTot,quantity:e.cartQuantity,title:e.basicDescription,imageURL:e.imageURL,price:e.articlePriceTotVat,cartProductId:e.id_UserCartList,option:e.basicSizeDes,variant:e.basicColorDes,hasOptionVariant:!!e.sizeAndColors,rawProduct:e}}))),e.next=10;break;case 7:if(!Array.isArray(I)||0!==I.length){e.next=10;break}return H.push("/ecommerce/home"),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(Le.a)(Object(Ee.a)().mark((function e(t){var n,a,r,i,c,o,s,l;return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("Aborting request due to empty userId"),e.abrupt("return");case 3:return e.prev=3,e.next=6,ae();case 6:return n=e.sent,a=n.paymentId,r=n.addressId,e.next=11,J(t);case 11:return i=e.sent,L({fullName:"".concat(i.personName," ").concat(i.personSurname),phoneNumber:i.phoneNumber,email:i.emailAddress}),c={id:"-1",city:i.residenceCity,nation:i.residenceNation,postalCode:i.residencePostalCode,province:i.residenceProvince,address:i.residenceStreet},e.next=16,K(t);case 16:return o=e.sent,s=o.map((function(e){return{id:e.id_PersonShippingAddress,city:e.shippingCity,nation:e.shippingNation,postalCode:e.shippingPostalCode,province:e.shippingProvice,address:e.shippingStreet}})),y([c].concat(Object(pt.a)(s))),e.next=21,Y();case 21:return l=e.sent,P(l.map((function(e){return{id:e.codPaymentType,label:e.paymentTypedescription}}))),e.next=25,re();case 25:if(void 0!==r){e.next=28;break}return V("addressPanel"),e.abrupt("return");case 28:if(void 0!==a){e.next=31;break}return V("paymentPanel"),e.abrupt("return");case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(3),console.error(e.t0);case 36:case"end":return e.stop()}}),e,null,[[3,33]])})));return function(t){return e.apply(this,arguments)}}();null===(e=q.filter((function(e){return e.id===z.addressId})))||void 0===e||e[0],null===(t=S.filter((function(e){return e.id===z.paymentId})))||void 0===t||t[0];Object(a.useEffect)((function(){ie(c.userId).catch(console.error).finally((function(){return g(!1)}))}),[]);var ce=function(){g(!0),l().then((function(){return H.push("/ecommerce/home")})).catch((function(e){return g(!1)}))};return Object(p.jsxs)("div",{className:n.root,children:[Object(p.jsx)(Ga.a,{title:"Completa l'ordine"}),Object(p.jsx)(Va.a,{}),Object(p.jsxs)("main",{className:n.content,children:[Object(p.jsx)("div",{className:n.appBarSpacer}),Object(p.jsxs)(M.a,{maxWidth:"lg",className:n.container,children:[h&&Object(p.jsx)(kr.a,{}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column"},className:n.productsContainer,children:[Object(p.jsx)("div",{className:n.verticalPadding,children:Object(p.jsx)(X.a,{variant:"body1",children:"Riepilogo ordine"})}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:3},children:[Object(p.jsx)(yr,{expanded:"addressPanel"===G,handleSelect:function(e){return te(e).then((function(){return ae()})).then((function(){void 0===z.paymentId?V("paymentPanel"):V(!1)}))},handleChange:ne,addresses:q,userData:E,selectedAddressId:z.addressId}),Object(p.jsx)(Nr,{expanded:"paymentPanel"===G,handleSelect:function(e){return ee(e).then((function(){return ae()})).then((function(){void 0===z.addressId?V("addressPanel"):V(!1)}))},handleChange:ne,payments:S,selectedPaymentId:z.paymentId}),Object(p.jsxs)("div",{className:n.verticalPadding,children:[Object(p.jsx)(X.a,{variant:"body1",style:{paddingTop:"8px",paddingBottom:"8px"},children:"Elenco articoli"}),Object(p.jsx)(f.a,{className:n.root,children:Object(p.jsx)(O.a,{children:I.map((function(e,t){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(dr.a,Object(j.a)(Object(j.a)({},e),{},{deleteProduct:!1,handleUpdateProductQty:function(t){return function(e,t){return o(Object(j.a)(Object(j.a)({},e),{},{cartQuantity:t})).then((function(){return ae()})).then((function(){return re()}))}(e.rawProduct,t)}})),t!==I.length-1&&Object(p.jsx)(de.a,{style:{width:"90%"}})]},e.cartProductId)}))})})]}),Object(p.jsx)(f.a,{children:Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"24px"},children:[Object(p.jsx)(He.a,{size:"large",variant:"contained",color:"primary",style:{marginRight:"16px"},disabled:h||!z.paymentId||!z.addressId,onClick:ce,children:"Ordina"}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(p.jsxs)(X.a,{className:n.orderTotal,variant:"h6",children:["Totale ordine: ",Object(Pr.a)(z.wVATtotalPrice)]}),Object(p.jsx)(X.a,{className:n.greyText,variant:"body2",children:"Procedendo con l'acquisto, accetti le condizioni di vendita dello store."})]})]})})]}),Object(p.jsx)("div",{style:{paddingLeft:"32px",flex:1},children:Object(p.jsx)(f.a,{className:n.stickyCard,variant:"outlined",children:Object(p.jsx)(O.a,{children:Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"8px"},children:[Object(p.jsx)(He.a,{variant:"contained",color:"primary",disabled:h||!z.paymentId||!z.addressId,onClick:ce,children:"Ordina"}),Object(p.jsx)(X.a,{className:n.greyText,style:{paddingTop:"16px",paddingBottom:"8px"},variant:"body2",children:"Procedendo con l'acquisto, accetti le condizioni di vendita dello store."}),Object(p.jsx)(de.a,{}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",paddingTop:"16px"},children:[Object(p.jsx)(X.a,{className:n.greyText,style:{flexGrow:1},variant:"body2",children:"Totale prodotti"}),Object(p.jsx)(X.a,{variant:"body2",children:Object(Pr.a)(z.noVATtotalPrice)})]}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",paddingBottom:"16px"},children:[Object(p.jsx)(X.a,{className:n.greyText,style:{flexGrow:1},variant:"body2",children:"IVA"}),Object(p.jsx)(X.a,{variant:"body2",children:Object(Pr.a)(z.totalVAT)})]}),Object(p.jsx)(de.a,{}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",paddingTop:"8px"},children:[Object(p.jsx)(X.a,{className:n.orderTotal,style:{flexGrow:1},variant:"h6",children:"Totale ordine"}),Object(p.jsx)(X.a,{className:n.orderTotal,variant:"h6",children:Object(Pr.a)(z.wVATtotalPrice)})]})]})})})})]})]})]})]})]})}var Ar=["component","auth"];var Rr=function(e){var t=e.component,n=e.auth,r=Object(Ue.a)(e,Ar),i=Object(a.useContext)(S.b),c=i.isLoaded,o=i.error,s=Object(a.useContext)(Za.a),l=Object(d.h)();return Object(p.jsx)(d.b,Object(j.a)(Object(j.a)({},r),{},{render:function(e){return o?Object(p.jsx)(yt.a,{children:Object(p.jsx)(X.a,{variant:"body1",color:"error",children:o})}):!c||l.pathname.includes("ecommerce")&&s&&!s.isLoaded?Object(p.jsx)(qt.a,{}):n&&!s.isAuth?Object(p.jsx)(d.a,{to:{pathname:"/ecommerce/home"}}):Object(p.jsx)(t,Object(j.a)({},e))}}))};function Dr(){var e=Object(d.h)().pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}function Er(){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(Ga.a,{}),Object(p.jsx)(Va.a,{})]})}function Lr(){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(Ga.a,{}),Object(p.jsx)(Va.a,{})]})}var Br=n(206),Fr=Object(Br.b)({palette:{primary:{light:"#8aedff",main:"#51bbe5",dark:"#008bb3",contrastText:"#FFFFFF"},secondary:{main:"#ff8a80"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontSize:12},shape:{borderRadius:0}});var zr=function(e){var t=e.baseURL;return Object(p.jsx)(s.a,{theme:Fr,children:Object(p.jsx)(l.a,{basename:"/portaledef",children:Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(o.a,{})," ",Object(p.jsx)(U.b,{children:Object(p.jsx)(Ua.b,{children:Object(p.jsx)(S.c,{baseURL:t,children:Object(p.jsx)(_,{value:W.a,children:Object(p.jsx)(L.b,{children:Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.a,{exact:!0,from:"/",to:"/dashboard"}),Object(p.jsx)(d.a,{exact:!0,from:"/ecommerce/",to:"/ecommerce/home"}),Object(p.jsx)(Rr,{exact:!0,path:"/login",component:E}),Object(p.jsx)(u.a,{exact:!0,path:"/dashboard",component:De}),Object(p.jsx)(u.a,{exact:!0,path:"/user/list",component:rt}),Object(p.jsx)(u.a,{exact:!0,path:"/user/add",component:ut}),Object(p.jsx)(u.a,{exact:!0,path:"/user/:username/edit",component:ut}),Object(p.jsx)(u.a,{exact:!0,path:"/user/:username/manage-permissions",component:Ma}),Object(p.jsx)(u.a,{path:"/app/:id",component:_a}),Object(p.jsxs)(Za.b,{children:[Object(p.jsx)(Dr,{}),Object(p.jsxs)($a.b,{children:[Object(p.jsx)(tr,{})," ",Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/home/:id",component:Ya}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/home",component:Ya}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/category/:id",component:sr}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/product/:id",component:lr.a}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/cart/order",component:Ir,auth:!0}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/user/profile",component:Lr}),Object(p.jsx)(Rr,{exact:!0,path:"/ecommerce/user/orders",component:Er})]})]}),Object(p.jsx)(d.b,{component:b})]})})})})})})]})})})},_r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ur(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}console.log=function(){},c.a.render(Object(p.jsx)(zr,{baseURL:window.location.href.replace(/\/?(\?|#|$)/,"/$1")}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/portaledef",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/portaledef","/service-worker.js");_r?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ur(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ur(t,e)}))}}()},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(15),r=n(5),i=n(0),c=n.n(i),o=n(58),s=n(217),l=n(1),d=c.a.createContext();d.Consumer;function u(e){var t=e.children,n=Object(i.useContext)(o.b).sessionData,c=Object(i.useState)(!1),u=Object(r.a)(c,2),p=u[0],b=u[1],j=Object(i.useState)([]),m=Object(r.a)(j,2),h=m[0],f=m[1],O=n.inceptiumid,g=n.user;Object(i.useEffect)((function(){var e=Object(s.c)(O,g);f(e)}),[O,g]);return Object(l.jsx)(d.Provider,{value:{isOpen:p,favoriteInceptiumMaps:h,open:function(){return b(!0)},close:function(){return b(!1)},toggle:function(){return b(!p)},handleNewFavoriteInceptiumMap:function(e){f((function(t){var n=Object(a.a)(t),r=n.findIndex((function(t){return t.id===e.id}));return r>=0?(n.splice(r,1),n.unshift(e)):(Object(s.e)(n),n.unshift(e)),Object(s.d)(O,g,n),n}))},emptyInceptiumAppsFavorites:function(){Object(s.a)(O,g),f([])}},children:t})}},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var a=n(9),r=n(5),i=n(0),c=n.n(i),o=n(1091),s=n(471),l=n(380),d=n.n(l),u=n(302),p=n(111),b=n(19),j=n(242),m=n.n(j),h=n(487),f=n(396),O=n.n(f),g=n(1034),x=n(567),v=n(294),q=n(470),y=n(40),C=n(104),w=n(1093),S=n(6),N=n(308),P=n.n(N),k=n(61),T=(n(31),n(150)),I=n(151),A=n(1),R=Object(S.a)((function(e){return{badge:{right:-3,top:12,border:"2px solid ".concat(e.palette.primary.main),padding:"0 4px"}}}))(w.a),D=Object(p.a)((function(e){return{icon:{color:e.palette.common.white}}}));function E(){var e=D(),t=Object(i.useContext)(k.a).isAuth,n=Object(i.useContext)(I.a),a=n.userCart,r=n.toggle,c=Object(T.a)();return Object(A.jsx)(x.a,{title:"Visualizza carrello",children:Object(A.jsx)(u.a,{"aria-label":"cart",onClick:function(){return t?r():c()},children:Object(A.jsx)(R,{badgeContent:null===a||void 0===a?void 0:a.totalItems,color:"secondary",overlap:"rectangular",children:Object(A.jsx)(P.a,{className:e.icon})})})})}var L=n(58),B=n(50);function F(e){var t=e.children,n=(e.title,c.a.useContext(C.a).toggle),i=c.a.useState(null),l=Object(r.a)(i,2),j=l[0],f=l[1],w=Boolean(j),S=function(){return f(null)},N=c.a.useContext(k.a).isAuth,P=c.a.useContext(L.b).authEcommerce,I=c.a.useContext(k.a).settings,R=Object(T.a)(),D=Object(B.g)(),F=Object(p.a)((function(e){return{toolbar:{paddingRight:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(4)},menuButtonHidden:{display:"none"},grow:{flexGrow:1},search:Object(a.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(b.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(b.a)(e.palette.common.white,.25)},"&:focus":{backgroundColor:e.palette.common.white},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(5),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(a.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:400,"&:focus":{width:500}}),appBarSpacer:e.mixins.toolbar,menu:{minWidth:150},menuIcon:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}))();return Object(A.jsx)(o.a,{elevation:0,position:"absolute",className:F.appBar,children:Object(A.jsxs)(s.a,{className:F.toolbar,children:[Object(A.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n,className:F.menuButton,children:Object(A.jsx)(d.a,{})}),Object(A.jsx)(g.a,{style:{maxHeight:48,width:"auto",objectFit:"contain",cursor:"pointer"},component:"img",alt:"",image:I.logo,title:"",onClick:function(){D.push("/ecommerce")}}),Object(A.jsxs)("div",{className:F.search,children:[Object(A.jsx)("div",{className:F.searchIcon,children:Object(A.jsx)(m.a,{})}),Object(A.jsx)(h.a,{placeholder:"Cerca prodotto per nome",classes:{root:F.inputRoot,input:F.inputInput},inputProps:{"aria-label":"search"},onKeyPress:function(e){"Enter"===e.key&&D.push("/ecommerce/home/".concat(e.target.value))}})]}),Object(A.jsx)("div",{className:F.grow}),Object(A.jsx)(x.a,{title:"Profilo",children:Object(A.jsx)(u.a,{edge:"end","aria-label":"account of current user",color:"inherit",onClick:function(e){return f(e.currentTarget)},className:F.menuIcon,children:Object(A.jsx)(O.a,{})})}),Object(A.jsx)(v.a,{id:"fade-menu",anchorEl:j,keepMounted:!0,open:w,onClose:S,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:N?Object(A.jsxs)("div",{children:[Object(A.jsx)(q.a,{className:F.menu,component:y.b,to:"/ecommerce/user/orders",onClick:S,children:"I miei ordini"}),Object(A.jsx)(q.a,{className:F.menu,onClick:function(){P(!1,!0).catch(console.error).finally(S)},children:"Esci"})]}):Object(A.jsx)("div",{children:Object(A.jsx)(q.a,{className:F.menu,onClick:function(){R(),S()},children:"Accedi"})})}),Object(A.jsx)(E,{}),t]})})}},107:function(e,t,n){"use strict";var a=n(7),r=n(9),i=n(0),c=n.n(i),o=n(130),s=n(35),l=n(111),d=n(1050),u=n(40),p=n(1041),b=n(1042),j=n(569),m=n(396),h=n.n(m),f=n(104),O=n(58),g=n(47),x=n(5),v=n(302),q=n(1048),y=n(253),C=n(674),w=n.n(C),S=n(215),N=n.n(S),P=n(31),k=n(50),T=n(57),I=n(1),A=Object(l.a)((function(e){return{categoryItem:{paddingLeft:e.spacing(5)},categoryNested:{paddingLeft:e.spacing(2)},loaderWrapper:{textAlign:"center"}}})),R=function(){var e=Object(i.useState)([]),t=Object(x.a)(e,2),n=(t[0],t[1]),o=Object(i.useState)([]),s=Object(x.a)(o,2),l=s[0],d=s[1],u=Object(i.useState)(!1),m=Object(x.a)(u,2),h=m[0],O=m[1],C=Object(i.useState)({}),S=Object(x.a)(C,2),R=S[0],D=S[1],E=Object(i.useState)({}),L=Object(x.a)(E,2),B=L[0],F=L[1],z=Object(k.g)(),_=Object(T.a)(),U=Object(i.useContext)(f.a).toggle,W=A(),M=Object(P.a)(),G=M.getCategories,V=M.getFeaturesRegistry;Object(i.useEffect)((function(){G().then((function(e){Array.isArray(e)&&(null===e||void 0===e?void 0:e.length)>0?(e.push({id_FeaturesRegistry:"all",description:"Linee"}),d(e)):_("Categorie non disponibili","warning")})).finally((function(){return O(!0)}))}),[]);return Object(I.jsx)(I.Fragment,{children:h?function e(t){var i,o=[];if(Array.isArray(t)){var s,u=Object(g.a)(t);try{for(u.s();!(s=u.n()).done;){var m=s.value;o.push(e(m))}}catch(f){u.e(f)}finally{u.f()}return o}if(Array.isArray(null===t||void 0===t?void 0:t.subcategories)&&(null===t||void 0===t||null===(i=t.subcategories)||void 0===i?void 0:i.length)>0){var h=e(null===t||void 0===t?void 0:t.subcategories);o.push(Object(I.jsxs)(c.a.Fragment,{children:[Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(I.jsx)(b.a,{button:!0,className:W.categoryItem,onClick:function(){U(),"Linee"==(null===t||void 0===t?void 0:t.description)?z.push():z.push("/ecommerce/category/".concat(null===t||void 0===t?void 0:t.categoryFullPathCode))},children:Object(I.jsx)(j.a,{primary:null===t||void 0===t?void 0:t.description})},null===t||void 0===t?void 0:t.id_ArticlesCategory),Object(I.jsx)(v.a,{onClick:function(){return D(Object(a.a)(Object(a.a)({},R),{},Object(r.a)({},null===t||void 0===t?void 0:t.id_ArticlesCategory,!R[null===t||void 0===t?void 0:t.id_ArticlesCategory])))},children:R[null===t||void 0===t?void 0:t.id_ArticlesCategory]?Object(I.jsx)(w.a,{}):Object(I.jsx)(N.a,{})})]}),Object(I.jsx)(q.a,{in:!!R[null===t||void 0===t?void 0:t.id_ArticlesCategory],timeout:"auto",unmountOnExit:!0,children:Object(I.jsx)(p.a,{component:"div",disablePadding:!0,className:W.categoryNested,children:h})})]},null===t||void 0===t?void 0:t.id_ArticlesCategory))}else o.push(Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(I.jsx)(b.a,{button:!0,onClick:function(){U(),"all"!=(null===t||void 0===t?void 0:t.id_FeaturesRegistry)&&(null!==t&&void 0!==t&&t.id_FeaturesRegistry?z.push("/ecommerce/home/".concat(null===t||void 0===t?void 0:t.id_FeaturesRegistry,"?description=").concat(null===t||void 0===t?void 0:t.description)):z.push("/ecommerce/category/".concat(null===t||void 0===t?void 0:t.categoryFullPathCode)))},className:W.categoryItem,children:Object(I.jsx)(j.a,{primary:null===t||void 0===t?void 0:t.description})},null===t||void 0===t?void 0:t.id_ArticlesCategory),void 0===B[null===t||void 0===t?void 0:t.id_ArticlesCategory]&&Object(I.jsx)(v.a,{onClick:function(){"Linee"==(null===t||void 0===t?void 0:t.description)?V().then((function(e){if((null===e||void 0===e?void 0:e.length)>0){var i=l.map((function(t){return"Linee"==t.description&&(t.subcategories=e),t}));n(i),D(Object(a.a)(Object(a.a)({},R),{},Object(r.a)({},null===t||void 0===t?void 0:t.id_ArticlesCategory,!0)))}})).catch(console.error):void 0===B[null===t||void 0===t?void 0:t.id_ArticlesCategory]&&G(null===t||void 0===t?void 0:t.id_ArticlesCategory).then((function(e){if((null===e||void 0===e?void 0:e.length)>0){var n=l.map((function(n){return n.id_ArticlesCategory===(null===t||void 0===t?void 0:t.id_ArticlesCategory)&&(n.subcategories=e),n}));d(n),D(Object(a.a)(Object(a.a)({},R),{},Object(r.a)({},null===t||void 0===t?void 0:t.id_ArticlesCategory,!0)))}F(Object(a.a)(Object(a.a)({},B),{},Object(r.a)({},null===t||void 0===t?void 0:t.id_ArticlesCategory,(null===e||void 0===e?void 0:e.length)>0)))})).catch(console.error)},children:Object(I.jsx)(N.a,{})})]},null===t||void 0===t?void 0:t.id_ArticlesCategory));return o}(l):Object(I.jsx)("div",{className:W.loaderWrapper,children:Object(I.jsx)(y.a,{})})})},D=n(61),E=n(150);t.a=function(e){var t=e.children,n=Object(i.useContext)(f.a),c=n.isOpen,m=n.toggle,g=n.close,x=Object(i.useContext)(O.b).sessionData,v=Object(i.useContext)(D.a).isAuth,q=x.user,y=Object(E.a)(),C=Object(l.a)((function(e){return{drawerOpen:{width:360,flexShrink:0},drawerClose:{width:e.spacing(7),flexShrink:0},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:360,flexShrink:0,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(r.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(7)}),drawerHeader:{height:e.spacing(7),paddingLeft:e.spacing(5),backgroundColor:e.palette.primary.main,display:"flex",alignItems:"center"},accountIcon:{color:e.palette.common.white},accountText:{marginLeft:e.spacing(1),color:e.palette.common.white},toolbar:e.mixins.toolbar,categoryItem:{paddingLeft:e.spacing(5)},categoryNested:{paddingLeft:e.spacing(2)}}}))();return Object(I.jsxs)(o.a,{ModalProps:{onBackdropClick:m},className:c?C.drawerOpen:C.drawerClose,classes:{paper:c?C.drawerPaper:C.drawerPaperClose},open:c,children:[Object(I.jsx)(d.a,Object(a.a)(Object(a.a)({},v?{to:"/ecommerce/user/profile",component:u.b,onClick:function(){return g()}}:{onClick:function(){y(),m()}}),{},{children:Object(I.jsxs)("div",{className:C.drawerHeader,children:[Object(I.jsx)(h.a,{className:C.accountIcon}),Object(I.jsxs)(s.a,{variant:"h6",className:C.accountText,children:["Ciao, ",v?q:"Accedi"]})]})})),Object(I.jsxs)(p.a,{children:[Object(I.jsx)(b.a,{className:C.categoryItem,children:Object(I.jsx)(j.a,{secondary:"CATEGORIE"})}),Object(I.jsx)(R,{})]}),t]})}},109:function(e,t,n){"use strict";function a(e){var t=Number(e);return"".concat(Number.isNaN(t)?"-":t.toFixed(2).replace(".",",")," \u20ac")}n.d(t,"a",(function(){return a}))},124:function(e,t,n){"use strict";n(0);var a=n(111),r=n(41),i=n(1),c=Object(a.a)((function(){return{wrapper:{minHeight:"100vh"}}}));t.a=function(e){var t=e.children,n=c();return Object(i.jsx)(r.a,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",className:n.wrapper,children:t})}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(9),r=n(7),i=n(5),c=n(0),o=n.n(c),s=n(32),l=n(1),d=o.a.createContext({selectedRowObject:{},changeInceptiumFilter:function(){},uploadFilter:function(){},handleSelectedRowObject:function(){}}),u=function(e){var t=o.a.useState({}),n=Object(i.a)(t,2),c=n[0],u=n[1],p=function(e,t,n){u((function(a){var i=Object(r.a)({},a);return i[e]||(i[e]={}),i[e][t]=n,i}))};return Object(l.jsx)(d.Provider,{value:{selectedRowObject:c,uploadFilter:function(e,t){p(t,s.a,e)},changeInceptiumFilter:function(e){var t,n=e.value,i=e.name,o=e.aliasName,l=Object(r.a)(Object(r.a)({},null===c||void 0===c||null===(t=c[o])||void 0===t?void 0:t[s.a]),{},Object(a.a)({},i,n));p(o,s.a,l)},handleSelectedRowObject:p},children:e.children})};t.b=d},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){if(!e||"string"!==typeof e||0===e.length)return e;var n=null===e||void 0===e?void 0:e.match(/(@[a-zA-Z0-9&._-]+)/g);if(!n)return e;for(var a={},r=e,i=0;i<(null===n||void 0===n?void 0:n.length);i++){var c=n[i].replace("@","");null!=t[c]&&(a[c]=t[c]||"",r=r.replace(n[i],a[c]))}return r}},138:function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAC3FBMVEUAAACqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpDsiL4AAAA83RSTlMAAQIDBAUGBwgJCgsMDQ4PEBETFBUWFxgZGhscHR4fICEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREZHSElKS0xNTk9RUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hqa2xtbm9wcXJzdHV2d3h5e3x9fn+AgYKDhIWGh4iJioyNj5CRkpOUlZaXmJmam5+goaKjpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uzt7u/w8fLz9PX29/j5+vv8/f64GdQDAAALuklEQVR42uzZ83sc2wPH8c9s1NRGcBl+773RtW3btutes7ZtG0EdFVvbbtJYzc3nH/ieM5On3ZndJJvt83TOD/v6eXDeY8DPz8/Pz8/Pz8/Pz89PPXf3Xb6+bisGPapBddL1c9mQ9ASo794zbFjhfVDdXfn0Rv6dqnfkUSpft6ZOFyjlyRLlO07djrr977RRchds1PHO+wwpLeHBnbUdiahP/Gm798kt0/IoSccHt6+r42wS6pd8zii5A/a4s4iuDraD2R1edJhKzttT4lhLs4HedyhVklhDsxPN4eIJbztMJY/h6nuDFjUxuKT5bxcpnUuGd1KMkqpfmuMqe2IzrVIjYLih2z7qziTDWylnqdv74w24Om5455/x06dP3Ux3qdOmCzM2ltKw72Z4L+EADaUbZ0yvz6S+796IK/bC8jJ6a057NEbH+fRW2YoXcUWil9Jre99DY32wn15bFg3fPXme3sr6vBkar/kXOfTW+Sfhq/hC6v47sWfPnt27d+8S9kh7d2/fvn2b4HQ6t2515s7pfpsDvnHc3nNurlyI0ymWt13asWPHzp07dwlinWJtx6upK4yHbwLWUSrum9Q8WBckBEshwYGBgQEGhyNAw5XR5EJ0gbWCDMG65ol9iymtD4BP3qV0IBH2SzpA6R34IiBX74iCCqL0ktwA+ODWGpL5sVBDbD7Jmlvhg24UekIVPSl0gw8mkyzqAlV0KSI5GT5IJZkLdeSSTIMP1hszKiON5Hr4YINrSOCbffu5+qINvODodPsLX/T5q+9ffb544faODhVCfqDFbDQk/rOJznxelu+c8Fmc7SFzaXG0CeoT2ye7iu4qs/vE2huygBbHmqNuj88tY13K5j5uZ8h8Whxthro8lWEeeUF+gbkr40nVQ6T4OZSkqh0Tuz97W1RYp7Co257tPnHnxctnWJzqIVr3Qhqq07+JD4CrgP99m1FNQ2E3TemQiOU05A1LhifJw/JpWBqu8Mn+8HHqygdFoi7XDKmoXcJDdoTMo8XRULh5v5y6FYmoT/LK2tz3bAjpTov5cPM1dWU/aKif9mNt8VdXPyTko6Ejhl8yYkT3zrB6h7qD96Bh9x2i7q2rHeKF+8spZYfDG+E5lMruVS6ky3FKa1vDO23WUTrWSbEQbZnR0QreamWULNHUCvmeUk4reK91LqVvlQq5oYjCkTA0RthRCoXXqRQyi0L53WiceyoozFAo5CFKXdFY3Sk9oE5IGoUMBxrLsZrCKmVCHqBQkQAPIl8fuCDTmbN48FuR8CCxksJ9qoTMpDAC7p6YW0RJKpr/NNyNojBdkZBrSkkWRcIqYSnNliW6z1tMsiRSjZCuFMbA6qtSWpV+DauxFL5XIkRbT7I6GRYDWevI6kXph1lrECxSqkmuVSLkunKSGzWYfUld8bC7mwIIvWtIMXVfw0zLJFl2rQoh73m6h9xURik1DpIUu4pS2c2ePvq/o0LIGJIXLcPTVlGaFIjLAidSWqXB5JZqkqMUCNFySO4NhMnjRoflK4pR8gRMgvaRzNbsD2l7nuQ0mC2kkBoIs4BUCgthNp3kuTb2hyR4+LEVod9ZrofV9UUkSyNg0otkzc32hzxD4UWYvEVhENwNovA2TF6i8JT9IR9SuBMmQ0lWJ8FdUjXJoTC5i8L79of8SLIqGibLSR4Igrug/SRXwCSmiuT39of8RLI0HCa55uFaEjdpcBVeSrKP/SG/kSzuCFeO7STnwJPZJLc74KpTMclf7Q/5mWRJmDlkC8kl8GQJyc0aXIUpske6kay4ESbpJHcGwF3ALpKpMImqJPmj/SEfk6y53f3ZvDIW7uKqSI6GyR0UPrQ/5HkKz8HkUwq/wd3vFD72sIBn7Q9JofCjh6PlbHtYdThLsvJGD+9lSfaHdLhAciJMtAzPr+Iz6GGZk0jmtbM/xLHV/YqK1yj1hVk/Sq/AxLGD5BaH/SGYQLIyBiaBuR5KjI7sQJjEVpEcBwVCPqXwBcweqKE0sR0kqd0kSv/dD7OvKHysQIixSVNh8Sd1R7tdB+m67kep+93T+CqjVQhxbPJ019Cm01CycfLIyRtLaJiqwSyukmSOQ4UQ/Eyhv1tfP7r7V4PFAAq9oURIbCXJ8+1h9fQ2mjmfglWH8yQrotUIwVIKf8NNk0+zeFnWJyFw8y+FxVAk5GkKRdfBneOOnnM2Hzl5ZPOcnnc44O76YgpPqRISkENhLjzTmrVqpsGz+RSyHKqE4HlK76OxPqT0LJQJ0VZRuBCLxokroLBCUycESRUUnC3RGK22mf50KRGCvygtC4b3QpabbvWKhARnUZodBG8FzaGUGaRWCGIuGCXB3pYbHfnRUCwEL1O3qCW80XIxpZoXoVwIulKXE4WGReVS9yMUDMFf1J19HQ154yx1f0LJEPSiYXxn1KfLeBp6QtEQvF1E3ZkfW6AuLbqeoa7wLSgbguQtNBzs0RmedOlxkIbNSVA4BM2GsFbelJc7wKzjK1PzaagZ3AwKh0iPZPJSy4q/X7k9rGVoSGjL8Ntf/XtFHiVp48OA6iEI/HQ3XRSdObTv0Jliutj1SQCUD5FCP85m3bI/agKoH2LQHhx5mJ4cHvmABigeYtb84T9TT9LVyVV/PNwMFuqHSK0SXvju71ETp0wc9fd3LyS0gmRPSCrUkeprSAbJTKgjk2Q6fDDT+G+hinZ5JKfDBz9T+Byq+IJCH/jgAQonOkENnU9SuBc+CNlDIbM9VNAhi8KuYPjiG0qZYbBfeBalr+CT0J2UTnzZGfbq/NVJSjuawDf3VlGXn7PGTjkXqKu8B776pJLqqPgYvrvfSVVsvRdXosm3O6iCHd+E4AoFP9B7Rto6O6VN731/MP7fvhkWPQ4CYRgLSMACFuogFiIBCesgBmIBC1hAAhZeA9fCu7Odlr8fnZvh+ZHSlm14sgFye/NtNpvNZrPZbDabzX/HYX9XkIBjfHbhSZPgjBs4Ru/iBhFAG03fAHEkSMMTiYxT2t+LcPwqYudOMxH2dmKDSwAqO54WvV6k+jeRng6R/nLORG7XaTa4an6P3mNEP0bcLZ20QATZRKLeaz4DbSaCwN5A08E3/oYrQAmMvhm3ao5kXvohcgHF7vzzS0SnQ3k1m3531uEXAMQRLcEtFpEEtKAixUZ/jTGbCLXryEKhiH+9pjEnjvEtWS3iMlBUpAHB5u39JSI3cPb3iSIJuFwEKtufIuRYIBIakEzE23cTkQMoIwsUKX1al94hjSQKOn6xyFgzH0OkjtVGL/W3yKtHTIBQ5AHl7j+UP0W4aoUFIv18ZYhkmxgFSN8i3e8lQ5ELSvPu0Y/uEJFKEUvFChFfgQYcTI5OEYSJiG94UhxFGnDJk6FdoVksPxHhDXJwd5On2sW971OEOTgpkoCq3rW/RY7Pdxm/EXGXisQGpfipSARQHUXs/ms9lRmKbojKsUbEFT1X0LFczjCR0VUoEoFG3WtECAb1dCtFgghPEG1l8d/PRqdIYO/e9TX4JMkF6/hsnr2RuEgxjvzJsrXZbDabzWZTgGKPh/oIJlqMOfQjFmPKNNYlDJp46+5WVvMeeBLt8fBdKdsz/1SEsRQh1f9EhJU7DqvZv0FYBULzcxGLVZEsIpkfmMiyal5DaxSoVl1NHFxjcy7yFptoJFbBW1s7SsB1Aae2eWcFij2AOhGZxFLk/IkIqz4PIPNWamMsWcuVLnO6mMg8liJHBdIPRFiBq0DQKqke+apZMpF5bIJyW/eF1TwBUj+K1e7eaqbj6GciH7EmksMvRBpI5XRv7mQObGhpLmKxtmpJG+uviayp5p0fRQQBzpuzokIpUxGLtaoq63/r50jmdcy8tSOQG6ruKsJrHN9FprEmcgGyXCRq1TFoo7z/79pl9aB3kWmsiiSszwh3r062PXCMz49EMDUmoqSP2AQF7b1c3xYUwWwrt6cS32xfKNbr/Bb5iDWREt1yERGxZtIyXE/EwRLfaEaW8rwo8SM2ColDTkhaUc3bbDabzWaz2Ww2m80/rYmgtUAmJ5YAAAAASUVORK5CYII="},150:function(e,t,n){"use strict";var a=n(0),r=n(61);t.a=function(){var e=Object(a.useContext)(r.a).setShowLoginDialog;return function(){return e(!0)}}},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return R}));var a=n(7),r=n(10),i=n(20),c=n(5),o=n(0),s=n.n(o),l=n(111),d=n(130),u=n(191),p=n(35),b=n(567),j=n(302),m=n(417),h=n(193),f=n(373),O=n.n(f),g=n(308),x=n.n(g),v=n(31),q=n(395),y=n(3),C=(n(207),n(109)),w=n(50),S=n(1),N=Object(l.a)((function(e){return{root:{width:500,display:"flex",flexDirection:"column",flexGrow:1},headerContainer:{display:"flex",flexDirection:"row",alignItems:"center",padding:e.spacing(3),height:70,backgroundColor:e.palette.primary.main},icon:{color:e.palette.common.white},text:{color:e.palette.common.white},greyText:{color:u.a[600]},emptyCartIconContainer:{height:100,width:100,marginTop:e.spacing(3),marginBottom:e.spacing(3)},emptyCartIcon:{fontSize:100,color:u.a[600]},emptyTitleText:{paddingTop:e.spacing(3),paddingBottom:e.spacing(4)},textLeft:{textAlign:"start"},textRight:{textAlign:"end"},grow:{flexGrow:1},contentContainer:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",height:0},placeOrderContainer:{padding:e.spacing(3),textAlign:"center"},footerContainer:{height:70,padding:24,display:"flex",alignItems:"center",flexDirection:"row",backgroundColor:e.palette.primary.main}}}));function P(e){var t=e.open,n=e.toggle,r=N(),i=Object(w.g)(),l=Object(o.useContext)(A),u=l.userCart,f=l.removeFromCart,g=l.updateProductQty,P=Object(v.a)(),k=P.getCartList,T=P.getUserCart,I=Object(o.useState)(),R=Object(c.a)(I,2),D=R[0],E=R[1],L=Object(o.useState)([]),B=Object(c.a)(L,2),F=B[0],z=B[1],_=function(){return T().then((function(e){return E(e.cartTotalPriceVAT)})).catch(console.error)},U=function(){return k(null===u||void 0===u?void 0:u.id).then((function(e){Array.isArray(e)&&z(e.map((function(e){return{productId:e.codTot,quantity:e.cartQuantity,title:e.basicDescription,imageURL:e.imageURL,price:e.articlePriceTotVat,cartProductId:e.id_UserCartList,option:e.basicSizeDes,variant:e.basicColorDes,hasOptionVariant:!!e.sizeAndColors,rawProduct:e}})))})).catch((function(e){console.error("Error while updating cart",e),z([])}))};return Object(o.useEffect)((function(){t&&(U(),_())}),[t,u]),Object(S.jsx)(d.a,{anchor:"right",open:t,onClose:n,children:Object(S.jsxs)("div",{className:r.root,children:[Object(S.jsxs)("div",{className:r.headerContainer,children:[Object(S.jsx)("div",{style:{flex:1,padding:"16px"},children:Object(S.jsx)(x.a,{className:r.icon})}),Object(S.jsx)("div",{style:{flexGrow:1,textAlign:"center"},children:Object(S.jsx)(p.a,{variant:"h6",className:r.text,children:"Riepilogo carrello"})}),Object(S.jsx)("div",{style:{flex:1,textAlign:"end"},children:Object(S.jsx)(b.a,{title:"Chiudi carrello",children:Object(S.jsx)(j.a,{onClick:n,children:Object(S.jsx)(O.a,{className:r.icon})})})})]}),0===F.length?Object(S.jsxs)("div",{className:r.contentContainer,children:[Object(S.jsx)(p.a,{variant:"h6",className:Object(y.default)(r.greyText,r.emptyTitleText),children:"IL TUO CARRELLO \xc8 VUOTO!"}),Object(S.jsx)("div",{className:r.emptyCartIconContainer,children:Object(S.jsx)(x.a,{className:r.emptyCartIcon})}),Object(S.jsx)(p.a,{variant:"subtitle1",className:r.greyText,children:"Naviga nello store e aggiungi articoli al tuo carrello."})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:r.contentContainer,children:F.map((function(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(q.a,Object(a.a)(Object(a.a)({},e),{},{handleUpdateProductQty:function(t){return function(e,t){return g(Object(a.a)(Object(a.a)({},e),{},{cartQuantity:t})).then((function(){return U()})).then((function(){return _()}))}(e.rawProduct,t)},handleRemoveProduct:function(e){return function(e){return f(e).then((function(){return U()})).then((function(){return _()}))}(e)}})),Object(S.jsx)(m.a,{style:{width:"90%"}})]},e.cartProductId)}))}),Object(S.jsx)(m.a,{}),Object(S.jsx)("div",{className:r.placeOrderContainer,children:Object(S.jsx)(h.a,{size:"medium",variant:"outlined",color:"secondary",onClick:function(){n(),i.push("/ecommerce/cart/order")},children:"Procedi all'ordine"})}),Object(S.jsxs)("div",{className:r.footerContainer,children:[Object(S.jsx)("div",{className:r.textLeft,children:Object(S.jsx)(p.a,{variant:"h6",className:r.text,children:"Totale"})}),Object(S.jsx)("div",{className:r.grow}),Object(S.jsx)("div",{className:r.textRight,children:Object(S.jsx)(p.a,{variant:"h6",className:r.text,children:Object(C.a)(D)})})]})]})]})})}P.defaultProps={open:!1};var k=n(57),T=n(58),I=n(61),A=s.a.createContext();A.Consumer;function R(e){var t=e.children,n=Object(o.useState)(!1),s=Object(c.a)(n,2),l=s[0],d=s[1],u=Object(o.useState)({}),p=Object(c.a)(u,2),b=p[0],j=p[1],m=Object(o.useContext)(I.a),h=m.isLoaded,f=m.isAuth,O=Object(o.useContext)(T.b),g=(O.ecomSettings,O.sessionData,Object(k.a)()),x=Object(v.a)(),q=x.getUserCart,y=x.getCartList,C=x.addToCart,w=x.removeFromCart,N=x.updateCartProduct,R=x.refreshUserCart,D=x.createOrder,E=Object(o.useState)(!0),L=Object(c.a)(E,2),B=(L[0],L[1]),F=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(null!==t&&void 0!==t?t:null===b||void 0===b?void 0:b.id);case 2:return n=e.sent,e.abrupt("return",Array.isArray(n)?n.length:0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(null===b||void 0===b?void 0:b.id);case 3:t=e.sent,j(Object(a.a)(Object(a.a)({},b),{},{totalItems:t})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){h&&Object(i.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:return t=e.sent,e.next=6,F(null===t||void 0===t?void 0:t.id_UserCart);case 6:n=e.sent,j(Object(a.a)(Object(a.a)({},b),{},{id:null===t||void 0===t?void 0:t.id_UserCart,totalItems:n,userId:t.id_CustomersAndSuppliers})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,B(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()}),[f,h]);var _=function(){return d(!0)},U=function(){return d(!l)};return Object(S.jsxs)(A.Provider,{value:{close:function(){return d(!1)},open:_,toggle:U,isOpen:l,userCart:b,addToCart:function(e,t){return C(null===b||void 0===b?void 0:b.id,e,t).then((function(){return R()})).then(z).then((function(){return _()})).catch((function(e){throw g("Impossibile aggiungere l'oggetto al carrello. Riprovare","error"),e}))},removeFromCart:function(e){return w(e).then((function(){return R()})).then(z).catch((function(e){throw g("Impossibile eliminare l'oggetto dal carrello. Riprovare.","error"),e}))},updateProductQty:function(e){return N(e).then((function(){return R()})).catch((function(e){throw g("Impossibile modificare la quantit\xe0 per l'oggetto selezionato. Riprovare.","error"),e}))},placeOrder:function(){return D().then((function(){return R()})).then(z).catch((function(e){throw g("Impossibile creare l'ordine. Riprovare.","error"),e}))}},children:[h&&Object(S.jsx)(P,{open:l,toggle:U}),t]})}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(7),r=n(5),i=n(4),c=n(0),o=n(111),s=n(253),l=n(193),d=n(1),u=["isLoading","children"],p=Object(o.a)((function(e){return{wrapper:{position:"relative"},buttonProgress:{color:e.palette.secondary,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function b(e){var t=e.isLoading,n=e.children,o=Object(i.a)(e,u),b=p(),j=Object(c.useState)(!1),m=Object(r.a)(j,2),h=m[0],f=m[1],O=t||h;return Object(d.jsxs)("div",{className:b.wrapper,children:[Object(d.jsx)(l.a,Object(a.a)(Object(a.a)({},o),{},{disabled:O||(null===o||void 0===o?void 0:o.disabled),onClick:function(){var e=null===o||void 0===o?void 0:o.onClick;return e&&"function"===typeof e.then?(f(!0),e().finally((function(){return f(!1)}))):"function"===typeof e?e():void console.warn("Button onClick not fired")},children:n})),O&&Object(d.jsx)(s.a,{size:24,className:b.buttonProgress})]})}},217:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(15),r=function(e){return 0===Object.keys(e).length};function i(){return JSON.parse(localStorage.getItem("preferences"))||{}}function c(e,t){var n,a,i,c=JSON.parse(null!==(n=localStorage.getItem("preferences"))&&void 0!==n?n:"{}");if(r(c))return[];var o=null!==(a=c[e])&&void 0!==a?a:{};return r(o)?[]:null!==(i=o[t])&&void 0!==i?i:[]}function o(e,t,n){var c=i();if(r(c)){var o={};o[t]=n,c[e]=o}else{var s,l=null!==(s=c[e])&&void 0!==s?s:{};console.log("branch: ",l),l[t]=Object(a.a)(n),c[e]=l}var d=JSON.stringify(c);localStorage.setItem("preferences",d)}function s(e){3===e.length&&e.pop()}function l(e,t){var n=i(),a=n[e];Reflect.deleteProperty(a,t),r(a)&&(Reflect.deleteProperty(n,e),r(n)&&localStorage.removeItem("preferences")),localStorage.setItem("preferences",JSON.stringify(n))}function d(e,t){return e.length>t?e.substring(0,t-3).concat("..."):e}},219:function(e,t,n){"use strict";(function(e){var a=n(7),r=n(4),i=(n(0),n(50)),c=n(35),o=n(58),s=n(232),l=n(124),d=n(1),u=["component"];t.a=function(t){var n=t.component,p=Object(r.a)(t,u);return Object(d.jsx)(i.b,Object(a.a)(Object(a.a)({},p),{},{render:function(t){return Object(d.jsx)(o.a,{children:function(r){var o,u,p=r.isAuth,b=r.isLoaded,j=r.error;return b?j&&"development"!==(null===(o=e)||void 0===o||null===(u=Object({NODE_ENV:"production",PUBLIC_URL:"/portaledef",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===u?void 0:u.NODE_ENV)?Object(d.jsx)(l.a,{children:Object(d.jsx)(c.a,{variant:"body1",color:"error",children:j})}):p?Object(d.jsx)(n,Object(a.a)({},t)):Object(d.jsx)(i.a,{to:{pathname:"/login",state:{from:t.location}}}):Object(d.jsx)(s.a,{})}})}}))}}).call(this,n(418))},232:function(e,t,n){"use strict";n(0);var a=n(253),r=n(124),i=n(1);t.a=function(){return Object(i.jsx)(r.a,{children:Object(i.jsx)(a.a,{})})}},239:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(5),r=n(0),i=n.n(r),c=n(1),o=i.a.createContext();o.Consumer;function s(e){var t=e.children,n=Object(r.useState)(!1),i=Object(a.a)(n,2),s=i[0],l=i[1];return Object(c.jsx)(o.Provider,{value:{isLoading:s,setLoading:l},children:t})}},240:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(5),r=n(0),i=n(1),c=Object(r.createContext)({isLoading:!1,handleINFormLoader:function(){}}),o=function(e){var t=e.children,n=Object(r.useState)(!1),o=Object(a.a)(n,2),s=o[0],l=o[1];return Object(i.jsx)(c.Provider,{value:{isLoading:s,handleINFormLoader:function(e){l(e)}},children:t})}},246:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(7),r=n(4),i=n(0),c=n.n(i),o=n(1),s=["children"],l=c.a.createContext();function d(e){var t=e.children,n=Object(r.a)(e,s);return Object(o.jsx)(l.Provider,{value:Object(a.a)({},n),children:t})}},248:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(111),r=n(692),i=n(35),c=(n(0),n(675)),o=n.n(c),s=n(191),l=n(106),d=n(107),u=n(1),p=Object(a.a)((function(e){return{appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),height:"100%"},greyText:{color:s.a[600]},emptyCategoryIcon:{fontSize:100,color:s.a[600]},emptyContentContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",paddingTop:e.spacing(8)}}}));function b(){var e=p();return Object(u.jsxs)("div",{className:e.root,children:[Object(u.jsx)(l.a,{title:"Pagina non trovata"}),Object(u.jsx)(d.a,{}),Object(u.jsxs)("main",{className:e.content,children:[Object(u.jsx)("div",{className:e.appBarSpacer}),Object(u.jsx)(r.a,{maxWidth:"lg",className:e.container,children:Object(u.jsxs)("div",{className:e.emptyContentContainer,children:[Object(u.jsx)(o.a,{className:e.emptyCategoryIcon}),Object(u.jsx)(i.a,{variant:"subtitle1",className:e.greyText,children:"La pagina richiesta non \xe8 stata trovata."})]})})]})]})}},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var a=n(5),r=n(0),i=n(111),c=n(691),o=n(1032),s=n(1034),l=n(1033),d=n(35),u=n(192),p=n(40),b=n(138),j=n(1107),m=n(303),h=n(567),f=n(302),O=n(397),g=n.n(O),x=n(253),v=n(238),q=n(151),y=n(61),C=n(150),w=n(57),S=(n(179),n(1)),N=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"flex-end"},wrapper:{margin:e.spacing(1),position:"relative"},fabProgress:{color:v.a[500],position:"absolute",top:-1,left:-2,zIndex:1}}}));function P(e){var t=e.productId,n=e.show,i=N(),c=0,o=Object(r.useState)(!1),s=Object(a.a)(o,2),l=s[0],d=s[1],u=Object(r.useContext)(y.a).isAuth,p=Object(r.useContext)(q.a).addToCart,b=Object(C.a)(),O=Object(w.a)();return Object(S.jsx)("div",{className:i.root,children:Object(S.jsx)(j.a,{in:n||l,children:Object(S.jsx)("div",{className:i.wrapper,children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(m.a,{type:"number",style:{width:50},disabled:l,onChange:function(e){c=e.target.value}}),Object(S.jsx)(h.a,{title:"Aggiungi al carrello","aria-label":"Aggiungi al carrello",children:Object(S.jsx)(f.a,{disabled:l,onClick:function(e){e.preventDefault(),e.stopPropagation(),l||(u?(d(!0),p(t,c<=0?1:c).catch((function(){return O("Impossibile aggiungere l'elemento al carrello","error")})).finally((function(){return d(!1)}))):b())},children:Object(S.jsx)(g.a,{})})}),l&&Object(S.jsx)(x.a,{size:48,thickness:2,className:i.fabProgress})]})})})})}var k=n(109),T=n(31),I=Object(i.a)((function(e){return{root:{maxWidth:280,minWidth:280,height:320},link:{textDecoration:"none"},cardDescriptionContainer:{display:"flex",alignItems:"center"},priceContainer:{flex:1},addToCartButtonContainer:{flex:1,alignSelf:"center",textAlign:"end"},media:{height:180,width:"100%",objectFit:"scale-down",padding:e.spacing(2)}}}));function A(e){var t=e.title,n=e.price,i=e.imageURL,j=e.available,m=e.productId,h=e.addToCart,f=e.id_firstsize,O=e.id_firstcolor,g=e.firstcodtot,x=I(),v=Object(r.useState)(!1),q=Object(a.a)(v,2),y=(q[0],q[1],Object(r.useState)(!1)),C=Object(a.a)(y,2),w=C[0],N=(C[1],Object(r.useState)([])),A=Object(a.a)(N,2);A[0],A[1],Object(T.a)().getProductOptions;return Object(S.jsx)(c.a,{in:!0,timeout:250,children:Object(S.jsxs)(o.a,{className:x.root,children:[Object(S.jsx)(p.b,{to:"/ecommerce/product/".concat(m,"?option=").concat(f,"&variant=").concat(O),className:x.link,children:Object(S.jsx)(s.a,{className:x.media,image:i||b.a,title:t,component:"img"})}),Object(S.jsxs)(l.a,{children:[Object(S.jsx)(d.a,{color:"textSecondary",variant:"body2",children:t}),Object(S.jsx)(d.a,{style:{paddingTop:"0px",paddingBottom:"0px",color:"#007600",fontSize:"10pt"},children:j?"Disponibile":Object(S.jsx)(u.a,{fontStyle:"italic",children:"Non disponibile"})}),Object(S.jsxs)("div",{className:x.cardDescriptionContainer,children:[Object(S.jsx)("div",{className:x.priceContainer,children:Object(S.jsx)(d.a,{variant:"h6",color:"textPrimary",children:Object(k.a)(n)})}),h&&Object(S.jsx)("div",{className:x.addToCartButtonContainer,children:!w&&Object(S.jsx)(P,{productId:g,show:!0})})]})]})]})})}A.defaultProps={imageURL:b.a,title:"",price:0,available:!0,productId:1,addToCart:!0}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(30),r=n(33),i=n(56),c=n(71),o=n(403),s=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,a){var i;return Object(r.a)(this,n),(i=t.call(this,e)).error=a,i}return Object(a.a)(n)}(Object(o.a)(Error))},31:function(e,t,n){"use strict";(function(e){var a=n(47),r=n(10),i=n(20),c=n(7),o=n(5),s=n(0),l=n(252),d=n.n(l),u=n(58),p=n(239),b=n(240),j=n(57),m=n(300),h=n(415),f=function(e){var t=e.split("?"),n=Object(o.a)(t,2),a=n[0],r=n[1],i={};return r?(r.split("::").map((function(e){var t=e.split("="),n=Object(o.a)(t,2),a=n[0],r=n[1];return i[a]=r,e})),[a,i]):[a,i]};t.a=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=Object(s.useContext)(u.b),O=l.sessionData,g=l.baseURL,x=l.isAuth,v=l.logout,q=Object(s.useContext)(p.a),y=q.setLoading,C=Object(s.useContext)(b.a),w=C.handleINFormLoader,S=Object(j.a)(),N=Object(s.useState)(!1),P=Object(o.a)(N,2),k=P[0],T=P[1],I=Object(s.useMemo)((function(){return d.a.create({baseURL:g,paramsSerializer:function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("::")}})}),[g,x,O]);Object(s.useEffect)((function(){t?y(k):w&&w(k)}),[k]),Object(s.useEffect)((function(){console.log("Registering API Interceptors");var e=I.interceptors.request.use((function(e){return T(!0),x&&(e.params=Object(c.a)(Object(c.a)({},O),e.params)),console.log("Making API Request to ".concat(e.baseURL,"/").concat(e.url," params ").concat(JSON.stringify(e.params))),e}),(function(e){return n&&S("Errore del server. Riprovare.","error"),T(!1),Promise.reject(e)})),t=I.interceptors.response.use((function(e){return T(!1),console.log("Got response data",e),200===e.status&&"string"===typeof e.data&&(e.data.includes("UNAUTHORIZED")||e.data.includes("session not exist"))?(console.log("Got unauthorized 401"),void v()):e}),(function(e){var t;if(T(!1),401===(null===(t=e.response)||void 0===t?void 0:t.status))return console.log("Got unauthorized 401"),v(),void Promise.reject(e);n&&S("Errore del server. Riprovare.","error"),Promise.reject(e)}));return function(){console.log("Removing axios interceptors"),I.interceptors.request.eject(e),I.interceptors.response.eject(t)}}),[I,x]);var A=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.d)(I,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("get_users_of_inceptiumid");case 3:return t=e.sent,n=t.data,a=n.map((function(e){return{id:e.id_WebUsers,description:e.description,isOnline:"CONNECTED"===e.user_connected_status,type:e.user_profile,email:e.user_email,name:e.user_name,surname:e.user_surname,fullName:"".concat(e.user_name," ").concat(e.user_surname),username:e.user}})),e.abrupt("return",Promise.resolve(a));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],e.prev=1,e.next=4,I.get("get_user_by_login",{params:{user_login:t}});case 4:if(a=e.sent,i=a.data,n){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",{id:i.id_WebUsers,description:i.description,isOnline:"CONNECTED"===i.user_connected_status,type:i.user_profile,email:i.user_email,password:i.password,name:i.user_name,surname:i.user_surname,fullName:"".concat(i.user_name," ").concat(i.user_surname),username:i.user});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=Object(i.a)(Object(r.a)().mark((function t(n){var a,i,c,o,s,l,d,u,p,b,j,m;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.username,i=n.password,c=n.type,o=n.email,s=n.description,l=n.name,d=n.surname,t.next=3,D(a,!1);case 3:return(u=t.sent).description=s||u.description,u.user_email=o||u.user_email,u.user_name=l||u.user_name,u.user_surname=d||u.user_surname,u.user_type=c||u.user_type,u.user_profile=c||u.user_profile,u.password=i||u.password,u.user=a||u.user,p=JSON.stringify(u),b=e.from(p).toString("base64"),t.prev=14,t.next=17,I.get("update_user_of_inceptium_id",{params:{jsondata:b}});case 17:return j=t.sent,m=j.data,t.abrupt("return",Promise.resolve(m));case 22:return t.prev=22,t.t0=t.catch(14),t.abrupt("return",Promise.reject(t.t0));case 25:case"end":return t.stop()}}),t,null,[[14,22]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,i=t.type,e.prev=1,e.next=4,I.get("add_user_to_inceptiumid",{params:{new_user:n,new_user_password:a,new_user_type:"user",user_profile:i}});case 4:if(c=e.sent,o=c.data,Array.isArray(o)&&1===o.length){e.next=10;break}if(!o||!o.toLowerCase().includes("exists")){e.next=9;break}throw new new m.a("L'utente ".concat(n," esiste gi\xe0."),{username:"Questo utente esiste gi\xe0."});case 9:throw new Error("Impossibile aggiungere l'utente");case 10:return e.abrupt("return",E(t));case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("delete_user_of_inceptiumid",{params:{id_web_user:t}});case 3:return n=e.sent,a=n.data,e.abrupt("return",Promise.resolve(a));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("get_apps_inceptiumid");case 3:return t=e.sent,n=t.data,e.abrupt("return",Promise.resolve(n));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var t=Object(i.a)(Object(r.a)().mark((function t(n,a,i,o){var s,l,d,u,p;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={},a&&(l=e.from("where ".concat(a)).toString("base64"),s["filter.b64"]=l),i&&(d=e.from("".concat(i)).toString("base64"),s["order.b64"]=d),t.prev=3,t.next=6,I.get("callappcommand",{params:Object(c.a)(Object(c.a)(Object(c.a)({command:"getrecords",class:n},s),o||{}),{},{INFilter:"eyJzZWFyY2h3b3JkIjoiaW5jZXB0aXVtIiwibGlzdGZpbHRlciI6W3sicGFyYW1OYW1lIjoiVGlwbyBNb3ZpbWVudGkiLCJwYXJhbVZhbHVlIjoiVGVzdCJ9XX0="})});case 6:if(u=t.sent,""!==(p=u.data)){t.next=10;break}return t.abrupt("return",[]);case 10:return t.abrupt("return",Promise.resolve(p));case 13:return t.prev=13,t.t0=t.catch(3),t.abrupt("return",Promise.reject(t.t0));case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,n,a,r){return t.apply(this,arguments)}}(),_=function(){var t=Object(i.a)(Object(r.a)().mark((function t(n,a,i,o,s){var l,d,u,p,b,j;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l={},a&&(d=e.from("where ".concat(a)).toString("base64"),l["filter.b64"]=d),i&&(u=e.from("".concat(i)).toString("base64"),l["order.b64"]=u),s&&(p=e.from(s).toString("base64"),l.INFilter=p),t.prev=4,t.next=7,I.get("callappcommand",{params:Object(c.a)(Object(c.a)({command:"getrecords",class:n},l),o||{})});case 7:if(b=t.sent,""!==(j=b.data)){t.next=11;break}return t.abrupt("return",[]);case 11:return t.abrupt("return",Promise.resolve(j));case 14:return t.prev=14,t.t0=t.catch(4),t.abrupt("return",Promise.reject(t.t0));case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,n,a,r,i){return t.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){var a,i,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={command:"getsinglerecord",class:t},n&&(a.id=n),e.prev=2,e.next=5,I.get("callappcommand",{params:Object(c.a)({},a)});case 5:if(i=e.sent,""!==(o=i.data)){e.next=9;break}return e.abrupt("return");case 9:return e.abrupt("return",Promise.resolve(o));case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c,o,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("load_app",{params:{classapp:t}});case 3:n=e.sent,a=n.data,console.log("App is loading with taskid",a);case 6:return e.next=9,I.get("get_task_status",{params:{taskid:a}});case 9:if(c=e.sent,o=c.data,i=o.newEventFromTask,"TASK_END"!==(s=o.currentStatus)){e.next=17;break}return e.abrupt("break",25);case 17:if("TASK_RUNNING"!==s){e.next=22;break}return e.next=20,Object(h.a)(1e3);case 20:e.next=23;break;case 22:throw new Error("Task failed");case 23:e.next=6;break;case 25:return console.log("App loaded "+i),e.abrupt("return",i);case 29:e.prev=29,e.t0=e.catch(0),console.error(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t);case 3:return n=e.sent,e.next=6,I.get("get_app_dock",{params:{classapp:t}});case 6:return a=e.sent,i=a.data,c=i.menu_list,e.abrupt("return",Promise.resolve({menu:c,newevent:n}));case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c,s,l,d,u,p,b=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=f(t),a=Object(o.a)(n,2),i=a[0],c=a[1],e.prev=1,s=b.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=b[d];return e.next=5,I.get(i,{params:Object.assign.apply(Object,[c].concat(l))});case 5:return u=e.sent,p=u.data,e.abrupt("return",Promise.resolve(p));case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("callappcommand",{params:Object(c.a)({command:"addnewrecord",class:t},n)});case 3:return a=e.sent,i=a.data,e.abrupt("return",Promise.resolve(i));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var t=Object(i.a)(Object(r.a)().mark((function t(n,a){var i,c,o,s,l,d,u,p,b,j=arguments;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=!(j.length>2&&void 0!==j[2])||j[2],c=JSON.stringify(a),o=e.from(c).toString("base64"),t.prev=3,t.next=6,I.get("callappcommand",{params:{command:"updaterecord",persist:i,class:n,"jsondata.b64":o}});case 6:if(s=t.sent,"string"!==typeof(l=s.data)){t.next=37;break}if(!l.includes("SQL_UPDATE_ERROR")){t.next=11;break}return t.abrupt("return",Promise.reject(new Error("SQL_UPDATE_ERROR")));case 11:if(!l.includes("SQL_UPDATE_CANCEL")){t.next=24;break}d=l.replace("SQL_UPDATE_CANCEL",""),u={},t.prev=14,u=JSON.parse(d),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(14),console.error("Cannot parse response",d);case 21:return t.prev=21,t.abrupt("return",Promise.reject({error:"SQL Update canceled",action:u}));case 24:if(!l.includes("SQL_UPDATE_SUCCESS")){t.next=37;break}p=l.replace("SQL_UPDATE_SUCCESS",""),b={},t.prev=27,b=JSON.parse(p),t.next=34;break;case 31:t.prev=31,t.t1=t.catch(27),console.error("Cannot parse response",p);case 34:return t.prev=34,t.abrupt("return",Promise.resolve(b));case 37:return t.abrupt("return",Promise.resolve(l));case 40:return t.prev=40,t.t2=t.catch(3),t.abrupt("return",Promise.reject(t.t2));case 43:case"end":return t.stop()}}),t,null,[[3,40],[14,18,21,24],[27,31,34,37]])})));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("callappcommand",{params:{command:"deleterecord",class:t,id:n}});case 3:return e.abrupt("return",Promise.resolve());case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.post(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U("com.eterea.data.registry.articles.ArticlesRegistry",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.articles.ArticlesRelativeLink","codTot='".concat(t,"' AND linkType='").concat(n,"'")));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.indoc.data.documentary.QDocumentary","class_TableRef='com.eterea.data.registry.articles.ArticlesRegistry' AND id_record_Ref='".concat(t,"'")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,i,c,o,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("com.eterea.data.registry.articles.ArticlesSizes","id_ArticlesRegistry='".concat(t,"'"));case 3:return i=e.sent,e.next=6,z("com.eterea.data.registry.articles.QArticlesRegistrySizeColor","id_ArticlesRegistry='".concat(t,"'"));case 6:return c=e.sent,o=i.map((function(e){var t;return{label:e.description,id:e.id_ArticlesSizes,variants:null===(t=c.filter((function(t){return t.id_ArticlesSizes===e.id_ArticlesSizes})))||void 0===t?void 0:t.map((function(e){return{label:e.articleColorDes,productCode:e.codTot,id:e.id_QArticlesRegistrySizeColor,price:e.sellingPriceTotVat}}))}})),s=i.length>1||(null===i||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.variants)||void 0===a?void 0:a.length)>1,e.abrupt("return",{hasMultipleOptions:s,options:o});case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error fetching product variants",e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q("com.eterea.data.cart.UserCartList",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("com.eterea.data.cart.UserCartList",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,a=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1?a[1]:void 0,e.abrupt("return",z("com.eterea.data.registry.articles.QArticlesCategoryEC","id_Father = '".concat(t,"'"),null,n));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.articles.FeaturesRegistry","exposeOnWeb=true","order by progressiveOrder",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.articles.QArticlesCategoryEC","categoryFullPathCode = '".concat(t,"'"),null));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.articles.QArticleRegistryIstant",t?"articlesCategoryCode like '".concat(t,"%'"):null,null,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.articles.QArticleRegistryIstant",t?" (".concat(ce("ac.categoryFullPathDescription",t)," or ").concat(ce("ar.description",t)," ) or id_FeaturesRegistry='").concat(t,"'"):null,null,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(e,t){var n,r=t.split(" ").values(),i="",c=Object(a.a)(r);try{for(c.s();!(n=c.n()).done;){var o=n.value;i+=" and ".concat(e," like '%").concat(o,"%' ")}}catch(s){c.e(s)}finally{c.f()}return i="("+i.replace("and","")+")",console.log(i),i},oe=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("com.eterea.data.cart.UserCart");case 3:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===t;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=t[0];case 12:if(n=e.t2){e.next=15;break}throw new Error("Cannot get user cart");case 15:return e.abrupt("return",Promise.resolve(n));case 18:return e.prev=18,e.t3=e.catch(0),e.abrupt("return",Promise.reject(e.t3));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return n=e.sent,e.next=6,H("com.eterea.data.cart.UserCart",Object(c.a)(Object(c.a)({},n),{},{codPaymentType:t}),!0);case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return n=e.sent,e.next=6,H("com.eterea.data.cart.UserCart",Object(c.a)(Object(c.a)({},n),{},{id_PersonShippingAddress:t}),!0);case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return t=e.sent,e.next=6,H("com.eterea.data.cart.UserCart",t,!0);case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("com.eterea.data.cart.UserCartList","id_UserCart = '".concat(t,"'"));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U("com.eterea.data.registry.person.CustomersAndSuppliers",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("com.eterea.data.registry.person.PersonShippingAddress","id_CustomersAndSuppliers = '".concat(t,"'")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){return z("com.eterea.data.cart.UserCartPaymentType")},me=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n,a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("callappcommand",{params:{command:"executemethod",class:"com.eterea.data.cart.UserCart",method:"_addNewArticle",id_UserCart:t,codTot:n,quantity:a}});case 3:return e.abrupt("return",Promise.resolve());case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,a,i,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("callappcommand",{params:{command:"executemethod",class:"com.eterea.data.cart.action.Action_CreateOrder",method:"_executeAction"}});case 3:t=e.sent,n=t.data;case 5:return e.next=8,I.get("get_task_status",{params:{taskid:n}});case 8:if(a=e.sent,i=a.data,"TASK_END"!==(c=i.currentStatus)){e.next=15;break}return e.abrupt("break",23);case 15:if("TASK_RUNNING"!==c){e.next=20;break}return e.next=18,Object(h.a)(1e3);case 18:e.next=21;break;case 20:throw new Error("Task failed");case 21:e.next=5;break;case 23:return e.abrupt("return",Promise.resolve());case 26:return e.prev=26,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n,a){var i,s,l,d,u,p,b,j,m;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),i=f(t),s=Object(o.a)(i,2),l=s[0],d=s[1],e.prev=2,e.next=5,I.get(l,{params:Object(c.a)(Object(c.a)({},d),n)});case 5:if(u=e.sent,p=u.data,a){e.next=10;break}return T(!1),e.abrupt("return",Promise.resolve());case 10:return e.next=13,I.get("get_task_status",{params:{taskid:p}});case 13:if(b=e.sent,j=b.data,"TASK_END"!==(m=j.currentStatus)){e.next=20;break}return e.abrupt("break",28);case 20:if("TASK_RUNNING"!==m){e.next=25;break}return e.next=23,Object(h.a)(1e3);case 23:e.next=26;break;case 25:throw new Error("Task failed");case 26:e.next=10;break;case 28:return T(!1),e.abrupt("return",Promise.resolve(b.data));case 32:return e.prev=32,e.t0=e.catch(2),T(!1),e.abrupt("return",Promise.reject(e.t0));case 36:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(t,n,a){return e.apply(this,arguments)}}();return{login:A,startApp:M,loadApp:W,getApps:F,getUsers:R,addUser:L,getUser:D,deleteUser:B,updateUser:E,getRecords:z,getRecord:U,get:G,createRecord:V,updateRecord:H,deleteRecord:Q,executeCommand:fe,uploadResource:J,isLoading:k,getUserCart:oe,refreshUserCart:de,getCartList:ue,addToCart:me,removeFromCart:$,updateCartProduct:ee,getProducts:re,getProductsByName:ie,getCategories:te,getCategory:ae,getFeaturesRegistry:ne,getProductDetails:K,getProductOptions:Z,getUserShippingAddresses:be,getUserData:pe,getPaymentMethods:je,updateCartPaymentMethod:se,updateCartShippingAddress:le,getProductMedia:X,getProductDocumentary:Y,createOrder:he,demoSearch:_}}}).call(this,n(266).Buffer)},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return o}));var a="ROW",r="FILTER",i="ORDERING",c="SEARCHSTRING",o="PAGE"},363:function(e,t,n){"use strict";var a=n(686);t.a=Object(a.a)((function(e){e("manage","User")}))},395:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(5),r=n(0),i=n(111),c=n(253),o=n(1034),s=n(35),l=n(303),d=n(138),u=n(109),p=n(207),b=n(1),j=Object(i.a)((function(e){return{media:{height:130,width:"100%",maxWidth:130,objectFit:"scale-down",paddingRight:e.spacing(3)}}}));function m(e){var t=e.title,n=e.imageURL,i=e.price,m=e.quantity,h=e.cartProductId,f=e.option,O=e.variant,g=e.hasOptionVariant,x=e.handleRemoveProduct,v=e.handleUpdateProductQty,q=e.deleteProduct,y=void 0===q||q,C=j(),w=Object(r.useState)(!1),S=Object(a.a)(w,2),N=S[0],P=S[1];return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",padding:"24px",position:"relative"},children:[N&&Object(b.jsx)("div",{style:{position:"absolute",top:"40%",left:"50%"},children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(o.a,{className:C.media,image:n||d.a,title:t,component:"img"}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(b.jsx)(s.a,{color:"textPrimary",gutterBottom:!0,variant:"subtitle2",children:t}),g&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(s.a,{color:"textSecondary",variant:"body2",children:["Variante: ",f," - ",O]})}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"8px",alignItems:"center"},children:[Object(b.jsx)(s.a,{color:"textSecondary",variant:"subtitle1",children:"Quantit\xe0"}),Object(b.jsx)("div",{style:{flexGrow:1}}),Object(b.jsx)(l.a,{type:"number",style:{width:50},disabled:N,value:m,onChange:function(e){P(!0);var t=e.target.value;v(t).finally((function(){return P(!1)}))},onKeyDown:function(e){return e.preventDefault()},inputProps:{min:"1",step:"1",style:{textAlign:"center "}}})]}),Object(b.jsxs)("div",{style:{flexDirection:"row",display:"flex",marginTop:"16px",alignItems:"center"},children:[y&&Object(b.jsx)(p.a,{disabled:N,color:"primary",onClick:function(){P(!0),x(h).catch((function(){return P(!1)}))},style:{padding:0},children:"Rimuovi"}),Object(b.jsx)("div",{style:{flexGrow:1}}),Object(b.jsx)(s.a,{variant:"subtitle1",color:"textPrimary",children:Object(u.a)(i)})]})]})]})}},398:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(111),r=n(488),i=n(253),c=(n(0),n(1)),o=Object(a.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function s(){var e=o();return Object(c.jsx)(r.a,{className:e.backdrop,open:!0,children:Object(c.jsx)(i.a,{color:"inherit"})})}},404:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return N}));var a=n(5),r=n(0),i=n.n(r),c=n(111),o=n(238),s=n(565),l=n(1088),d=n(302),u=n(373),p=n.n(u),b=n(640),j=n.n(b),m=n(642),h=n.n(m),f=n(643),O=n.n(f),g=n(641),x=n.n(g),v=n(1031),q=n(1),y=Object(c.a)((function(e){return{close:{padding:e.spacing(.5)},success:{backgroundColor:o.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:s.a[700]},icon:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),C={success:j.a,warning:x.a,error:h.a,info:O.a},w=function(e){var t=e.isVisible,n=e.hide,a=e.message,r=e.type,i=y(),c=C[r],o=function(e,t){"clickaway"!==t&&n()};return t&&Object(q.jsx)(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:5e3,onClose:o,children:Object(q.jsx)(v.a,{className:i[r],"aria-describedby":"client-snackbar",message:Object(q.jsxs)("span",{id:"client-snackbar",className:i.message,children:[Object(q.jsx)(c,{className:i.icon}),a]}),action:[Object(q.jsx)(d.a,{"aria-label":"close",color:"inherit",onClick:o,children:Object(q.jsx)(p.a,{className:i.icon})},"close")]})})},S=i.a.createContext();S.Consumer;function N(e){var t=e.children,n=Object(r.useState)(!1),i=Object(a.a)(n,2),c=i[0],o=i[1],s=Object(r.useState)({message:"",type:"info"}),l=Object(a.a)(s,2),d=l[0],u=l[1],p=function(){return o(!1)};return Object(q.jsxs)(S.Provider,{value:{isVisible:c,hide:p,show:function(e,t){u({message:e,type:t||d.type}),o(!0)},message:d.message},children:[Object(q.jsx)(w,{isVisible:c,hide:p,message:d.message,type:d.type}),t]})}},415:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var a=n(9),r=n(7),i=n(5),c=n(4),o=n(0),s=n.n(o),l=n(1),d=["children"],u=s.a.createContext();u.Consumer;function p(e){var t=e.children,n=Object(c.a)(e,d),s=Object(o.useState)({}),p=Object(i.a)(s,2),b=p[0],j=p[1];return Object(l.jsx)(u.Provider,{value:Object(r.a)({setData:function(e,t,n){if(!e&&!n)throw new Error("Cannot set component data without id or object");j(n?Object(r.a)(Object(r.a)({},b),n):null===t?Object(r.a)(Object(r.a)({},b),{},Object(a.a)({},e,null)):Object(r.a)(Object(r.a)({},b),{},Object(a.a)({},e,Object(r.a)(Object(r.a)({},b[e]),{},{data:t}))))},setComponentData:j,componentData:b},n),children:t})}},57:function(e,t,n){"use strict";var a=n(0),r=n(404);t.a=function(){return Object(a.useContext)(r.a).show}},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return O}));var a=n(7),r=n(10),i=n(20),c=n(5),o=n(0),s=n.n(o),l=n(363),d=n(252),u=n.n(d),p=n(50),b=n(300),j=n(1),m=s.a.createContext(),h=m.Consumer;function f(e){var t=e.baseURL,n=e.children,s=Object(o.useState)({inceptiumid:localStorage.getItem("inceptiumid"),user:localStorage.getItem("user"),password:localStorage.getItem("password"),session:localStorage.getItem("session")}),d=Object(c.a)(s,2),b=d[0],h=d[1],f=Object(p.h)(),g=function(e){var t=e.session,n=e.inceptiumid,a=e.user,r=e.password,i=e.type,c=e.disabled;localStorage.setItem("session",t),localStorage.setItem("inceptiumid",n),localStorage.setItem("user",a),localStorage.setItem("password",r),localStorage.setItem("type",i),h({session:t,inceptiumid:n,user:a,password:r,type:i,disabled:c}),y(!0)},x=Object(o.useState)(!1),v=Object(c.a)(x,2),q=v[0],y=v[1],C=Object(o.useState)(!1),w=Object(c.a)(C,2),S=w[0],N=w[1],P=Object(o.useState)(),k=Object(c.a)(P,2),T=k[0],I=k[1],A=Object(o.useState)(),R=Object(c.a)(A,2),D=R[0],E=R[1],L=Object(o.useState)({}),B=Object(c.a)(L,2),F=B[0],z=B[1],_=Object(o.useState)({}),U=Object(c.a)(_,2),W=(U[0],U[1]),M=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("session"),localStorage.removeItem("inceptiumid"),localStorage.removeItem("user"),localStorage.removeItem("password"),localStorage.removeItem("type"),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var n,a,i,c,o,s,d,p,b,j,m,h,O;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/"!==f.pathname?t.replace(f.pathname,"").replace(f.search,""):t,"assets/config/default.json"),console.log("Fetching configuration from",a),e.prev=2,e.next=5,u.a.get(a);case 5:if((i=e.sent).data&&null!==(c=i)&&void 0!==c&&null!==(o=c.data)&&void 0!==o&&o.baseURL){e.next=8;break}throw new Error("Invalid json supplied");case 8:i=i.data,console.log("Using remote configuration",i),E(null===(s=i)||void 0===s?void 0:s.baseURL),z(null===(d=i)||void 0===d?void 0:d.ecom),W(null===(p=i)||void 0===p?void 0:p.ecom.inceptiumid),localStorage.setItem("inceptiumid",null===(b=i)||void 0===b?void 0:b.ecom.inceptiumid),e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(2),new Error("Failed to fetch server configuration from ".concat(a));case 19:if(j=[],q&&("admins"===localStorage.getItem("type")&&(j=[{subject:"User",actions:"manage"}]),l.a.update(j)),m=null!==localStorage.getItem("session"),y(m),null!==(n=i)&&void 0!==n&&n.ecom){e.next=26;break}return console.log("Not logging ecommerce due to empty config"),e.abrupt("return");case 26:return e.prev=26,e.next=29,V(m,!0,null===(h=i)||void 0===h?void 0:h.ecom,null===(O=i)||void 0===O?void 0:O.baseURL);case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),new Error("Failed to authenticate guest user on ecommerce portal");case 34:case"end":return e.stop()}}),e,null,[[2,16],[26,31]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){G().then((function(){return console.log("Configuration loaded")})).catch((function(e){return I(e.message)})).finally((function(){return N(!0)}))}),[]),Object(o.useEffect)((function(){V(q,S)}),[f]);var V=function(e,t,n,r){if(t&&f.pathname.includes("ecommerce")&&!e){console.log("Authenticating ecommerce");var i=u.a.create({baseURL:r||D,paramsSerializer:function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("::")}}),c=n||F;return O(i,c).then((function(e){return g(Object(a.a)(Object(a.a)({},c),e))}))}return Promise.resolve()};return Object(j.jsx)(m.Provider,{value:{isAuth:q,error:T,setData:g,ecomSettings:F,sessionData:b,logout:M,baseURL:D,isLoaded:S,authEcommerce:V},children:n})}var O=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){var a,i,c,o,s,l,d,u,p,j,m,h;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.inceptiumid,i=n.user,c=n.password,e.prev=1,e.next=4,t.get("get_new_inceptium_session",{params:{inceptiumid:a,user:i,password:c}});case 4:if(o=e.sent,s=o.data,l=/\wsession=(.*)/.exec(s)){e.next=10;break}throw new Error("Got invalid response: ".concat(s));case 10:return d=l[1],e.next=13,t.get("get_user_by_login",{params:{user_login:"admin",inceptiumid:a,user:i,password:c,session:d}});case 13:if(u=e.sent,p=u.data,j=p.user_profile,!(m="true"===(m=p.disabled))){e.next=20;break}return e.abrupt("return",Promise.reject(new b.a("Questo utente \xe8 disabilitato",{user:"Questo utente \xe8 disabilitato"})));case 20:return e.abrupt("return",Promise.resolve({session:d,disabled:m,type:j}));case 23:if(e.prev=23,e.t0=e.catch(1),401!==(null===(h=e.t0.response)||void 0===h?void 0:h.status)){e.next=27;break}return e.abrupt("return",Promise.reject(new b.a("Controlla le credenziali e riprova",{user:"Controlla le credenziali e riprova",password:"Controlla le credenziali e riprova",inceptiumid:"Controlla le credenziali e riprova"})));case 27:return e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t,n){return e.apply(this,arguments)}}()},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(5),r=n(0),i=n.n(r),c=n(58),o=n(31),s=n(1),l=i.a.createContext();l.Consumer;function d(e){var t=e.children,n=Object(r.useContext)(c.b),i=n.isLoaded,d=n.isAuth,u=n.ecomSettings,p=n.sessionData,b=Object(r.useState)(!1),j=Object(a.a)(b,2),m=j[0],h=j[1],f=Object(o.a)().loadApp,O=Object(r.useState)(!1),g=Object(a.a)(O,2),x=g[0],v=g[1],q=p.user===u.user;return Object(r.useEffect)((function(){i&&(m&&h(!1),f("com.eterea.AppEterea").catch(console.error).finally((function(){return h(!0)})))}),[i,q,d]),Object(s.jsx)(l.Provider,{value:{isAuth:d&&!q,showLoginDialog:x,setShowLoginDialog:v,isLoaded:m,settings:u},children:t})}},656:function(e,t,n){"use strict";(function(e){var a=n(5),r=n(0),i=n(45),c=n(35),o=n(111),s=n(657),l=n(214),d=n(658),u=n.n(d),p=n(659),b=n.n(p),j=(n(993),n(179)),m=n.n(j),h=n(1),f=Object(o.a)((function(){return{container:{display:"flex",flexDirection:"column",flex:1,marginTop:"8px",marginBottom:"8px",borderColor:"#001219",borderWidth:2,borderStyle:"solid",padding:"10px"},editor:{flex:1},editorBox:{borderColor:"#F1F1F1",borderWidth:1,borderStyle:"solid"}}}));t.a=function(t){var n=t.editableBox,o=t.label,d=t.defaultValue,p=t.aliasName,j=t.fieldName,O=t.height,g=t.width,x=Object(i.d)({name:j||p}),v=Object(a.a)(x,3),q=v[1],y=v[2],C=Object(i.e)().isSubmitting,w=f(),S=Object(r.useState)(l.EditorState.createEmpty()),N=Object(a.a)(S,2),P=N[0],k=N[1];Object(r.useEffect)((function(){if(q.initialValue){var t=q.initialValue||d,n=b()(e.from(t,"base64").toString());if(n){var a=l.ContentState.createFromBlockArray(n.contentBlocks);k(l.EditorState.createWithContent(a))}}}),[q.initialValue]);var T=Object(r.useCallback)(m.a.debounce((function(t){y.setValue(e.from(u()(Object(l.convertToRaw)(t.getCurrentContent()))).toString("base64"))}),300),[]);return Object(h.jsxs)("div",{className:w.container,children:[Object(h.jsx)("div",{children:Object(h.jsx)(c.a,{variant:"h6",children:o})}),Object(h.jsx)("div",{className:w.editor,children:Object(h.jsx)(s.Editor,{readOnly:!n||C,editorState:P,onEditorStateChange:function(e){k(e),T(e)},editorClassName:w.editorBox,editorStyle:{height:O||"150px",width:g||"100%"}})})]})}}).call(this,n(266).Buffer)},662:function(e,t,n){"use strict";(function(e){var a=n(9),r=n(10),i=n(7),c=n(15),o=n(20),s=n(5),l=n(0),d=n(401),u=n(685),p=n(31),b=n(57),j=n(126),m=n(246),h=n(51),f=n(32),O=n(663),g=n(128);t.a=function(t){var n=t.componentType,x=t.dataSource,v=t.columns,q=t.aliasName,y=t.refINDBpanelAlias,C=t.recordForPage,w=t.viewOnly,S=t.onRowSelect,N=t.comboBox_list,P=Object(l.useContext)(j.b),k=P.uploadFilter,T=P.handleSelectedRowObject,I=P.selectedRowObject,A=Object(l.useContext)(h.a),R=A.setData,D=A.componentData,E=Object(l.useContext)(m.a),L=Object(p.a)(!1),B=(L.getRecords,L.createRecord),F=L.deleteRecord,z=L.updateRecord,_=L.get,U=L.demoSearch,W=Object(b.a)(),M=Object(l.useRef)(null),G=Object(l.useState)(null),V=Object(s.a)(G,2),H=V[0],Q=V[1],J=Object(l.useState)(""),K=Object(s.a)(J,2),X=K[0],Y=K[1],Z=function(e){return Q(e)},$=Object(l.useState)({rowsPerPage:C||100,totalRows:0,page:0}),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],ae=Object(l.useState)(!1),re=Object(s.a)(ae,2),ie=re[0],ce=re[1],oe=Object(l.useState)(null),se=Object(s.a)(oe,2),le=se[0],de=se[1],ue=Object(l.useState)(!1),pe=Object(s.a)(ue,2),be=pe[0],je=pe[1],me=Object(l.useState)([]),he=Object(s.a)(me,2),fe=he[0],Oe=he[1],ge=Object(l.useState)({}),xe=Object(s.a)(ge,2),ve=xe[0],qe=xe[1],ye="INDBTreeView"===n,Ce=x.dataSourceClassName,we=x.dataSourceClassNameForUpdate,Se=x.fieldNamePrimaryKey,Ne=x.fieldNameIDDependedClass,Pe=x.recoversIDFromAlias,ke=x.newRecordCommand,Te=x.selectRecordCommand,Ie=function(){return ke?_(Object(g.a)(ke,D)):B(we)},Ae=function(){var t=Object(o.a)(Object(r.a)().mark((function t(n,a,o,s,l){var d,u,p,b,j,m,h;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(je(!0),!Ne||n||ye){t.next=5;break}return W("Nessun record selezionato","warning"),je(!1),t.abrupt("return",Promise.resolve());case 5:return d=Ne?"".concat(Ne,"='").concat(n||"","'"):"",u=Ee.map((function(e){return"".concat(e.field," LIKE '%").concat(o,"%'")})).join(" OR "),o&&(d=d?"".concat(d," OR ").concat(u):u),p={recordForPage:te.rowsPerPage,page:(null!==a&&void 0!==a?a:te.page)+1},Te?(j=e.from("where ".concat(d)).toString("base64"),m=e.from("".concat(s)).toString("base64"),h=e.from(l).toString("base64"),b=_(Object(g.a)(Te,D),d?{"filter.b64":j}:{},s?{"order.b64":m}:{},p||{},l?{INFilter:h}:{})):b=U(Ce,d,s,p,l),t.abrupt("return",b.then((function(e){var t,r,o=ye&&n?[].concat(Object(c.a)(fe),Object(c.a)(e)):e;return ne(Object(i.a)(Object(i.a)({},te),{},{page:a||0,totalRows:((null===o||void 0===o||null===(t=o[0])||void 0===t?void 0:t.totPage)||0)*((null===o||void 0===o||null===(r=o[0])||void 0===r?void 0:r.recordForPage)||0)||o.length})),Oe(o),e})).catch(console.error).finally((function(){je(!1),Y(o)})));case 11:case"end":return t.stop()}}),t)})));return function(e,n,a,r,i){return t.apply(this,arguments)}}(),Re=function(){var e,t,n=[],a=null!==(e=null===I||void 0===I||null===(t=I[y])||void 0===t?void 0:t[f.a])&&void 0!==e?e:{};return Object.keys(a).forEach((function(e){var t={};t.paramName=e,t.paramValue=a[e],n.push(t)})),n},De=function(e){var t,n={searchword:null!==e&&void 0!==e?e:null===I||void 0===I||null===(t=I[y])||void 0===t?void 0:t[f.e],listfilter:Re()};return JSON.stringify(n)},Ee=v||[];Ee=Ee.map((function(e){var t,n={field:e.columnField,title:e.columnLabel,type:null===(t=e.columnType)||void 0===t?void 0:t.toLowerCase(),customSort:function(){return!0}};switch(null===n||void 0===n?void 0:n.type){case"currency":n.currencySetting={locale:"it-IT",currencyCode:"EUR",minimumFractionDigits:2};break;case"text":n.type="string";break;case"date":case"time":case"datetime":n.render=function(e){var t,a=e[n.field];if(a)return t="date"===n.type?"dd/MM/yyyy":"time"===n.type?"HH:mm":"dd/MM/yyyy HH:mm",Object(d.a)(a,t,{locale:u.a})}}return n}));Object(l.useEffect)((function(){var e,t,n=De();Ae(ye?"":D[Pe],null===I||void 0===I||null===(e=I[y])||void 0===e?void 0:e[f.c],null===I||void 0===I||null===(t=I[y])||void 0===t?void 0:t[f.e],null,n)}),[]),Object(l.useEffect)((function(){N&&k(Object(O.a)(N),y)}),[]);var Le=function(){var e=Object(o.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){F(we,t[Se]).then((function(){return qe({}),R(q,null),Ae(ye?"":D[Pe],te.page)})).catch((function(){W("Impossibile cancellare il record","error"),n()})).finally((function(){return e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(o.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){z(we,t).then((function(){return qe({}),R(q,null),Ae(ye?"":D[Pe],te.page)})).catch((function(){W("Impossibile aggiornare il record","error"),n()})).finally((function(){return e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(o.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Ie().then((function(e){return z(we,Object(i.a)(Object(i.a)({},e),t))})).then((function(){return qe({}),R(q,null),T(y,f.d,null),W("Record creato con successo.","success"),Ae(ye?"":D[Pe],te.page)})).catch((function(){W("Impossibile creare il record","error"),n()})).finally((function(){return e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{selectedRowObject:I,menuAnchor:H,searchFilter:X,tableRef:M,pagination:te,isOpen:ie,isLoading:be,rows:fe,adjustedColumns:Ee,handleMenuAnchor:Z,setOpen:ce,fetchData:Ae,handleRowClick:function(e,t){var n,r,c,o=t[Se]||t.tableData.id;ye&&null!==t&&void 0!==t&&t.father&&!ve[o]&&"update"!==t.tableData.editing&&"delete"!==t.tableData.editing&&Ae(o).then((function(e){if(e.length>0)try{var n;M.current.onTreeExpandChanged(null===t||void 0===t||null===(n=t.tableData)||void 0===n?void 0:n.path)}catch(r){console.log(r)}qe(Object(i.a)(Object(i.a)({},ve),{},Object(a.a)({},o,!0)))}));var s=null===I||void 0===I||null===(n=I[y])||void 0===n||null===(r=n[f.d])||void 0===r||null===(c=r.tableData)||void 0===c?void 0:c.id;if(t.tableData.id===s){var l;if(T(y,f.d,null),!w)R(null,null,(l={},Object(a.a)(l,y,null),Object(a.a)(l,q,null),l));S(null)}else{var d;if(T(y,f.d,t),!w)R(null,null,(d={},Object(a.a)(d,y,o),Object(a.a)(d,q,o),d));S(t)}},searchData:function(e){var t=De(e);Ae(ye?"":D[Pe],0,e,null,t),T(y,f.e,e),T(y,f.d,null),T(y,f.c,0)},handleDeleteRow:Le,handleAddRow:Fe,handleUpdateRow:Be,handleDeleteRecord:function(){F(we,le[Se]).then((function(){de(null),qe({}),R(q,null),T(y,f.e,null),W("Record cancellato con successo","success"),Ae(ye?"":D[Pe],te.page)})).catch((function(e){console.error("Error deleting record",e),W("Errore avvenuto durante la cancellazione del record","error")}))},handleOrderChanged:function(e,t){var n,a,r,i="ORDER BY ".concat(null===(n=Ee[e])||void 0===n?void 0:n.field," ").concat(t.toUpperCase()),c=De();Ae(ye?"":D[Pe],null===I||void 0===I||null===(a=I[y])||void 0===a?void 0:a[f.c],null===I||void 0===I||null===(r=I[y])||void 0===r?void 0:r[f.e],-1===e?null:i,c),T(y,f.b,{orderBy:e,orderDirection:t}),T(y,f.d,null)},buildFilteringObject:De,handleChangePage:function(e,t){var n,a=De();Ae(ye?"":D[Pe],t,null===I||void 0===I||null===(n=I[y])||void 0===n?void 0:n[f.e],null,a),T(y,f.c,t),T(y,f.d,null)},handleRecharge:function(){var e,t=De();Ae(ye?"":D[Pe],te.page,null===I||void 0===I||null===(e=I[y])||void 0===e?void 0:e[f.e],null,t),T(y,f.d,null),qe({})},addRecordHandler:function(){"undefined"!==typeof E?Ie().then((function(e){var t,n=e[Se];R(null,null,(t={},Object(a.a)(t,y,n),Object(a.a)(t,q,n),t)),T(y,f.e,""),T(y,f.d,null),E.showForm(y)})).catch((function(e){return W("Impossibile creare un nuovo record","err")})):console.warn("Cannot handle add action")},editRecordHandler:function(e,t){var n,r=t[Se]||t.tableData.id;w||R(null,null,(n={},Object(a.a)(n,y,r),Object(a.a)(n,q,r),n));T(y,f.d,t),E.showForm(y)},INContextMenuHandler:function(e,t){e.preventDefault(),e.stopPropagation();var n,r=t[Se]||t.tableData.id;w||R(null,null,(n={},Object(a.a)(n,y,r),Object(a.a)(n,q,r),n));T(y,f.d,t);var i=e.currentTarget;Z(i)},handleRemoveRecord:function(e,t){ce(!0),de(t);var n,r=t[Se]||t.tableData.id;w||R(null,null,(n={},Object(a.a)(n,y,r),Object(a.a)(n,q,r),n));T(y,f.d,t)},expandINDBTreeView:function(e,t){var n;t.action.onClick(e,t.data);var a,r,i,c,o,s=null===I||void 0===I||null===(n=I[y])||void 0===n?void 0:n[f.d];s?null===(a=s.tableData)||void 0===a||null===(r=a.childRows)||void 0===r||r.forEach((function(e){var t;null!==(t=e.tableData)&&void 0!==t&&t.isTreeExpanded&&M.current.onTreeExpandChanged(e.tableData.path)})):null===(i=M.current)||void 0===i||null===(c=i.dataManager)||void 0===c||null===(o=c.data)||void 0===o||o.forEach((function(e){var t;null!==(t=e.tableData)&&void 0!==t&&t.isTreeExpanded&&M.current.onTreeExpandChanged(e.tableData.path,!0)}))},handleContextMenu:function(e){var t,n=e[Se]||e.tableData.id;w||R(null,null,(t={},Object(a.a)(t,y,n),Object(a.a)(t,q,n),t));T(y,f.d,e),"undefined"!==typeof E&&E.showForm(y)}}}}).call(this,n(266).Buffer)},663:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){var n={};return Object.keys(e).forEach((function(a){var r,i=e[a];n[i.field]=null!==(r=null===t||void 0===t?void 0:t[i.title])&&void 0!==r?r:"NONE"})),n}},676:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return X}));var a=n(7),r=n(10),i=n(20),c=n(5),o=n(0),s=n.n(o),l=n(111),d=n(692),u=n(50),p=n(40),b=n(1055),j=n(1050),m=n(35),h=n(41),f=n(417),O=n(192),g=n(693),x=n(193),v=n(1032),q=n(1033),y=n(303),C=n(1053),w=n(1047),S=n(1056),N=n(677),P=n.n(N),k=n(394),T=n.n(k),I=n(393),A=n.n(I),R=n(106),D=n(107),E=n(31),L=n(138),B=n(484),F=n(397),z=n.n(F),_=n(398),U=(n(1009),n(109)),W=n(151),M=n(57),G=n(679),V=n(150),H=n(61),Q=n(248),J=(n(1027),n(1)),K=Object(l.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto",backgroundColor:e.palette.common.white},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},appSeparator:{minHeight:e.spacing(10)},selectedButton:{color:e.palette.common.white,backgroundColor:e.palette.primary.main},primaryText:{color:e.palette.text.primary},secondaryText:{color:e.palette.text.secondary}}}));function X(){var t,n,l,N,k,I,F,X,Y,Z,$,ee=Object(o.useContext)(W.a).addToCart,te=Object(o.useState)(!0),ne=Object(c.a)(te,2),ae=ne[0],re=ne[1],ie=Object(o.useState)(),ce=Object(c.a)(ie,2),oe=ce[0],se=ce[1],le=Object(o.useState)([]),de=Object(c.a)(le,2),ue=de[0],pe=de[1],be=Object(o.useState)([]),je=Object(c.a)(be,2),me=je[0],he=je[1],fe=Object(o.useState)(),Oe=Object(c.a)(fe,2),ge=Oe[0],xe=Oe[1],ve=Object(o.useState)(!1),qe=Object(c.a)(ve,2),ye=qe[0],Ce=qe[1],we=Object(o.useState)([]),Se=Object(c.a)(we,2),Ne=Se[0],Pe=Se[1],ke=Object(o.useState)(1),Te=Object(c.a)(ke,2),Ie=Te[0],Ae=Te[1],Re=Object(o.useState)(0),De=Object(c.a)(Re,2),Ee=De[0],Le=De[1],Be=Object(o.useState)([]),Fe=Object(c.a)(Be,2),ze=Fe[0],_e=Fe[1],Ue=Object(o.useState)(!1),We=Object(c.a)(Ue,2),Me=We[0],Ge=We[1],Ve=K(),He=Object(u.i)().id,Qe=Object(u.h)(),Je=Object(u.g)(),Ke=new URLSearchParams(Qe.search).get("option"),Xe=new URLSearchParams(Qe.search).get("variant"),Ye=Object(M.a)(),Ze=Object(V.a)(),$e=Object(o.useContext)(H.a).isAuth,et=Object(E.a)(),tt=et.getProductDetails,nt=et.getProductMedia,at=et.getProductOptions,rt=et.getProductDocumentary,it=et.getCategory,ct=function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var n,a,i,c,o,s,l,d,u,p,b,j,m,h,f,O;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(He);case 3:return l=t.sent,d=l.hasMultipleOptions,u=l.options,p=null===u||void 0===u||null===(n=u.filter((function(e){return e.id===Ke})))||void 0===n||null===(a=n[0])||void 0===a||null===(i=a.variants)||void 0===i||null===(c=i.filter((function(e){return e.id===Xe})))||void 0===c?void 0:c[0],b=null===p||void 0===p?void 0:p.productCode,t.next=10,nt(b,"FOTO");case 10:return j=t.sent,t.next=13,tt(He);case 13:if("string"!==typeof(m=t.sent)||0!==m.length){t.next=17;break}return Ge(!0),t.abrupt("return");case 17:return t.next=19,rt(He);case 19:return h=t.sent,t.next=22,it(m.articlesCategoryCode);case 22:f=t.sent,O=null!==(o=null===f||void 0===f||null===(s=f[0])||void 0===s?void 0:s.categoryFullPathDescription)&&void 0!==o?o:"",Ce(d),pe(u),Array.isArray(j)&&j.length>0?Pe(j.map((function(e){return{original:e.urlLinkDomain,thumbnail:e.urlLinkDomain}}))):Pe([{original:L.a,thumbnail:L.a}]),xe(b),se({title:m.description,price:null===p||void 0===p?void 0:p.price,rating:4,reviewsCount:700,description:e.from(m.note_b64,"base64").toString(),categoryId:m.articlesCategoryCode}),he(h.map((function(t){return{label:t.title,description:e.from(t.description_b64,"base64").toString()}}))),_e(O.split("/")),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(0),console.error(t.t0);case 36:case"end":return t.stop()}}),t,null,[[0,33]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){re(!0),ct().finally((function(){return re(!1)}))}),[He,Ke,Xe]),Me?Object(J.jsx)(Q.a,{}):Object(J.jsxs)("div",{className:Ve.root,children:[Object(J.jsx)(R.a,{title:"Dettagli prodotto"}),Object(J.jsx)(D.a,{}),Object(J.jsxs)("main",{className:Ve.content,children:[Object(J.jsx)("div",{className:Ve.appBarSpacer}),Object(J.jsxs)(d.a,{maxWidth:"xl",className:Ve.container,children:[ae&&Object(J.jsx)(_.a,{}),Object(J.jsxs)(b.a,{"aria-label":"breadcrumb",children:[Object(J.jsx)(j.a,{color:"inherit",to:"/ecommerce/home",component:p.b,children:"Home"}),ze.map((function(e,t){return Object(J.jsx)(m.a,{color:t===ze.length-1?"textPrimary":"textSecondary",style:{paddingTop:"0px",paddingBottom:"5px",color:"#83a2a8",fontSize:"20pt"},children:e},t)}))]}),Object(J.jsxs)(h.a,{container:!0,direction:"column",spacing:2,style:{marginTop:"32px"},children:[Object(J.jsxs)(h.a,{item:!0,xs:!0,container:!0,direction:"row",spacing:3,children:[Object(J.jsx)(h.a,{item:!0,container:!0,xs:5,justifyContent:"center",children:Object(J.jsx)(P.a,{infinite:!1,showNav:!1,useBrowserFullscreen:!1,showPlayButton:!1,onErrorImageURL:L.a,items:Ne,slideDuration:0,showThumbnails:(null===Ne||void 0===Ne||null===(t=Ne[0])||void 0===t?void 0:t.original)!==L.a,renderFullscreenButton:function(e,t){var n;return(null===Ne||void 0===Ne||null===(n=Ne[0])||void 0===n?void 0:n.original)===L.a?null:Object(J.jsx)("button",{type:"button",className:"image-gallery-icon image-gallery-fullscreen-button".concat(t?" active":""),onClick:e,children:t?Object(J.jsx)(A.a,{}):Object(J.jsx)(T.a,{})})}})}),Object(J.jsx)(h.a,{item:!0,container:!0,xs:!0,direction:"column",spacing:2,children:Object(J.jsxs)(h.a,{item:!0,container:!0,xs:!0,direction:"column",spacing:1,children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{variant:"h5",children:null===oe||void 0===oe?void 0:oe.title})}),Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"row",spacing:1,children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(S.a,{size:"small",readOnly:!0,defaultValue:4})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsxs)(m.a,{variant:"body2",className:Ve.secondaryText,children:[null===oe||void 0===oe?void 0:oe.reviewsCount," recensioni"]})})]}),Object(J.jsx)(f.a,{}),Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"row",spacing:1,style:{paddingTop:"16px"},children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,style:{paddingTop:"8px"},children:"Prezzo"})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsxs)(m.a,{component:"div",variant:"h6",children:[Object(J.jsx)(O.a,{fontWeight:"fontWeightMedium",className:Ve.primaryText,children:Object(U.a)(null===oe||void 0===oe?void 0:oe.price)}),Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,children:"IVA inclusa"})]})})]}),ye&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"column",spacing:1,style:{paddingTop:"24px"},children:[Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"row",spacing:1,children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,children:"Opzione"})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{component:"div",variant:"body2",className:Ve.primaryText,children:Object(J.jsx)(O.a,{fontWeight:"fontWeightMedium",children:null===ue||void 0===ue||null===(n=ue.filter((function(e){return e.id===Ke})))||void 0===n||null===(l=n[0])||void 0===l?void 0:l.label})})})]}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(g.a,{size:"small","aria-label":"small outlined button group",color:"primary",disabled:ae,children:null===ue||void 0===ue?void 0:ue.map((function(e){return Object(J.jsx)(x.a,Object(a.a)(Object(a.a)({},e.id===Ke?{className:Ve.selectedButton}:{}),{},{onClick:function(){var t,n,a,r;return Je.push({pathname:Qe.pathname,search:"?".concat(new URLSearchParams({option:e.id,variant:null===ue||void 0===ue||null===(t=ue.filter((function(t){return t.id===e.id})))||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.variants)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.id}).toString())})},children:e.label}),e.id)}))})}),Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"row",spacing:1,children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,children:"Variante"})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{component:"div",variant:"body2",className:Ve.primaryText,children:Object(J.jsx)(O.a,{fontWeight:"fontWeightMedium",children:null===ue||void 0===ue||null===(N=ue.filter((function(e){return e.id===Ke})))||void 0===N||null===(k=N[0])||void 0===k||null===(I=k.variants)||void 0===I||null===(F=I.filter((function(e){return e.id===Xe})))||void 0===F||null===(X=F[0])||void 0===X?void 0:X.label})})})]})]}),Object(J.jsx)(h.a,{item:!0,style:{paddingBottom:"16px"},children:Object(J.jsx)(g.a,{size:"small","aria-label":"small outlined button group",color:"primary",disabled:ae,children:null===ue||void 0===ue||null===(Y=ue.filter((function(e){return e.id===Ke})))||void 0===Y||null===(Z=Y[0])||void 0===Z||null===($=Z.variants)||void 0===$?void 0:$.map((function(e){return Object(J.jsx)(x.a,Object(a.a)(Object(a.a)({},e.id===Xe?{className:Ve.selectedButton}:{}),{},{onClick:function(){return Je.push({pathname:Qe.pathname,search:"?".concat(new URLSearchParams({option:Ke,variant:e.id}).toString())})},children:e.label}),e.id)}))})})]}),Object(J.jsx)(f.a,{style:{marginTop:"16px"}}),Object(J.jsxs)(h.a,{item:!0,container:!0,direction:"column",xs:!0,style:{paddingTop:"16px"},children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,children:"Descrizione"})}),Object(J.jsx)(h.a,{item:!0,children:(null===oe||void 0===oe?void 0:oe.description)&&Object(B.a)(null===oe||void 0===oe?void 0:oe.description)})]})]})}),Object(J.jsx)(h.a,{item:!0,xs:3,children:Object(J.jsx)(v.a,{variant:"outlined",children:Object(J.jsx)(q.a,{children:Object(J.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"8px"},children:[Object(J.jsx)(m.a,{className:Ve.orderTotal,variant:"h6",children:Object(U.a)(null===oe||void 0===oe?void 0:oe.price)}),Object(J.jsx)(m.a,{variant:"body2",className:Ve.secondaryText,children:"IVA inclusa"}),Object(J.jsx)(m.a,{component:"div",style:{paddingTop:"16px",paddingBottom:"8px",color:"#007600"},variant:"body2",children:Object(J.jsx)(O.a,{fontWeight:"fontWeightMedium",children:"Disponibilit\xe0 immediata"})}),Object(J.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(J.jsx)(m.a,{className:Ve.greyText,style:{paddingTop:"16px",paddingBottom:"8px",flexGrow:1},variant:"body2",children:"Quantit\xe0"}),Object(J.jsx)(y.a,{type:"number",disabled:ae,value:Ie,onChange:function(e){return Ae(e.target.value)},onKeyDown:function(e){return e.preventDefault()},inputProps:{min:"1",step:"1",max:10,style:{textAlign:"center "}}})]}),Object(J.jsx)(x.a,{startIcon:Object(J.jsx)(z.a,{}),variant:"contained",color:"primary",disabled:ae,style:{marginTop:"24px"},onClick:function(){$e?(re(!0),ee(ge,Ie).catch((function(){return Ye("Impossibile aggiungere l'elemento al carrello","error")})).finally((function(){return re(!1)}))):Ze()},children:"Aggiungi al carrello"})]})})})})]}),me.length>0&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(f.a,{})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(C.a,{value:Ee,onChange:function(e,t){return Le(t)},indicatorColor:"secondary",textColor:"secondary",centered:!0,children:me.map((function(e){return Object(J.jsx)(w.a,{label:e.label,disabled:ae},e.label)}))})}),Object(J.jsx)(h.a,{item:!0,container:!0,xs:!0,children:me.map((function(e,t){return Object(J.jsx)(s.a.Fragment,{children:Ee===t&&s.a.Children.toArray(Object(B.a)(e.description,{replace:function(e){if(e.attribs)return"img"===e.name&&(e.attribs.style="height: auto;width: 100%"),e}})).map((function(e,t){return Object(J.jsx)(h.a,{item:!0,children:e},t)}))},t)}))})]})]}),Object(J.jsx)(h.a,{item:!0,style:{paddingTop:"32px"},children:Object(J.jsx)(f.a,{})}),Object(J.jsx)(h.a,{item:!0,children:Object(J.jsx)(m.a,{component:"div",style:{paddingTop:"16px"},children:Object(J.jsx)(O.a,{fontWeight:"fontWeightMedium",className:Ve.primaryText,children:"Altri prodotti che potrebbero interessarti"})})}),Object(J.jsx)(h.a,{item:!0,style:{marginLeft:"25px",marginRight:"25px",marginTop:"16px"},children:Object(J.jsx)(G.a,{excludeProductId:He,categoryId:null===oe||void 0===oe?void 0:oe.categoryId})})]})]})]})}}).call(this,n(266).Buffer)},679:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(7),r=n(5),i=n(0),c=n(680),o=n.n(c),s=(n(1025),n(1026),n(251)),l=n(31),d=n(1);function u(e){var t=e.categoryId,n=e.excludeProductId,c=Object(l.a)().getProducts,u=Object(i.useState)([]),p=Object(r.a)(u,2),b=p[0],j=p[1];return Object(i.useEffect)((function(){t&&c(t,{recordForPage:20,page:1}).then((function(e){var t=e;n&&(t=t.filter((function(e){return e.id_ArticlesRegistry!==n}))),j(t.map((function(e){return{title:e.description,price:e.sellingPriceTotVat,imageURL:e.imageURL,productId:e.id_ArticlesRegistry,id_firstcolor:e.id_firstcolor,id_firstsize:e.id_firstsize,firstcodtot:e.firstcodtot}})))}))}),[t,n]),Object(d.jsx)(d.Fragment,{children:b.length>0&&Object(d.jsx)(o.a,{draggable:!1,swipe:!1,touchMove:!1,dots:!1,infinite:!1,slidesToShow:4,children:b.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsx)(s.a,Object(a.a)({addToCart:!0},e))},t)}))})})}},997:function(e){e.exports=JSON.parse("{}")}},[[1028,1,2]]]);